(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function jf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dh={exports:{}},Ba={},bh={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kg;function qT(){if(Kg)return xe;Kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),T=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,L={};function D(z,J,me){this.props=z,this.context=J,this.refs=L,this.updater=me||A}D.prototype.isReactComponent={},D.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},D.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function F(){}F.prototype=D.prototype;function Q(z,J,me){this.props=z,this.context=J,this.refs=L,this.updater=me||A}var G=Q.prototype=new F;G.constructor=Q,b(G,D.prototype),G.isPureReactComponent=!0;var te=Array.isArray,K=Object.prototype.hasOwnProperty,ie={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(z,J,me){var de,Re={},Oe=null,$e=null;if(J!=null)for(de in J.ref!==void 0&&($e=J.ref),J.key!==void 0&&(Oe=""+J.key),J)K.call(J,de)&&!x.hasOwnProperty(de)&&(Re[de]=J[de]);var Fe=arguments.length-2;if(Fe===1)Re.children=me;else if(1<Fe){for(var Ge=Array(Fe),ct=0;ct<Fe;ct++)Ge[ct]=arguments[ct+2];Re.children=Ge}if(z&&z.defaultProps)for(de in Fe=z.defaultProps,Fe)Re[de]===void 0&&(Re[de]=Fe[de]);return{$$typeof:n,type:z,key:Oe,ref:$e,props:Re,_owner:ie.current}}function P(z,J){return{$$typeof:n,type:z.type,key:J,ref:z.ref,props:z.props,_owner:z._owner}}function k(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function R(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(me){return J[me]})}var j=/\/+/g;function N(z,J){return typeof z=="object"&&z!==null&&z.key!=null?R(""+z.key):J.toString(36)}function Ae(z,J,me,de,Re){var Oe=typeof z;(Oe==="undefined"||Oe==="boolean")&&(z=null);var $e=!1;if(z===null)$e=!0;else switch(Oe){case"string":case"number":$e=!0;break;case"object":switch(z.$$typeof){case n:case e:$e=!0}}if($e)return $e=z,Re=Re($e),z=de===""?"."+N($e,0):de,te(Re)?(me="",z!=null&&(me=z.replace(j,"$&/")+"/"),Ae(Re,J,me,"",function(ct){return ct})):Re!=null&&(k(Re)&&(Re=P(Re,me+(!Re.key||$e&&$e.key===Re.key?"":(""+Re.key).replace(j,"$&/")+"/")+z)),J.push(Re)),1;if($e=0,de=de===""?".":de+":",te(z))for(var Fe=0;Fe<z.length;Fe++){Oe=z[Fe];var Ge=de+N(Oe,Fe);$e+=Ae(Oe,J,me,Ge,Re)}else if(Ge=S(z),typeof Ge=="function")for(z=Ge.call(z),Fe=0;!(Oe=z.next()).done;)Oe=Oe.value,Ge=de+N(Oe,Fe++),$e+=Ae(Oe,J,me,Ge,Re);else if(Oe==="object")throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.");return $e}function Ne(z,J,me){if(z==null)return z;var de=[],Re=0;return Ae(z,de,"","",function(Oe){return J.call(me,Oe,Re++)}),de}function Pe(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(me){(z._status===0||z._status===-1)&&(z._status=1,z._result=me)},function(me){(z._status===0||z._status===-1)&&(z._status=2,z._result=me)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var De={current:null},se={transition:null},ye={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:se,ReactCurrentOwner:ie};function ae(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Ne,forEach:function(z,J,me){Ne(z,function(){J.apply(this,arguments)},me)},count:function(z){var J=0;return Ne(z,function(){J++}),J},toArray:function(z){return Ne(z,function(J){return J})||[]},only:function(z){if(!k(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},xe.Component=D,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=Q,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,xe.act=ae,xe.cloneElement=function(z,J,me){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var de=b({},z.props),Re=z.key,Oe=z.ref,$e=z._owner;if(J!=null){if(J.ref!==void 0&&(Oe=J.ref,$e=ie.current),J.key!==void 0&&(Re=""+J.key),z.type&&z.type.defaultProps)var Fe=z.type.defaultProps;for(Ge in J)K.call(J,Ge)&&!x.hasOwnProperty(Ge)&&(de[Ge]=J[Ge]===void 0&&Fe!==void 0?Fe[Ge]:J[Ge])}var Ge=arguments.length-2;if(Ge===1)de.children=me;else if(1<Ge){Fe=Array(Ge);for(var ct=0;ct<Ge;ct++)Fe[ct]=arguments[ct+2];de.children=Fe}return{$$typeof:n,type:z.type,key:Re,ref:Oe,props:de,_owner:$e}},xe.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:l,_context:z},z.Consumer=z},xe.createElement=C,xe.createFactory=function(z){var J=C.bind(null,z);return J.type=z,J},xe.createRef=function(){return{current:null}},xe.forwardRef=function(z){return{$$typeof:h,render:z}},xe.isValidElement=k,xe.lazy=function(z){return{$$typeof:E,_payload:{_status:-1,_result:z},_init:Pe}},xe.memo=function(z,J){return{$$typeof:y,type:z,compare:J===void 0?null:J}},xe.startTransition=function(z){var J=se.transition;se.transition={};try{z()}finally{se.transition=J}},xe.unstable_act=ae,xe.useCallback=function(z,J){return De.current.useCallback(z,J)},xe.useContext=function(z){return De.current.useContext(z)},xe.useDebugValue=function(){},xe.useDeferredValue=function(z){return De.current.useDeferredValue(z)},xe.useEffect=function(z,J){return De.current.useEffect(z,J)},xe.useId=function(){return De.current.useId()},xe.useImperativeHandle=function(z,J,me){return De.current.useImperativeHandle(z,J,me)},xe.useInsertionEffect=function(z,J){return De.current.useInsertionEffect(z,J)},xe.useLayoutEffect=function(z,J){return De.current.useLayoutEffect(z,J)},xe.useMemo=function(z,J){return De.current.useMemo(z,J)},xe.useReducer=function(z,J,me){return De.current.useReducer(z,J,me)},xe.useRef=function(z){return De.current.useRef(z)},xe.useState=function(z){return De.current.useState(z)},xe.useSyncExternalStore=function(z,J,me){return De.current.useSyncExternalStore(z,J,me)},xe.useTransition=function(){return De.current.useTransition()},xe.version="18.3.1",xe}var Gg;function Vf(){return Gg||(Gg=1,bh.exports=qT()),bh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qg;function WT(){if(Qg)return Ba;Qg=1;var n=Vf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var E,T={},S=null,A=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(A=p.ref);for(E in p)i.call(p,E)&&!l.hasOwnProperty(E)&&(T[E]=p[E]);if(h&&h.defaultProps)for(E in p=h.defaultProps,p)T[E]===void 0&&(T[E]=p[E]);return{$$typeof:e,type:h,key:S,ref:A,props:T,_owner:o.current}}return Ba.Fragment=t,Ba.jsx=c,Ba.jsxs=c,Ba}var Jg;function KT(){return Jg||(Jg=1,Dh.exports=WT()),Dh.exports}var v=KT(),U=Vf();const Jr=jf(U);var Bu={},jh={exports:{}},cn={},Vh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function GT(){return Yg||(Yg=1,function(n){function e(se,ye){var ae=se.length;se.push(ye);e:for(;0<ae;){var z=ae-1>>>1,J=se[z];if(0<o(J,ye))se[z]=ye,se[ae]=J,ae=z;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var ye=se[0],ae=se.pop();if(ae!==ye){se[0]=ae;e:for(var z=0,J=se.length,me=J>>>1;z<me;){var de=2*(z+1)-1,Re=se[de],Oe=de+1,$e=se[Oe];if(0>o(Re,ae))Oe<J&&0>o($e,Re)?(se[z]=$e,se[Oe]=ae,z=Oe):(se[z]=Re,se[de]=ae,z=de);else if(Oe<J&&0>o($e,ae))se[z]=$e,se[Oe]=ae,z=Oe;else break e}}return ye}function o(se,ye){var ae=se.sortIndex-ye.sortIndex;return ae!==0?ae:se.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],E=1,T=null,S=3,A=!1,b=!1,L=!1,D=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(se){for(var ye=t(y);ye!==null;){if(ye.callback===null)i(y);else if(ye.startTime<=se)i(y),ye.sortIndex=ye.expirationTime,e(p,ye);else break;ye=t(y)}}function te(se){if(L=!1,G(se),!b)if(t(p)!==null)b=!0,Pe(K);else{var ye=t(y);ye!==null&&De(te,ye.startTime-se)}}function K(se,ye){b=!1,L&&(L=!1,F(C),C=-1),A=!0;var ae=S;try{for(G(ye),T=t(p);T!==null&&(!(T.expirationTime>ye)||se&&!R());){var z=T.callback;if(typeof z=="function"){T.callback=null,S=T.priorityLevel;var J=z(T.expirationTime<=ye);ye=n.unstable_now(),typeof J=="function"?T.callback=J:T===t(p)&&i(p),G(ye)}else i(p);T=t(p)}if(T!==null)var me=!0;else{var de=t(y);de!==null&&De(te,de.startTime-ye),me=!1}return me}finally{T=null,S=ae,A=!1}}var ie=!1,x=null,C=-1,P=5,k=-1;function R(){return!(n.unstable_now()-k<P)}function j(){if(x!==null){var se=n.unstable_now();k=se;var ye=!0;try{ye=x(!0,se)}finally{ye?N():(ie=!1,x=null)}}else ie=!1}var N;if(typeof Q=="function")N=function(){Q(j)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Ne=Ae.port2;Ae.port1.onmessage=j,N=function(){Ne.postMessage(null)}}else N=function(){D(j,0)};function Pe(se){x=se,ie||(ie=!0,N())}function De(se,ye){C=D(function(){se(n.unstable_now())},ye)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){b||A||(b=!0,Pe(K))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(S){case 1:case 2:case 3:var ye=3;break;default:ye=S}var ae=S;S=ye;try{return se()}finally{S=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ye){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ae=S;S=se;try{return ye()}finally{S=ae}},n.unstable_scheduleCallback=function(se,ye,ae){var z=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?z+ae:z):ae=z,se){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ae+J,se={id:E++,callback:ye,priorityLevel:se,startTime:ae,expirationTime:J,sortIndex:-1},ae>z?(se.sortIndex=ae,e(y,se),t(p)===null&&se===t(y)&&(L?(F(C),C=-1):L=!0,De(te,ae-z))):(se.sortIndex=J,e(p,se),b||A||(b=!0,Pe(K))),se},n.unstable_shouldYield=R,n.unstable_wrapCallback=function(se){var ye=S;return function(){var ae=S;S=ye;try{return se.apply(this,arguments)}finally{S=ae}}}}(Lh)),Lh}var Xg;function QT(){return Xg||(Xg=1,Vh.exports=GT()),Vh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function JT(){if(Zg)return cn;Zg=1;var n=Vf(),e=QT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},T={};function S(r){return p.call(T,r)?!0:p.call(E,r)?!1:y.test(r)?T[r]=!0:(E[r]=!0,!1)}function A(r,s,a,d){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function b(r,s,a,d){if(s===null||typeof s>"u"||A(r,s,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function L(r,s,a,d,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){D[r]=new L(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];D[s]=new L(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){D[r]=new L(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){D[r]=new L(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){D[r]=new L(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){D[r]=new L(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){D[r]=new L(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){D[r]=new L(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){D[r]=new L(r,5,!1,r.toLowerCase(),null,!1,!1)});var F=/[\-:]([a-z])/g;function Q(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(F,Q);D[s]=new L(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(F,Q);D[s]=new L(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(F,Q);D[s]=new L(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){D[r]=new L(r,1,!1,r.toLowerCase(),null,!1,!1)}),D.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){D[r]=new L(r,1,!1,r.toLowerCase(),null,!0,!0)});function G(r,s,a,d){var f=D.hasOwnProperty(s)?D[s]:null;(f!==null?f.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,a,f,d)&&(a=null),d||f===null?S(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,s,a):r.setAttribute(s,a))))}var te=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,K=Symbol.for("react.element"),ie=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),R=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Pe=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),se=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=se&&r[se]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,z;function J(r){if(z===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);z=s&&s[1]||""}return`
`+z+r}var me=!1;function de(r,s){if(!r||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(q){var d=q}Reflect.construct(r,[],s)}else{try{s.call()}catch(q){d=q}r.call(s.prototype)}else{try{throw Error()}catch(q){d=q}r()}}catch(q){if(q&&d&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=d.stack.split(`
`),w=f.length-1,O=g.length-1;1<=w&&0<=O&&f[w]!==g[O];)O--;for(;1<=w&&0<=O;w--,O--)if(f[w]!==g[O]){if(w!==1||O!==1)do if(w--,O--,0>O||f[w]!==g[O]){var V=`
`+f[w].replace(" at new "," at ");return r.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",r.displayName)),V}while(1<=w&&0<=O);break}}}finally{me=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?J(r):""}function Re(r){switch(r.tag){case 5:return J(r.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 2:case 15:return r=de(r.type,!1),r;case 11:return r=de(r.type.render,!1),r;case 1:return r=de(r.type,!0),r;default:return""}}function Oe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case ie:return"Portal";case P:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case Ae:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case R:return(r.displayName||"Context")+".Consumer";case k:return(r._context.displayName||"Context")+".Provider";case j:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ne:return s=r.displayName||null,s!==null?s:Oe(r.type)||"Memo";case Pe:s=r._payload,r=r._init;try{return Oe(r(s))}catch{}}return null}function $e(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oe(s);case 8:return s===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ge(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ct(r){var s=Ge(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),d=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){d=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Cn(r){r._valueTracker||(r._valueTracker=ct(r))}function xr(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),d="";return r&&(d=Ge(r)?r.checked?"true":"false":r.value),r=d,r!==a?(s.setValue(r),!0):!1}function Fn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function we(r,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function be(r,s){var a=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;a=Fe(s.value!=null?s.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Ue(r,s){s=s.checked,s!=null&&G(r,"checked",s,!1)}function st(r,s){Ue(r,s);var a=Fe(s.value),d=s.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?Un(r,s.type,a):s.hasOwnProperty("defaultValue")&&Un(r,s.type,Fe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function Kt(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Un(r,s,a){(s!=="number"||Fn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Gt=Array.isArray;function tn(r,s,a,d){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+Fe(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Nr(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lr(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(Gt(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:Fe(a)}}function oi(r,s){var a=Fe(s.value),d=Fe(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function Yo(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function yt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?yt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Or,Xo=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,d,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(Or=Or||document.createElement("div"),Or.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Or.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function ai(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ns=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(r){ns.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),ts[s]=ts[r]})});function Zo(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||ts.hasOwnProperty(r)&&ts[r]?(""+s).trim():s+"px"}function ea(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=Zo(a,s[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var ta=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(r,s){if(s){if(ta[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ra(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rs=null;function Ms(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Fs=null,kn=null,ur=null;function Us(r){if(r=Ra(r)){if(typeof Fs!="function")throw Error(t(280));var s=r.stateNode;s&&(s=ru(s),Fs(r.stateNode,r.type,s))}}function cr(r){kn?ur?ur.push(r):ur=[r]:kn=r}function ia(){if(kn){var r=kn,s=ur;if(ur=kn=null,Us(r),s)for(r=0;r<s.length;r++)Us(s[r])}}function is(r,s){return r(s)}function sa(){}var Dr=!1;function oa(r,s,a){if(Dr)return r(s,a);Dr=!0;try{return is(r,s,a)}finally{Dr=!1,(kn!==null||ur!==null)&&(sa(),ia())}}function dt(r,s){var a=r.stateNode;if(a===null)return null;var d=ru(a);if(d===null)return null;a=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var zs=!1;if(h)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){zs=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{zs=!1}function ss(r,s,a,d,f,g,w,O,V){var q=Array.prototype.slice.call(arguments,3);try{s.apply(a,q)}catch(Z){this.onError(Z)}}var os=!1,Bs=null,Bn=!1,aa=null,ad={onError:function(r){os=!0,Bs=r}};function $s(r,s,a,d,f,g,w,O,V){os=!1,Bs=null,ss.apply(ad,arguments)}function Pl(r,s,a,d,f,g,w,O,V){if($s.apply(this,arguments),os){if(os){var q=Bs;os=!1,Bs=null}else throw Error(t(198));Bn||(Bn=!0,aa=q)}}function $n(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,s.flags&4098&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function as(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function Hn(r){if($n(r)!==r)throw Error(t(188))}function Al(r){var s=r.alternate;if(!s){if(s=$n(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,d=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Hn(f),r;if(g===d)return Hn(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var w=!1,O=f.child;O;){if(O===a){w=!0,a=f,d=g;break}if(O===d){w=!0,d=f,a=g;break}O=O.sibling}if(!w){for(O=g.child;O;){if(O===a){w=!0,a=g,d=f;break}if(O===d){w=!0,d=g,a=f;break}O=O.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function la(r){return r=Al(r),r!==null?Hs(r):null}function Hs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Hs(r);if(s!==null)return s;r=r.sibling}return null}var qs=e.unstable_scheduleCallback,ua=e.unstable_cancelCallback,xl=e.unstable_shouldYield,ld=e.unstable_requestPaint,Ye=e.unstable_now,Nl=e.unstable_getCurrentPriorityLevel,ls=e.unstable_ImmediatePriority,li=e.unstable_UserBlockingPriority,Rn=e.unstable_NormalPriority,ca=e.unstable_LowPriority,Ol=e.unstable_IdlePriority,us=null,gn=null;function Dl(r){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(us,r,void 0,(r.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:jl,da=Math.log,bl=Math.LN2;function jl(r){return r>>>=0,r===0?32:31-(da(r)/bl|0)|0}var Ws=64,Ks=4194304;function ui(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function cs(r,s){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var O=w&~f;O!==0?d=ui(O):(g&=w,g!==0&&(d=ui(g)))}else w=a&~f,w!==0?d=ui(w):g!==0&&(d=ui(g));if(d===0)return 0;if(s!==0&&s!==d&&!(s&f)&&(f=d&-d,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if(d&4&&(d|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=d;0<s;)a=31-Qt(s),f=1<<a,d|=r[a],s&=~f;return d}function ud(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(r,s){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Qt(g),O=1<<w,V=f[w];V===-1?(!(O&a)||O&d)&&(f[w]=ud(O,s)):V<=s&&(r.expiredLanes|=O),g&=~O}}function yn(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ds(){var r=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),r}function ci(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function di(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Qt(s),r[s]=a}function Je(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Qt(a),g=1<<f;s[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function hi(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var d=31-Qt(a),f=1<<d;f&s|r[d]&s&&(r[d]|=s),a&=~f}}var Le=0;function fi(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var Vl,Gs,Ll,Ml,Fl,ha=!1,dr=[],Nt=null,qn=null,Wn=null,pi=new Map,Pn=new Map,hr=[],cd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ul(r,s){switch(r){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":qn=null;break;case"mouseover":case"mouseout":Wn=null;break;case"pointerover":case"pointerout":pi.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(s.pointerId)}}function nn(r,s,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ra(s),s!==null&&Gs(s)),r):(r.eventSystemFlags|=d,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function dd(r,s,a,d,f){switch(s){case"focusin":return Nt=nn(Nt,r,s,a,d,f),!0;case"dragenter":return qn=nn(qn,r,s,a,d,f),!0;case"mouseover":return Wn=nn(Wn,r,s,a,d,f),!0;case"pointerover":var g=f.pointerId;return pi.set(g,nn(pi.get(g)||null,r,s,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,Pn.set(g,nn(Pn.get(g)||null,r,s,a,d,f)),!0}return!1}function zl(r){var s=gs(r.target);if(s!==null){var a=$n(s);if(a!==null){if(s=a.tag,s===13){if(s=as(a),s!==null){r.blockedOn=s,Fl(r.priority,function(){Ll(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function jr(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=Qs(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);rs=d,a.target.dispatchEvent(d),rs=null}else return s=Ra(a),s!==null&&Gs(s),r.blockedOn=a,!1;s.shift()}return!0}function hs(r,s,a){jr(r)&&a.delete(s)}function Bl(){ha=!1,Nt!==null&&jr(Nt)&&(Nt=null),qn!==null&&jr(qn)&&(qn=null),Wn!==null&&jr(Wn)&&(Wn=null),pi.forEach(hs),Pn.forEach(hs)}function Kn(r,s){r.blockedOn===s&&(r.blockedOn=null,ha||(ha=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bl)))}function Gn(r){function s(f){return Kn(f,r)}if(0<dr.length){Kn(dr[0],r);for(var a=1;a<dr.length;a++){var d=dr[a];d.blockedOn===r&&(d.blockedOn=null)}}for(Nt!==null&&Kn(Nt,r),qn!==null&&Kn(qn,r),Wn!==null&&Kn(Wn,r),pi.forEach(s),Pn.forEach(s),a=0;a<hr.length;a++)d=hr[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<hr.length&&(a=hr[0],a.blockedOn===null);)zl(a),a.blockedOn===null&&hr.shift()}var Vr=te.ReactCurrentBatchConfig,mi=!0;function tt(r,s,a,d){var f=Le,g=Vr.transition;Vr.transition=null;try{Le=1,fa(r,s,a,d)}finally{Le=f,Vr.transition=g}}function hd(r,s,a,d){var f=Le,g=Vr.transition;Vr.transition=null;try{Le=4,fa(r,s,a,d)}finally{Le=f,Vr.transition=g}}function fa(r,s,a,d){if(mi){var f=Qs(r,s,a,d);if(f===null)Id(r,s,d,fs,a),Ul(r,d);else if(dd(f,r,s,a,d))d.stopPropagation();else if(Ul(r,d),s&4&&-1<cd.indexOf(r)){for(;f!==null;){var g=Ra(f);if(g!==null&&Vl(g),g=Qs(r,s,a,d),g===null&&Id(r,s,d,fs,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else Id(r,s,d,null,a)}}var fs=null;function Qs(r,s,a,d){if(fs=null,r=Ms(d),r=gs(r),r!==null)if(s=$n(r),s===null)r=null;else if(a=s.tag,a===13){if(r=as(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return fs=r,null}function pa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nl()){case ls:return 1;case li:return 4;case Rn:case ca:return 16;case Ol:return 536870912;default:return 16}default:return 16}}var vn=null,Js=null,rn=null;function ma(){if(rn)return rn;var r,s=Js,a=s.length,d,f="value"in vn?vn.value:vn.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(d=1;d<=w&&s[a-d]===f[g-d];d++);return rn=f.slice(r,1<d?1-d:void 0)}function Ys(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function fr(){return!0}function ga(){return!1}function Ot(r){function s(a,d,f,g,w){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var O in r)r.hasOwnProperty(O)&&(a=r[O],this[O]=a?a(g):g[O]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?fr:ga,this.isPropagationStopped=ga,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fr)},persist:function(){},isPersistent:fr}),s}var Qn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Ot(Qn),pr=ae({},Qn,{view:0,detail:0}),fd=Ot(pr),Zs,Lr,gi,ps=ae({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==gi&&(gi&&r.type==="mousemove"?(Zs=r.screenX-gi.screenX,Lr=r.screenY-gi.screenY):Lr=Zs=0,gi=r),Zs)},movementY:function(r){return"movementY"in r?r.movementY:Lr}}),eo=Ot(ps),ya=ae({},ps,{dataTransfer:0}),$l=Ot(ya),to=ae({},pr,{relatedTarget:0}),no=Ot(to),Hl=ae({},Qn,{animationName:0,elapsedTime:0,pseudoElement:0}),Mr=Ot(Hl),ql=ae({},Qn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Wl=Ot(ql),Kl=ae({},Qn,{data:0}),va=Ot(Kl),ro={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ql(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Gl[r])?!!s[r]:!1}function mr(){return Ql}var u=ae({},pr,{key:function(r){if(r.key){var s=ro[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Ys(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Jt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mr,charCode:function(r){return r.type==="keypress"?Ys(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ys(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Ot(u),_=ae({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ot(_),B=ae({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mr}),W=Ot(B),oe=ae({},Qn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qe=Ot(oe),_t=ae({},ps,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=Ot(_t),kt=[9,13,27,32],pt=h&&"CompositionEvent"in window,An=null;h&&"documentMode"in document&&(An=document.documentMode);var _n=h&&"TextEvent"in window&&!An,ms=h&&(!pt||An&&8<An&&11>=An),io=" ",zp=!1;function Bp(r,s){switch(r){case"keyup":return kt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var so=!1;function Bw(r,s){switch(r){case"compositionend":return $p(s);case"keypress":return s.which!==32?null:(zp=!0,io);case"textInput":return r=s.data,r===io&&zp?null:r;default:return null}}function $w(r,s){if(so)return r==="compositionend"||!pt&&Bp(r,s)?(r=ma(),rn=Js=vn=null,so=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ms&&s.locale!=="ko"?null:s.data;default:return null}}var Hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!Hw[r.type]:s==="textarea"}function qp(r,s,a,d){cr(d),s=eu(s,"onChange"),0<s.length&&(a=new Xs("onChange","change",null,a,d),r.push({event:a,listeners:s}))}var _a=null,Ea=null;function qw(r){um(r,0)}function Jl(r){var s=co(r);if(xr(s))return r}function Ww(r,s){if(r==="change")return s}var Wp=!1;if(h){var pd;if(h){var md="oninput"in document;if(!md){var Kp=document.createElement("div");Kp.setAttribute("oninput","return;"),md=typeof Kp.oninput=="function"}pd=md}else pd=!1;Wp=pd&&(!document.documentMode||9<document.documentMode)}function Gp(){_a&&(_a.detachEvent("onpropertychange",Qp),Ea=_a=null)}function Qp(r){if(r.propertyName==="value"&&Jl(Ea)){var s=[];qp(s,Ea,r,Ms(r)),oa(qw,s)}}function Kw(r,s,a){r==="focusin"?(Gp(),_a=s,Ea=a,_a.attachEvent("onpropertychange",Qp)):r==="focusout"&&Gp()}function Gw(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jl(Ea)}function Qw(r,s){if(r==="click")return Jl(s)}function Jw(r,s){if(r==="input"||r==="change")return Jl(s)}function Yw(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Jn=typeof Object.is=="function"?Object.is:Yw;function wa(r,s){if(Jn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),d=Object.keys(s);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(s,f)||!Jn(r[f],s[f]))return!1}return!0}function Jp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Yp(r,s){var a=Jp(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=s&&d>=s)return{node:a,offset:s-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Jp(a)}}function Xp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?Xp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Zp(){for(var r=window,s=Fn();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=Fn(r.document)}return s}function gd(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function Xw(r){var s=Zp(),a=r.focusedElem,d=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&Xp(a.ownerDocument.documentElement,a)){if(d!==null&&gd(a)){if(s=d.start,r=d.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=Yp(a,g);var w=Yp(a,d);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var Zw=h&&"documentMode"in document&&11>=document.documentMode,oo=null,yd=null,Ta=null,vd=!1;function em(r,s,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;vd||oo==null||oo!==Fn(d)||(d=oo,"selectionStart"in d&&gd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ta&&wa(Ta,d)||(Ta=d,d=eu(yd,"onSelect"),0<d.length&&(s=new Xs("onSelect","select",null,s,a),r.push({event:s,listeners:d}),s.target=oo)))}function Yl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var ao={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},_d={},tm={};h&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Xl(r){if(_d[r])return _d[r];if(!ao[r])return r;var s=ao[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in tm)return _d[r]=s[a];return r}var nm=Xl("animationend"),rm=Xl("animationiteration"),im=Xl("animationstart"),sm=Xl("transitionend"),om=new Map,am="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yi(r,s){om.set(r,s),l(s,[r])}for(var Ed=0;Ed<am.length;Ed++){var wd=am[Ed],eT=wd.toLowerCase(),tT=wd[0].toUpperCase()+wd.slice(1);yi(eT,"on"+tT)}yi(nm,"onAnimationEnd"),yi(rm,"onAnimationIteration"),yi(im,"onAnimationStart"),yi("dblclick","onDoubleClick"),yi("focusin","onFocus"),yi("focusout","onBlur"),yi(sm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function lm(r,s,a){var d=r.type||"unknown-event";r.currentTarget=a,Pl(d,s,void 0,r),r.currentTarget=null}function um(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(s)for(var w=d.length-1;0<=w;w--){var O=d[w],V=O.instance,q=O.currentTarget;if(O=O.listener,V!==g&&f.isPropagationStopped())break e;lm(f,O,q),g=V}else for(w=0;w<d.length;w++){if(O=d[w],V=O.instance,q=O.currentTarget,O=O.listener,V!==g&&f.isPropagationStopped())break e;lm(f,O,q),g=V}}}if(Bn)throw r=aa,Bn=!1,aa=null,r}function Ze(r,s){var a=s[Ad];a===void 0&&(a=s[Ad]=new Set);var d=r+"__bubble";a.has(d)||(cm(s,r,2,!1),a.add(d))}function Td(r,s,a){var d=0;s&&(d|=4),cm(a,r,d,s)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function Sa(r){if(!r[Zl]){r[Zl]=!0,i.forEach(function(a){a!=="selectionchange"&&(nT.has(a)||Td(a,!1,r),Td(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Zl]||(s[Zl]=!0,Td("selectionchange",!1,s))}}function cm(r,s,a,d){switch(pa(s)){case 1:var f=tt;break;case 4:f=hd;break;default:f=fa}a=f.bind(null,s,a,r),f=void 0,!zs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Id(r,s,a,d,f){var g=d;if(!(s&1)&&!(s&2)&&d!==null)e:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var O=d.stateNode.containerInfo;if(O===f||O.nodeType===8&&O.parentNode===f)break;if(w===4)for(w=d.return;w!==null;){var V=w.tag;if((V===3||V===4)&&(V=w.stateNode.containerInfo,V===f||V.nodeType===8&&V.parentNode===f))return;w=w.return}for(;O!==null;){if(w=gs(O),w===null)return;if(V=w.tag,V===5||V===6){d=g=w;continue e}O=O.parentNode}}d=d.return}oa(function(){var q=g,Z=Ms(a),ne=[];e:{var X=om.get(r);if(X!==void 0){var le=Xs,he=r;switch(r){case"keypress":if(Ys(a)===0)break e;case"keydown":case"keyup":le=m;break;case"focusin":he="focus",le=no;break;case"focusout":he="blur",le=no;break;case"beforeblur":case"afterblur":le=no;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=eo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=$l;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=W;break;case nm:case rm:case im:le=Mr;break;case sm:le=Qe;break;case"scroll":le=fd;break;case"wheel":le=ze;break;case"copy":case"cut":case"paste":le=Wl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=I}var fe=(s&4)!==0,ht=!fe&&r==="scroll",$=fe?X!==null?X+"Capture":null:X;fe=[];for(var M=q,H;M!==null;){H=M;var re=H.stateNode;if(H.tag===5&&re!==null&&(H=re,$!==null&&(re=dt(M,$),re!=null&&fe.push(Ca(M,re,H)))),ht)break;M=M.return}0<fe.length&&(X=new le(X,he,null,a,Z),ne.push({event:X,listeners:fe}))}}if(!(s&7)){e:{if(X=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",X&&a!==rs&&(he=a.relatedTarget||a.fromElement)&&(gs(he)||he[Fr]))break e;if((le||X)&&(X=Z.window===Z?Z:(X=Z.ownerDocument)?X.defaultView||X.parentWindow:window,le?(he=a.relatedTarget||a.toElement,le=q,he=he?gs(he):null,he!==null&&(ht=$n(he),he!==ht||he.tag!==5&&he.tag!==6)&&(he=null)):(le=null,he=q),le!==he)){if(fe=eo,re="onMouseLeave",$="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(fe=I,re="onPointerLeave",$="onPointerEnter",M="pointer"),ht=le==null?X:co(le),H=he==null?X:co(he),X=new fe(re,M+"leave",le,a,Z),X.target=ht,X.relatedTarget=H,re=null,gs(Z)===q&&(fe=new fe($,M+"enter",he,a,Z),fe.target=H,fe.relatedTarget=ht,re=fe),ht=re,le&&he)t:{for(fe=le,$=he,M=0,H=fe;H;H=lo(H))M++;for(H=0,re=$;re;re=lo(re))H++;for(;0<M-H;)fe=lo(fe),M--;for(;0<H-M;)$=lo($),H--;for(;M--;){if(fe===$||$!==null&&fe===$.alternate)break t;fe=lo(fe),$=lo($)}fe=null}else fe=null;le!==null&&dm(ne,X,le,fe,!1),he!==null&&ht!==null&&dm(ne,ht,he,fe,!0)}}e:{if(X=q?co(q):window,le=X.nodeName&&X.nodeName.toLowerCase(),le==="select"||le==="input"&&X.type==="file")var pe=Ww;else if(Hp(X))if(Wp)pe=Jw;else{pe=Gw;var ve=Kw}else(le=X.nodeName)&&le.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(pe=Qw);if(pe&&(pe=pe(r,q))){qp(ne,pe,a,Z);break e}ve&&ve(r,X,q),r==="focusout"&&(ve=X._wrapperState)&&ve.controlled&&X.type==="number"&&Un(X,"number",X.value)}switch(ve=q?co(q):window,r){case"focusin":(Hp(ve)||ve.contentEditable==="true")&&(oo=ve,yd=q,Ta=null);break;case"focusout":Ta=yd=oo=null;break;case"mousedown":vd=!0;break;case"contextmenu":case"mouseup":case"dragend":vd=!1,em(ne,a,Z);break;case"selectionchange":if(Zw)break;case"keydown":case"keyup":em(ne,a,Z)}var _e;if(pt)e:{switch(r){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else so?Bp(r,a)&&(Se="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Se="onCompositionStart");Se&&(ms&&a.locale!=="ko"&&(so||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&so&&(_e=ma()):(vn=Z,Js="value"in vn?vn.value:vn.textContent,so=!0)),ve=eu(q,Se),0<ve.length&&(Se=new va(Se,r,null,a,Z),ne.push({event:Se,listeners:ve}),_e?Se.data=_e:(_e=$p(a),_e!==null&&(Se.data=_e)))),(_e=_n?Bw(r,a):$w(r,a))&&(q=eu(q,"onBeforeInput"),0<q.length&&(Z=new va("onBeforeInput","beforeinput",null,a,Z),ne.push({event:Z,listeners:q}),Z.data=_e))}um(ne,s)})}function Ca(r,s,a){return{instance:r,listener:s,currentTarget:a}}function eu(r,s){for(var a=s+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=dt(r,a),g!=null&&d.unshift(Ca(r,g,f)),g=dt(r,s),g!=null&&d.push(Ca(r,g,f))),r=r.return}return d}function lo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function dm(r,s,a,d,f){for(var g=s._reactName,w=[];a!==null&&a!==d;){var O=a,V=O.alternate,q=O.stateNode;if(V!==null&&V===d)break;O.tag===5&&q!==null&&(O=q,f?(V=dt(a,g),V!=null&&w.unshift(Ca(a,V,O))):f||(V=dt(a,g),V!=null&&w.push(Ca(a,V,O)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var rT=/\r\n?/g,iT=/\u0000|\uFFFD/g;function hm(r){return(typeof r=="string"?r:""+r).replace(rT,`
`).replace(iT,"")}function tu(r,s,a){if(s=hm(s),hm(r)!==s&&a)throw Error(t(425))}function nu(){}var Sd=null,Cd=null;function kd(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rd=typeof setTimeout=="function"?setTimeout:void 0,sT=typeof clearTimeout=="function"?clearTimeout:void 0,fm=typeof Promise=="function"?Promise:void 0,oT=typeof queueMicrotask=="function"?queueMicrotask:typeof fm<"u"?function(r){return fm.resolve(null).then(r).catch(aT)}:Rd;function aT(r){setTimeout(function(){throw r})}function Pd(r,s){var a=s,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),Gn(s);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);Gn(s)}function vi(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function pm(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var uo=Math.random().toString(36).slice(2),gr="__reactFiber$"+uo,ka="__reactProps$"+uo,Fr="__reactContainer$"+uo,Ad="__reactEvents$"+uo,lT="__reactListeners$"+uo,uT="__reactHandles$"+uo;function gs(r){var s=r[gr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Fr]||a[gr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=pm(r);r!==null;){if(a=r[gr])return a;r=pm(r)}return s}r=a,a=r.parentNode}return null}function Ra(r){return r=r[gr]||r[Fr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function co(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function ru(r){return r[ka]||null}var xd=[],ho=-1;function _i(r){return{current:r}}function et(r){0>ho||(r.current=xd[ho],xd[ho]=null,ho--)}function Xe(r,s){ho++,xd[ho]=r.current,r.current=s}var Ei={},Ft=_i(Ei),sn=_i(!1),ys=Ei;function fo(r,s){var a=r.type.contextTypes;if(!a)return Ei;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function on(r){return r=r.childContextTypes,r!=null}function iu(){et(sn),et(Ft)}function mm(r,s,a){if(Ft.current!==Ei)throw Error(t(168));Xe(Ft,s),Xe(sn,a)}function gm(r,s,a){var d=r.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in s))throw Error(t(108,$e(r)||"Unknown",f));return ae({},a,d)}function su(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ei,ys=Ft.current,Xe(Ft,r),Xe(sn,sn.current),!0}function ym(r,s,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=gm(r,s,ys),d.__reactInternalMemoizedMergedChildContext=r,et(sn),et(Ft),Xe(Ft,r)):et(sn),Xe(sn,a)}var Ur=null,ou=!1,Nd=!1;function vm(r){Ur===null?Ur=[r]:Ur.push(r)}function cT(r){ou=!0,vm(r)}function wi(){if(!Nd&&Ur!==null){Nd=!0;var r=0,s=Le;try{var a=Ur;for(Le=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}Ur=null,ou=!1}catch(f){throw Ur!==null&&(Ur=Ur.slice(r+1)),qs(ls,wi),f}finally{Le=s,Nd=!1}}return null}var po=[],mo=0,au=null,lu=0,xn=[],Nn=0,vs=null,zr=1,Br="";function _s(r,s){po[mo++]=lu,po[mo++]=au,au=r,lu=s}function _m(r,s,a){xn[Nn++]=zr,xn[Nn++]=Br,xn[Nn++]=vs,vs=r;var d=zr;r=Br;var f=32-Qt(d)-1;d&=~(1<<f),a+=1;var g=32-Qt(s)+f;if(30<g){var w=f-f%5;g=(d&(1<<w)-1).toString(32),d>>=w,f-=w,zr=1<<32-Qt(s)+f|a<<f|d,Br=g+r}else zr=1<<g|a<<f|d,Br=r}function Od(r){r.return!==null&&(_s(r,1),_m(r,1,0))}function Dd(r){for(;r===au;)au=po[--mo],po[mo]=null,lu=po[--mo],po[mo]=null;for(;r===vs;)vs=xn[--Nn],xn[Nn]=null,Br=xn[--Nn],xn[Nn]=null,zr=xn[--Nn],xn[Nn]=null}var En=null,wn=null,nt=!1,Yn=null;function Em(r,s){var a=jn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function wm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,En=r,wn=vi(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,En=r,wn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=vs!==null?{id:zr,overflow:Br}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=jn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,En=r,wn=null,!0):!1;default:return!1}}function bd(r){return(r.mode&1)!==0&&(r.flags&128)===0}function jd(r){if(nt){var s=wn;if(s){var a=s;if(!wm(r,s)){if(bd(r))throw Error(t(418));s=vi(a.nextSibling);var d=En;s&&wm(r,s)?Em(d,a):(r.flags=r.flags&-4097|2,nt=!1,En=r)}}else{if(bd(r))throw Error(t(418));r.flags=r.flags&-4097|2,nt=!1,En=r}}}function Tm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;En=r}function uu(r){if(r!==En)return!1;if(!nt)return Tm(r),nt=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!kd(r.type,r.memoizedProps)),s&&(s=wn)){if(bd(r))throw Im(),Error(t(418));for(;s;)Em(r,s),s=vi(s.nextSibling)}if(Tm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){wn=vi(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}wn=null}}else wn=En?vi(r.stateNode.nextSibling):null;return!0}function Im(){for(var r=wn;r;)r=vi(r.nextSibling)}function go(){wn=En=null,nt=!1}function Vd(r){Yn===null?Yn=[r]:Yn.push(r)}var dT=te.ReactCurrentBatchConfig;function Pa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var O=f.refs;w===null?delete O[g]:O[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function cu(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function Sm(r){var s=r._init;return s(r._payload)}function Cm(r){function s($,M){if(r){var H=$.deletions;H===null?($.deletions=[M],$.flags|=16):H.push(M)}}function a($,M){if(!r)return null;for(;M!==null;)s($,M),M=M.sibling;return null}function d($,M){for($=new Map;M!==null;)M.key!==null?$.set(M.key,M):$.set(M.index,M),M=M.sibling;return $}function f($,M){return $=Ai($,M),$.index=0,$.sibling=null,$}function g($,M,H){return $.index=H,r?(H=$.alternate,H!==null?(H=H.index,H<M?($.flags|=2,M):H):($.flags|=2,M)):($.flags|=1048576,M)}function w($){return r&&$.alternate===null&&($.flags|=2),$}function O($,M,H,re){return M===null||M.tag!==6?(M=Rh(H,$.mode,re),M.return=$,M):(M=f(M,H),M.return=$,M)}function V($,M,H,re){var pe=H.type;return pe===x?Z($,M,H.props.children,re,H.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pe&&Sm(pe)===M.type)?(re=f(M,H.props),re.ref=Pa($,M,H),re.return=$,re):(re=bu(H.type,H.key,H.props,null,$.mode,re),re.ref=Pa($,M,H),re.return=$,re)}function q($,M,H,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==H.containerInfo||M.stateNode.implementation!==H.implementation?(M=Ph(H,$.mode,re),M.return=$,M):(M=f(M,H.children||[]),M.return=$,M)}function Z($,M,H,re,pe){return M===null||M.tag!==7?(M=Rs(H,$.mode,re,pe),M.return=$,M):(M=f(M,H),M.return=$,M)}function ne($,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Rh(""+M,$.mode,H),M.return=$,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case K:return H=bu(M.type,M.key,M.props,null,$.mode,H),H.ref=Pa($,null,M),H.return=$,H;case ie:return M=Ph(M,$.mode,H),M.return=$,M;case Pe:var re=M._init;return ne($,re(M._payload),H)}if(Gt(M)||ye(M))return M=Rs(M,$.mode,H,null),M.return=$,M;cu($,M)}return null}function X($,M,H,re){var pe=M!==null?M.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return pe!==null?null:O($,M,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case K:return H.key===pe?V($,M,H,re):null;case ie:return H.key===pe?q($,M,H,re):null;case Pe:return pe=H._init,X($,M,pe(H._payload),re)}if(Gt(H)||ye(H))return pe!==null?null:Z($,M,H,re,null);cu($,H)}return null}function le($,M,H,re,pe){if(typeof re=="string"&&re!==""||typeof re=="number")return $=$.get(H)||null,O(M,$,""+re,pe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case K:return $=$.get(re.key===null?H:re.key)||null,V(M,$,re,pe);case ie:return $=$.get(re.key===null?H:re.key)||null,q(M,$,re,pe);case Pe:var ve=re._init;return le($,M,H,ve(re._payload),pe)}if(Gt(re)||ye(re))return $=$.get(H)||null,Z(M,$,re,pe,null);cu(M,re)}return null}function he($,M,H,re){for(var pe=null,ve=null,_e=M,Se=M=0,At=null;_e!==null&&Se<H.length;Se++){_e.index>Se?(At=_e,_e=null):At=_e.sibling;var qe=X($,_e,H[Se],re);if(qe===null){_e===null&&(_e=At);break}r&&_e&&qe.alternate===null&&s($,_e),M=g(qe,M,Se),ve===null?pe=qe:ve.sibling=qe,ve=qe,_e=At}if(Se===H.length)return a($,_e),nt&&_s($,Se),pe;if(_e===null){for(;Se<H.length;Se++)_e=ne($,H[Se],re),_e!==null&&(M=g(_e,M,Se),ve===null?pe=_e:ve.sibling=_e,ve=_e);return nt&&_s($,Se),pe}for(_e=d($,_e);Se<H.length;Se++)At=le(_e,$,Se,H[Se],re),At!==null&&(r&&At.alternate!==null&&_e.delete(At.key===null?Se:At.key),M=g(At,M,Se),ve===null?pe=At:ve.sibling=At,ve=At);return r&&_e.forEach(function(xi){return s($,xi)}),nt&&_s($,Se),pe}function fe($,M,H,re){var pe=ye(H);if(typeof pe!="function")throw Error(t(150));if(H=pe.call(H),H==null)throw Error(t(151));for(var ve=pe=null,_e=M,Se=M=0,At=null,qe=H.next();_e!==null&&!qe.done;Se++,qe=H.next()){_e.index>Se?(At=_e,_e=null):At=_e.sibling;var xi=X($,_e,qe.value,re);if(xi===null){_e===null&&(_e=At);break}r&&_e&&xi.alternate===null&&s($,_e),M=g(xi,M,Se),ve===null?pe=xi:ve.sibling=xi,ve=xi,_e=At}if(qe.done)return a($,_e),nt&&_s($,Se),pe;if(_e===null){for(;!qe.done;Se++,qe=H.next())qe=ne($,qe.value,re),qe!==null&&(M=g(qe,M,Se),ve===null?pe=qe:ve.sibling=qe,ve=qe);return nt&&_s($,Se),pe}for(_e=d($,_e);!qe.done;Se++,qe=H.next())qe=le(_e,$,Se,qe.value,re),qe!==null&&(r&&qe.alternate!==null&&_e.delete(qe.key===null?Se:qe.key),M=g(qe,M,Se),ve===null?pe=qe:ve.sibling=qe,ve=qe);return r&&_e.forEach(function(HT){return s($,HT)}),nt&&_s($,Se),pe}function ht($,M,H,re){if(typeof H=="object"&&H!==null&&H.type===x&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case K:e:{for(var pe=H.key,ve=M;ve!==null;){if(ve.key===pe){if(pe=H.type,pe===x){if(ve.tag===7){a($,ve.sibling),M=f(ve,H.props.children),M.return=$,$=M;break e}}else if(ve.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pe&&Sm(pe)===ve.type){a($,ve.sibling),M=f(ve,H.props),M.ref=Pa($,ve,H),M.return=$,$=M;break e}a($,ve);break}else s($,ve);ve=ve.sibling}H.type===x?(M=Rs(H.props.children,$.mode,re,H.key),M.return=$,$=M):(re=bu(H.type,H.key,H.props,null,$.mode,re),re.ref=Pa($,M,H),re.return=$,$=re)}return w($);case ie:e:{for(ve=H.key;M!==null;){if(M.key===ve)if(M.tag===4&&M.stateNode.containerInfo===H.containerInfo&&M.stateNode.implementation===H.implementation){a($,M.sibling),M=f(M,H.children||[]),M.return=$,$=M;break e}else{a($,M);break}else s($,M);M=M.sibling}M=Ph(H,$.mode,re),M.return=$,$=M}return w($);case Pe:return ve=H._init,ht($,M,ve(H._payload),re)}if(Gt(H))return he($,M,H,re);if(ye(H))return fe($,M,H,re);cu($,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,M!==null&&M.tag===6?(a($,M.sibling),M=f(M,H),M.return=$,$=M):(a($,M),M=Rh(H,$.mode,re),M.return=$,$=M),w($)):a($,M)}return ht}var yo=Cm(!0),km=Cm(!1),du=_i(null),hu=null,vo=null,Ld=null;function Md(){Ld=vo=hu=null}function Fd(r){var s=du.current;et(du),r._currentValue=s}function Ud(r,s,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),r===a)break;r=r.return}}function _o(r,s){hu=r,Ld=vo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&s&&(an=!0),r.firstContext=null)}function On(r){var s=r._currentValue;if(Ld!==r)if(r={context:r,memoizedValue:s,next:null},vo===null){if(hu===null)throw Error(t(308));vo=r,hu.dependencies={lanes:0,firstContext:r}}else vo=vo.next=r;return s}var Es=null;function zd(r){Es===null?Es=[r]:Es.push(r)}function Rm(r,s,a,d){var f=s.interleaved;return f===null?(a.next=a,zd(s)):(a.next=f.next,f.next=a),s.interleaved=a,$r(r,d)}function $r(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Ti=!1;function Bd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pm(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Hr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function Ii(r,s,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,He&2){var f=d.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),d.pending=s,$r(r,a)}return f=d.interleaved,f===null?(s.next=s,zd(d)):(s.next=f.next,f.next=s),d.interleaved=s,$r(r,a)}function fu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,hi(r,a)}}function Am(r,s){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function pu(r,s,a,d){var f=r.updateQueue;Ti=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,O=f.shared.pending;if(O!==null){f.shared.pending=null;var V=O,q=V.next;V.next=null,w===null?g=q:w.next=q,w=V;var Z=r.alternate;Z!==null&&(Z=Z.updateQueue,O=Z.lastBaseUpdate,O!==w&&(O===null?Z.firstBaseUpdate=q:O.next=q,Z.lastBaseUpdate=V))}if(g!==null){var ne=f.baseState;w=0,Z=q=V=null,O=g;do{var X=O.lane,le=O.eventTime;if((d&X)===X){Z!==null&&(Z=Z.next={eventTime:le,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var he=r,fe=O;switch(X=s,le=a,fe.tag){case 1:if(he=fe.payload,typeof he=="function"){ne=he.call(le,ne,X);break e}ne=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=fe.payload,X=typeof he=="function"?he.call(le,ne,X):he,X==null)break e;ne=ae({},ne,X);break e;case 2:Ti=!0}}O.callback!==null&&O.lane!==0&&(r.flags|=64,X=f.effects,X===null?f.effects=[O]:X.push(O))}else le={eventTime:le,lane:X,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Z===null?(q=Z=le,V=ne):Z=Z.next=le,w|=X;if(O=O.next,O===null){if(O=f.shared.pending,O===null)break;X=O,O=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);if(Z===null&&(V=ne),f.baseState=V,f.firstBaseUpdate=q,f.lastBaseUpdate=Z,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);Is|=w,r.lanes=w,r.memoizedState=ne}}function xm(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var d=r[s],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Aa={},yr=_i(Aa),xa=_i(Aa),Na=_i(Aa);function ws(r){if(r===Aa)throw Error(t(174));return r}function $d(r,s){switch(Xe(Na,s),Xe(xa,r),Xe(yr,Aa),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:vt(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=vt(s,r)}et(yr),Xe(yr,s)}function Eo(){et(yr),et(xa),et(Na)}function Nm(r){ws(Na.current);var s=ws(yr.current),a=vt(s,r.type);s!==a&&(Xe(xa,r),Xe(yr,a))}function Hd(r){xa.current===r&&(et(yr),et(xa))}var ot=_i(0);function mu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var qd=[];function Wd(){for(var r=0;r<qd.length;r++)qd[r]._workInProgressVersionPrimary=null;qd.length=0}var gu=te.ReactCurrentDispatcher,Kd=te.ReactCurrentBatchConfig,Ts=0,at=null,Et=null,Rt=null,yu=!1,Oa=!1,Da=0,hT=0;function Ut(){throw Error(t(321))}function Gd(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Jn(r[a],s[a]))return!1;return!0}function Qd(r,s,a,d,f,g){if(Ts=g,at=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,gu.current=r===null||r.memoizedState===null?gT:yT,r=a(d,f),Oa){g=0;do{if(Oa=!1,Da=0,25<=g)throw Error(t(301));g+=1,Rt=Et=null,s.updateQueue=null,gu.current=vT,r=a(d,f)}while(Oa)}if(gu.current=Eu,s=Et!==null&&Et.next!==null,Ts=0,Rt=Et=at=null,yu=!1,s)throw Error(t(300));return r}function Jd(){var r=Da!==0;return Da=0,r}function vr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?at.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function Dn(){if(Et===null){var r=at.alternate;r=r!==null?r.memoizedState:null}else r=Et.next;var s=Rt===null?at.memoizedState:Rt.next;if(s!==null)Rt=s,Et=r;else{if(r===null)throw Error(t(310));Et=r,r={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Rt===null?at.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function ba(r,s){return typeof s=="function"?s(r):s}function Yd(r){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=Et,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var O=w=null,V=null,q=g;do{var Z=q.lane;if((Ts&Z)===Z)V!==null&&(V=V.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),d=q.hasEagerState?q.eagerState:r(d,q.action);else{var ne={lane:Z,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};V===null?(O=V=ne,w=d):V=V.next=ne,at.lanes|=Z,Is|=Z}q=q.next}while(q!==null&&q!==g);V===null?w=d:V.next=O,Jn(d,s.memoizedState)||(an=!0),s.memoizedState=d,s.baseState=w,s.baseQueue=V,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,at.lanes|=g,Is|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Xd(r){var s=Dn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Jn(g,s.memoizedState)||(an=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,d]}function Om(){}function Dm(r,s){var a=at,d=Dn(),f=s(),g=!Jn(d.memoizedState,f);if(g&&(d.memoizedState=f,an=!0),d=d.queue,Zd(Vm.bind(null,a,d,r),[r]),d.getSnapshot!==s||g||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,ja(9,jm.bind(null,a,d,f,s),void 0,null),Pt===null)throw Error(t(349));Ts&30||bm(a,s,f)}return f}function bm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function jm(r,s,a,d){s.value=a,s.getSnapshot=d,Lm(s)&&Mm(r)}function Vm(r,s,a){return a(function(){Lm(s)&&Mm(r)})}function Lm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Jn(r,a)}catch{return!0}}function Mm(r){var s=$r(r,1);s!==null&&tr(s,r,1,-1)}function Fm(r){var s=vr();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:r},s.queue=r,r=r.dispatch=mT.bind(null,at,r),[s.memoizedState,r]}function ja(r,s,a,d){return r={tag:r,create:s,destroy:a,deps:d,next:null},s=at.updateQueue,s===null?(s={lastEffect:null,stores:null},at.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,s.lastEffect=r)),r}function Um(){return Dn().memoizedState}function vu(r,s,a,d){var f=vr();at.flags|=r,f.memoizedState=ja(1|s,a,void 0,d===void 0?null:d)}function _u(r,s,a,d){var f=Dn();d=d===void 0?null:d;var g=void 0;if(Et!==null){var w=Et.memoizedState;if(g=w.destroy,d!==null&&Gd(d,w.deps)){f.memoizedState=ja(s,a,g,d);return}}at.flags|=r,f.memoizedState=ja(1|s,a,g,d)}function zm(r,s){return vu(8390656,8,r,s)}function Zd(r,s){return _u(2048,8,r,s)}function Bm(r,s){return _u(4,2,r,s)}function $m(r,s){return _u(4,4,r,s)}function Hm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function qm(r,s,a){return a=a!=null?a.concat([r]):null,_u(4,4,Hm.bind(null,s,r),a)}function eh(){}function Wm(r,s){var a=Dn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Gd(s,d[1])?d[0]:(a.memoizedState=[r,s],r)}function Km(r,s){var a=Dn();s=s===void 0?null:s;var d=a.memoizedState;return d!==null&&s!==null&&Gd(s,d[1])?d[0]:(r=r(),a.memoizedState=[r,s],r)}function Gm(r,s,a){return Ts&21?(Jn(a,s)||(a=ds(),at.lanes|=a,Is|=a,r.baseState=!0),s):(r.baseState&&(r.baseState=!1,an=!0),r.memoizedState=a)}function fT(r,s){var a=Le;Le=a!==0&&4>a?a:4,r(!0);var d=Kd.transition;Kd.transition={};try{r(!1),s()}finally{Le=a,Kd.transition=d}}function Qm(){return Dn().memoizedState}function pT(r,s,a){var d=Ri(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Jm(r))Ym(s,a);else if(a=Rm(r,s,a,d),a!==null){var f=Xt();tr(a,r,d,f),Xm(a,s,d)}}function mT(r,s,a){var d=Ri(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Jm(r))Ym(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,O=g(w,a);if(f.hasEagerState=!0,f.eagerState=O,Jn(O,w)){var V=s.interleaved;V===null?(f.next=f,zd(s)):(f.next=V.next,V.next=f),s.interleaved=f;return}}catch{}finally{}a=Rm(r,s,f,d),a!==null&&(f=Xt(),tr(a,r,d,f),Xm(a,s,d))}}function Jm(r){var s=r.alternate;return r===at||s!==null&&s===at}function Ym(r,s){Oa=yu=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function Xm(r,s,a){if(a&4194240){var d=s.lanes;d&=r.pendingLanes,a|=d,s.lanes=a,hi(r,a)}}var Eu={readContext:On,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},gT={readContext:On,useCallback:function(r,s){return vr().memoizedState=[r,s===void 0?null:s],r},useContext:On,useEffect:zm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,vu(4194308,4,Hm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return vu(4194308,4,r,s)},useInsertionEffect:function(r,s){return vu(4,2,r,s)},useMemo:function(r,s){var a=vr();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var d=vr();return s=a!==void 0?a(s):s,d.memoizedState=d.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},d.queue=r,r=r.dispatch=pT.bind(null,at,r),[d.memoizedState,r]},useRef:function(r){var s=vr();return r={current:r},s.memoizedState=r},useState:Fm,useDebugValue:eh,useDeferredValue:function(r){return vr().memoizedState=r},useTransition:function(){var r=Fm(!1),s=r[0];return r=fT.bind(null,r[1]),vr().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var d=at,f=vr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),Pt===null)throw Error(t(349));Ts&30||bm(d,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,zm(Vm.bind(null,d,g,r),[r]),d.flags|=2048,ja(9,jm.bind(null,d,g,a,s),void 0,null),a},useId:function(){var r=vr(),s=Pt.identifierPrefix;if(nt){var a=Br,d=zr;a=(d&~(1<<32-Qt(d)-1)).toString(32)+a,s=":"+s+"R"+a,a=Da++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=hT++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},yT={readContext:On,useCallback:Wm,useContext:On,useEffect:Zd,useImperativeHandle:qm,useInsertionEffect:Bm,useLayoutEffect:$m,useMemo:Km,useReducer:Yd,useRef:Um,useState:function(){return Yd(ba)},useDebugValue:eh,useDeferredValue:function(r){var s=Dn();return Gm(s,Et.memoizedState,r)},useTransition:function(){var r=Yd(ba)[0],s=Dn().memoizedState;return[r,s]},useMutableSource:Om,useSyncExternalStore:Dm,useId:Qm,unstable_isNewReconciler:!1},vT={readContext:On,useCallback:Wm,useContext:On,useEffect:Zd,useImperativeHandle:qm,useInsertionEffect:Bm,useLayoutEffect:$m,useMemo:Km,useReducer:Xd,useRef:Um,useState:function(){return Xd(ba)},useDebugValue:eh,useDeferredValue:function(r){var s=Dn();return Et===null?s.memoizedState=r:Gm(s,Et.memoizedState,r)},useTransition:function(){var r=Xd(ba)[0],s=Dn().memoizedState;return[r,s]},useMutableSource:Om,useSyncExternalStore:Dm,useId:Qm,unstable_isNewReconciler:!1};function Xn(r,s){if(r&&r.defaultProps){s=ae({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function th(r,s,a,d){s=r.memoizedState,a=a(d,s),a=a==null?s:ae({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var wu={isMounted:function(r){return(r=r._reactInternals)?$n(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var d=Xt(),f=Ri(r),g=Hr(d,f);g.payload=s,a!=null&&(g.callback=a),s=Ii(r,g,f),s!==null&&(tr(s,r,f,d),fu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var d=Xt(),f=Ri(r),g=Hr(d,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ii(r,g,f),s!==null&&(tr(s,r,f,d),fu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Xt(),d=Ri(r),f=Hr(a,d);f.tag=2,s!=null&&(f.callback=s),s=Ii(r,f,d),s!==null&&(tr(s,r,d,a),fu(s,r,d))}};function Zm(r,s,a,d,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,w):s.prototype&&s.prototype.isPureReactComponent?!wa(a,d)||!wa(f,g):!0}function eg(r,s,a){var d=!1,f=Ei,g=s.contextType;return typeof g=="object"&&g!==null?g=On(g):(f=on(s)?ys:Ft.current,d=s.contextTypes,g=(d=d!=null)?fo(r,f):Ei),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wu,r.stateNode=s,s._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function tg(r,s,a,d){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,d),s.state!==r&&wu.enqueueReplaceState(s,s.state,null)}function nh(r,s,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},Bd(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=On(g):(g=on(s)?ys:Ft.current,f.context=fo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(th(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&wu.enqueueReplaceState(f,f.state,null),pu(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function wo(r,s){try{var a="",d=s;do a+=Re(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function rh(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function ih(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var _T=typeof WeakMap=="function"?WeakMap:Map;function ng(r,s,a){a=Hr(-1,a),a.tag=3,a.payload={element:null};var d=s.value;return a.callback=function(){Pu||(Pu=!0,_h=d),ih(r,s)},a}function rg(r,s,a){a=Hr(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=s.value;a.payload=function(){return d(f)},a.callback=function(){ih(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){ih(r,s),typeof d!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function ig(r,s,a){var d=r.pingCache;if(d===null){d=r.pingCache=new _T;var f=new Set;d.set(s,f)}else f=d.get(s),f===void 0&&(f=new Set,d.set(s,f));f.has(a)||(f.add(a),r=DT.bind(null,r,s,a),s.then(r,r))}function sg(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function og(r,s,a,d,f){return r.mode&1?(r.flags|=65536,r.lanes=f,r):(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Hr(-1,1),s.tag=2,Ii(a,s,1))),a.lanes|=1),r)}var ET=te.ReactCurrentOwner,an=!1;function Yt(r,s,a,d){s.child=r===null?km(s,null,a,d):yo(s,r.child,a,d)}function ag(r,s,a,d,f){a=a.render;var g=s.ref;return _o(s,f),d=Qd(r,s,a,d,g,f),a=Jd(),r!==null&&!an?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,qr(r,s,f)):(nt&&a&&Od(s),s.flags|=1,Yt(r,s,d,f),s.child)}function lg(r,s,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!kh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,ug(r,s,g,d,f)):(r=bu(a.type,null,d,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!(r.lanes&f)){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:wa,a(w,d)&&r.ref===s.ref)return qr(r,s,f)}return s.flags|=1,r=Ai(g,d),r.ref=s.ref,r.return=s,s.child=r}function ug(r,s,a,d,f){if(r!==null){var g=r.memoizedProps;if(wa(g,d)&&r.ref===s.ref)if(an=!1,s.pendingProps=d=g,(r.lanes&f)!==0)r.flags&131072&&(an=!0);else return s.lanes=r.lanes,qr(r,s,f)}return sh(r,s,a,d,f)}function cg(r,s,a){var d=s.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Io,Tn),Tn|=a;else{if(!(a&1073741824))return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Xe(Io,Tn),Tn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Xe(Io,Tn),Tn|=d}else g!==null?(d=g.baseLanes|a,s.memoizedState=null):d=a,Xe(Io,Tn),Tn|=d;return Yt(r,s,f,a),s.child}function dg(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function sh(r,s,a,d,f){var g=on(a)?ys:Ft.current;return g=fo(s,g),_o(s,f),a=Qd(r,s,a,d,g,f),d=Jd(),r!==null&&!an?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,qr(r,s,f)):(nt&&d&&Od(s),s.flags|=1,Yt(r,s,a,f),s.child)}function hg(r,s,a,d,f){if(on(a)){var g=!0;su(s)}else g=!1;if(_o(s,f),s.stateNode===null)Iu(r,s),eg(s,a,d),nh(s,a,d,f),d=!0;else if(r===null){var w=s.stateNode,O=s.memoizedProps;w.props=O;var V=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=On(q):(q=on(a)?ys:Ft.current,q=fo(s,q));var Z=a.getDerivedStateFromProps,ne=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==d||V!==q)&&tg(s,w,d,q),Ti=!1;var X=s.memoizedState;w.state=X,pu(s,d,w,f),V=s.memoizedState,O!==d||X!==V||sn.current||Ti?(typeof Z=="function"&&(th(s,a,Z,d),V=s.memoizedState),(O=Ti||Zm(s,a,O,d,X,V,q))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=V),w.props=d,w.state=V,w.context=q,d=O):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{w=s.stateNode,Pm(r,s),O=s.memoizedProps,q=s.type===s.elementType?O:Xn(s.type,O),w.props=q,ne=s.pendingProps,X=w.context,V=a.contextType,typeof V=="object"&&V!==null?V=On(V):(V=on(a)?ys:Ft.current,V=fo(s,V));var le=a.getDerivedStateFromProps;(Z=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==ne||X!==V)&&tg(s,w,d,V),Ti=!1,X=s.memoizedState,w.state=X,pu(s,d,w,f);var he=s.memoizedState;O!==ne||X!==he||sn.current||Ti?(typeof le=="function"&&(th(s,a,le,d),he=s.memoizedState),(q=Ti||Zm(s,a,q,d,X,he,V)||!1)?(Z||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,he,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,he,V)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=he),w.props=d,w.state=he,w.context=V,d=q):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&X===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&X===r.memoizedState||(s.flags|=1024),d=!1)}return oh(r,s,a,d,g,f)}function oh(r,s,a,d,f,g){dg(r,s);var w=(s.flags&128)!==0;if(!d&&!w)return f&&ym(s,a,!1),qr(r,s,g);d=s.stateNode,ET.current=s;var O=w&&typeof a.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,r!==null&&w?(s.child=yo(s,r.child,null,g),s.child=yo(s,null,O,g)):Yt(r,s,O,g),s.memoizedState=d.state,f&&ym(s,a,!0),s.child}function fg(r){var s=r.stateNode;s.pendingContext?mm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&mm(r,s.context,!1),$d(r,s.containerInfo)}function pg(r,s,a,d,f){return go(),Vd(f),s.flags|=256,Yt(r,s,a,d),s.child}var ah={dehydrated:null,treeContext:null,retryLane:0};function lh(r){return{baseLanes:r,cachePool:null,transitions:null}}function mg(r,s,a){var d=s.pendingProps,f=ot.current,g=!1,w=(s.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(f&2)!==0),O?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Xe(ot,f&1),r===null)return jd(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(s.mode&1?r.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(w=d.children,r=d.fallback,g?(d=s.mode,g=s.child,w={mode:"hidden",children:w},!(d&1)&&g!==null?(g.childLanes=0,g.pendingProps=w):g=ju(w,d,0,null),r=Rs(r,d,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=lh(a),s.memoizedState=ah,r):uh(s,w));if(f=r.memoizedState,f!==null&&(O=f.dehydrated,O!==null))return wT(r,s,w,d,O,f,a);if(g){g=d.fallback,w=s.mode,f=r.child,O=f.sibling;var V={mode:"hidden",children:d.children};return!(w&1)&&s.child!==f?(d=s.child,d.childLanes=0,d.pendingProps=V,s.deletions=null):(d=Ai(f,V),d.subtreeFlags=f.subtreeFlags&14680064),O!==null?g=Ai(O,g):(g=Rs(g,w,a,null),g.flags|=2),g.return=s,d.return=s,d.sibling=g,s.child=d,d=g,g=s.child,w=r.child.memoizedState,w=w===null?lh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=ah,d}return g=r.child,r=g.sibling,d=Ai(g,{mode:"visible",children:d.children}),!(s.mode&1)&&(d.lanes=a),d.return=s,d.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=d,s.memoizedState=null,d}function uh(r,s){return s=ju({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Tu(r,s,a,d){return d!==null&&Vd(d),yo(s,r.child,null,a),r=uh(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function wT(r,s,a,d,f,g,w){if(a)return s.flags&256?(s.flags&=-257,d=rh(Error(t(422))),Tu(r,s,w,d)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=d.fallback,f=s.mode,d=ju({mode:"visible",children:d.children},f,0,null),g=Rs(g,f,w,null),g.flags|=2,d.return=s,g.return=s,d.sibling=g,s.child=d,s.mode&1&&yo(s,r.child,null,w),s.child.memoizedState=lh(w),s.memoizedState=ah,g);if(!(s.mode&1))return Tu(r,s,w,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var O=d.dgst;return d=O,g=Error(t(419)),d=rh(g,d,void 0),Tu(r,s,w,d)}if(O=(w&r.childLanes)!==0,an||O){if(d=Pt,d!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(d.suspendedLanes|w)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,$r(r,f),tr(d,r,f,-1))}return Ch(),d=rh(Error(t(421))),Tu(r,s,w,d)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=bT.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,wn=vi(f.nextSibling),En=s,nt=!0,Yn=null,r!==null&&(xn[Nn++]=zr,xn[Nn++]=Br,xn[Nn++]=vs,zr=r.id,Br=r.overflow,vs=s),s=uh(s,d.children),s.flags|=4096,s)}function gg(r,s,a){r.lanes|=s;var d=r.alternate;d!==null&&(d.lanes|=s),Ud(r.return,s,a)}function ch(r,s,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function yg(r,s,a){var d=s.pendingProps,f=d.revealOrder,g=d.tail;if(Yt(r,s,d.children,a),d=ot.current,d&2)d=d&1|2,s.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&gg(r,a,s);else if(r.tag===19)gg(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Xe(ot,d),!(s.mode&1))s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&mu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),ch(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&mu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}ch(s,!0,a,null,g);break;case"together":ch(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Iu(r,s){!(s.mode&1)&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function qr(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),Is|=s.lanes,!(a&s.childLanes))return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=Ai(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=Ai(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function TT(r,s,a){switch(s.tag){case 3:fg(s),go();break;case 5:Nm(s);break;case 1:on(s.type)&&su(s);break;case 4:$d(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,f=s.memoizedProps.value;Xe(du,d._currentValue),d._currentValue=f;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Xe(ot,ot.current&1),s.flags|=128,null):a&s.child.childLanes?mg(r,s,a):(Xe(ot,ot.current&1),r=qr(r,s,a),r!==null?r.sibling:null);Xe(ot,ot.current&1);break;case 19:if(d=(a&s.childLanes)!==0,r.flags&128){if(d)return yg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Xe(ot,ot.current),d)break;return null;case 22:case 23:return s.lanes=0,cg(r,s,a)}return qr(r,s,a)}var vg,dh,_g,Eg;vg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},dh=function(){},_g=function(r,s,a,d){var f=r.memoizedProps;if(f!==d){r=s.stateNode,ws(yr.current);var g=null;switch(a){case"input":f=we(r,f),d=we(r,d),g=[];break;case"select":f=ae({},f,{value:void 0}),d=ae({},d,{value:void 0}),g=[];break;case"textarea":f=Nr(r,f),d=Nr(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=nu)}na(a,d);var w;a=null;for(q in f)if(!d.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var O=f[q];for(w in O)O.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in d){var V=d[q];if(O=f!=null?f[q]:void 0,d.hasOwnProperty(q)&&V!==O&&(V!=null||O!=null))if(q==="style")if(O){for(w in O)!O.hasOwnProperty(w)||V&&V.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in V)V.hasOwnProperty(w)&&O[w]!==V[w]&&(a||(a={}),a[w]=V[w])}else a||(g||(g=[]),g.push(q,a)),a=V;else q==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,O=O?O.__html:void 0,V!=null&&O!==V&&(g=g||[]).push(q,V)):q==="children"?typeof V!="string"&&typeof V!="number"||(g=g||[]).push(q,""+V):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(V!=null&&q==="onScroll"&&Ze("scroll",r),g||O===V||(g=[])):(g=g||[]).push(q,V))}a&&(g=g||[]).push("style",a);var q=g;(s.updateQueue=q)&&(s.flags|=4)}},Eg=function(r,s,a,d){a!==d&&(s.flags|=4)};function Va(r,s){if(!nt)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function zt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,s}function IT(r,s,a){var d=s.pendingProps;switch(Dd(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(s),null;case 1:return on(s.type)&&iu(),zt(s),null;case 3:return d=s.stateNode,Eo(),et(sn),et(Ft),Wd(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(uu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Yn!==null&&(Th(Yn),Yn=null))),dh(r,s),zt(s),null;case 5:Hd(s);var f=ws(Na.current);if(a=s.type,r!==null&&s.stateNode!=null)_g(r,s,a,d,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(t(166));return zt(s),null}if(r=ws(yr.current),uu(s)){d=s.stateNode,a=s.type;var g=s.memoizedProps;switch(d[gr]=s,d[ka]=g,r=(s.mode&1)!==0,a){case"dialog":Ze("cancel",d),Ze("close",d);break;case"iframe":case"object":case"embed":Ze("load",d);break;case"video":case"audio":for(f=0;f<Ia.length;f++)Ze(Ia[f],d);break;case"source":Ze("error",d);break;case"img":case"image":case"link":Ze("error",d),Ze("load",d);break;case"details":Ze("toggle",d);break;case"input":be(d,g),Ze("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},Ze("invalid",d);break;case"textarea":lr(d,g),Ze("invalid",d)}na(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var O=g[w];w==="children"?typeof O=="string"?d.textContent!==O&&(g.suppressHydrationWarning!==!0&&tu(d.textContent,O,r),f=["children",O]):typeof O=="number"&&d.textContent!==""+O&&(g.suppressHydrationWarning!==!0&&tu(d.textContent,O,r),f=["children",""+O]):o.hasOwnProperty(w)&&O!=null&&w==="onScroll"&&Ze("scroll",d)}switch(a){case"input":Cn(d),Kt(d,g,!0);break;case"textarea":Cn(d),Yo(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=nu)}d=f,s.updateQueue=d,d!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=yt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=w.createElement(a,{is:d.is}):(r=w.createElement(a),a==="select"&&(w=r,d.multiple?w.multiple=!0:d.size&&(w.size=d.size))):r=w.createElementNS(r,a),r[gr]=s,r[ka]=d,vg(r,s,!1,!1),s.stateNode=r;e:{switch(w=ra(a,d),a){case"dialog":Ze("cancel",r),Ze("close",r),f=d;break;case"iframe":case"object":case"embed":Ze("load",r),f=d;break;case"video":case"audio":for(f=0;f<Ia.length;f++)Ze(Ia[f],r);f=d;break;case"source":Ze("error",r),f=d;break;case"img":case"image":case"link":Ze("error",r),Ze("load",r),f=d;break;case"details":Ze("toggle",r),f=d;break;case"input":be(r,d),f=we(r,d),Ze("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=ae({},d,{value:void 0}),Ze("invalid",r);break;case"textarea":lr(r,d),f=Nr(r,d),Ze("invalid",r);break;default:f=d}na(a,f),O=f;for(g in O)if(O.hasOwnProperty(g)){var V=O[g];g==="style"?ea(r,V):g==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&Xo(r,V)):g==="children"?typeof V=="string"?(a!=="textarea"||V!=="")&&ai(r,V):typeof V=="number"&&ai(r,""+V):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?V!=null&&g==="onScroll"&&Ze("scroll",r):V!=null&&G(r,g,V,w))}switch(a){case"input":Cn(r),Kt(r,d,!1);break;case"textarea":Cn(r),Yo(r);break;case"option":d.value!=null&&r.setAttribute("value",""+Fe(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?tn(r,!!d.multiple,g,!1):d.defaultValue!=null&&tn(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=nu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return zt(s),null;case 6:if(r&&s.stateNode!=null)Eg(r,s,r.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(t(166));if(a=ws(Na.current),ws(yr.current),uu(s)){if(d=s.stateNode,a=s.memoizedProps,d[gr]=s,(g=d.nodeValue!==a)&&(r=En,r!==null))switch(r.tag){case 3:tu(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&tu(d.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[gr]=s,s.stateNode=d}return zt(s),null;case 13:if(et(ot),d=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(nt&&wn!==null&&s.mode&1&&!(s.flags&128))Im(),go(),s.flags|=98560,g=!1;else if(g=uu(s),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[gr]=s}else go(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;zt(s),g=!1}else Yn!==null&&(Th(Yn),Yn=null),g=!0;if(!g)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(s.child.flags|=8192,s.mode&1&&(r===null||ot.current&1?wt===0&&(wt=3):Ch())),s.updateQueue!==null&&(s.flags|=4),zt(s),null);case 4:return Eo(),dh(r,s),r===null&&Sa(s.stateNode.containerInfo),zt(s),null;case 10:return Fd(s.type._context),zt(s),null;case 17:return on(s.type)&&iu(),zt(s),null;case 19:if(et(ot),g=s.memoizedState,g===null)return zt(s),null;if(d=(s.flags&128)!==0,w=g.rendering,w===null)if(d)Va(g,!1);else{if(wt!==0||r!==null&&r.flags&128)for(r=s.child;r!==null;){if(w=mu(r),w!==null){for(s.flags|=128,Va(g,!1),d=w.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=a,a=s.child;a!==null;)g=a,r=d,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Xe(ot,ot.current&1|2),s.child}r=r.sibling}g.tail!==null&&Ye()>So&&(s.flags|=128,d=!0,Va(g,!1),s.lanes=4194304)}else{if(!d)if(r=mu(w),r!==null){if(s.flags|=128,d=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!nt)return zt(s),null}else 2*Ye()-g.renderingStartTime>So&&a!==1073741824&&(s.flags|=128,d=!0,Va(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=Ye(),s.sibling=null,a=ot.current,Xe(ot,d?a&1|2:a&1),s):(zt(s),null);case 22:case 23:return Sh(),d=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(s.flags|=8192),d&&s.mode&1?Tn&1073741824&&(zt(s),s.subtreeFlags&6&&(s.flags|=8192)):zt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function ST(r,s){switch(Dd(s),s.tag){case 1:return on(s.type)&&iu(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return Eo(),et(sn),et(Ft),Wd(),r=s.flags,r&65536&&!(r&128)?(s.flags=r&-65537|128,s):null;case 5:return Hd(s),null;case 13:if(et(ot),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));go()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return et(ot),null;case 4:return Eo(),null;case 10:return Fd(s.type._context),null;case 22:case 23:return Sh(),null;case 24:return null;default:return null}}var Su=!1,Bt=!1,CT=typeof WeakSet=="function"?WeakSet:Set,ce=null;function To(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){ut(r,s,d)}else a.current=null}function hh(r,s,a){try{a()}catch(d){ut(r,s,d)}}var wg=!1;function kT(r,s){if(Sd=mi,r=Zp(),gd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,O=-1,V=-1,q=0,Z=0,ne=r,X=null;t:for(;;){for(var le;ne!==a||f!==0&&ne.nodeType!==3||(O=w+f),ne!==g||d!==0&&ne.nodeType!==3||(V=w+d),ne.nodeType===3&&(w+=ne.nodeValue.length),(le=ne.firstChild)!==null;)X=ne,ne=le;for(;;){if(ne===r)break t;if(X===a&&++q===f&&(O=w),X===g&&++Z===d&&(V=w),(le=ne.nextSibling)!==null)break;ne=X,X=ne.parentNode}ne=le}a=O===-1||V===-1?null:{start:O,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(Cd={focusedElem:r,selectionRange:a},mi=!1,ce=s;ce!==null;)if(s=ce,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ce=r;else for(;ce!==null;){s=ce;try{var he=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(he!==null){var fe=he.memoizedProps,ht=he.memoizedState,$=s.stateNode,M=$.getSnapshotBeforeUpdate(s.elementType===s.type?fe:Xn(s.type,fe),ht);$.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var H=s.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){ut(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,ce=r;break}ce=s.return}return he=wg,wg=!1,he}function La(r,s,a){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&hh(s,a,g)}f=f.next}while(f!==d)}}function Cu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==s)}}function fh(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function Tg(r){var s=r.alternate;s!==null&&(r.alternate=null,Tg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[gr],delete s[ka],delete s[Ad],delete s[lT],delete s[uT])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Ig(r){return r.tag===5||r.tag===3||r.tag===4}function Sg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Ig(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ph(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=nu));else if(d!==4&&(r=r.child,r!==null))for(ph(r,s,a),r=r.sibling;r!==null;)ph(r,s,a),r=r.sibling}function mh(r,s,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(mh(r,s,a),r=r.sibling;r!==null;)mh(r,s,a),r=r.sibling}var Dt=null,Zn=!1;function Si(r,s,a){for(a=a.child;a!==null;)Cg(r,s,a),a=a.sibling}function Cg(r,s,a){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(us,a)}catch{}switch(a.tag){case 5:Bt||To(a,s);case 6:var d=Dt,f=Zn;Dt=null,Si(r,s,a),Dt=d,Zn=f,Dt!==null&&(Zn?(r=Dt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Dt.removeChild(a.stateNode));break;case 18:Dt!==null&&(Zn?(r=Dt,a=a.stateNode,r.nodeType===8?Pd(r.parentNode,a):r.nodeType===1&&Pd(r,a),Gn(r)):Pd(Dt,a.stateNode));break;case 4:d=Dt,f=Zn,Dt=a.stateNode.containerInfo,Zn=!0,Si(r,s,a),Dt=d,Zn=f;break;case 0:case 11:case 14:case 15:if(!Bt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&(g&2||g&4)&&hh(a,s,w),f=f.next}while(f!==d)}Si(r,s,a);break;case 1:if(!Bt&&(To(a,s),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(O){ut(a,s,O)}Si(r,s,a);break;case 21:Si(r,s,a);break;case 22:a.mode&1?(Bt=(d=Bt)||a.memoizedState!==null,Si(r,s,a),Bt=d):Si(r,s,a);break;default:Si(r,s,a)}}function kg(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new CT),s.forEach(function(d){var f=jT.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function er(r,s){var a=s.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,w=s,O=w;e:for(;O!==null;){switch(O.tag){case 5:Dt=O.stateNode,Zn=!1;break e;case 3:Dt=O.stateNode.containerInfo,Zn=!0;break e;case 4:Dt=O.stateNode.containerInfo,Zn=!0;break e}O=O.return}if(Dt===null)throw Error(t(160));Cg(g,w,f),Dt=null,Zn=!1;var V=f.alternate;V!==null&&(V.return=null),f.return=null}catch(q){ut(f,s,q)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Rg(s,r),s=s.sibling}function Rg(r,s){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(er(s,r),_r(r),d&4){try{La(3,r,r.return),Cu(3,r)}catch(fe){ut(r,r.return,fe)}try{La(5,r,r.return)}catch(fe){ut(r,r.return,fe)}}break;case 1:er(s,r),_r(r),d&512&&a!==null&&To(a,a.return);break;case 5:if(er(s,r),_r(r),d&512&&a!==null&&To(a,a.return),r.flags&32){var f=r.stateNode;try{ai(f,"")}catch(fe){ut(r,r.return,fe)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,O=r.type,V=r.updateQueue;if(r.updateQueue=null,V!==null)try{O==="input"&&g.type==="radio"&&g.name!=null&&Ue(f,g),ra(O,w);var q=ra(O,g);for(w=0;w<V.length;w+=2){var Z=V[w],ne=V[w+1];Z==="style"?ea(f,ne):Z==="dangerouslySetInnerHTML"?Xo(f,ne):Z==="children"?ai(f,ne):G(f,Z,ne,q)}switch(O){case"input":st(f,g);break;case"textarea":oi(f,g);break;case"select":var X=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var le=g.value;le!=null?tn(f,!!g.multiple,le,!1):X!==!!g.multiple&&(g.defaultValue!=null?tn(f,!!g.multiple,g.defaultValue,!0):tn(f,!!g.multiple,g.multiple?[]:"",!1))}f[ka]=g}catch(fe){ut(r,r.return,fe)}}break;case 6:if(er(s,r),_r(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(fe){ut(r,r.return,fe)}}break;case 3:if(er(s,r),_r(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{Gn(s.containerInfo)}catch(fe){ut(r,r.return,fe)}break;case 4:er(s,r),_r(r);break;case 13:er(s,r),_r(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(vh=Ye())),d&4&&kg(r);break;case 22:if(Z=a!==null&&a.memoizedState!==null,r.mode&1?(Bt=(q=Bt)||Z,er(s,r),Bt=q):er(s,r),_r(r),d&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!Z&&r.mode&1)for(ce=r,Z=r.child;Z!==null;){for(ne=ce=Z;ce!==null;){switch(X=ce,le=X.child,X.tag){case 0:case 11:case 14:case 15:La(4,X,X.return);break;case 1:To(X,X.return);var he=X.stateNode;if(typeof he.componentWillUnmount=="function"){d=X,a=X.return;try{s=d,he.props=s.memoizedProps,he.state=s.memoizedState,he.componentWillUnmount()}catch(fe){ut(d,a,fe)}}break;case 5:To(X,X.return);break;case 22:if(X.memoizedState!==null){xg(ne);continue}}le!==null?(le.return=X,ce=le):xg(ne)}Z=Z.sibling}e:for(Z=null,ne=r;;){if(ne.tag===5){if(Z===null){Z=ne;try{f=ne.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(O=ne.stateNode,V=ne.memoizedProps.style,w=V!=null&&V.hasOwnProperty("display")?V.display:null,O.style.display=Zo("display",w))}catch(fe){ut(r,r.return,fe)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(fe){ut(r,r.return,fe)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:er(s,r),_r(r),d&4&&kg(r);break;case 21:break;default:er(s,r),_r(r)}}function _r(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(Ig(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(ai(f,""),d.flags&=-33);var g=Sg(r);mh(r,g,f);break;case 3:case 4:var w=d.stateNode.containerInfo,O=Sg(r);ph(r,O,w);break;default:throw Error(t(161))}}catch(V){ut(r,r.return,V)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function RT(r,s,a){ce=r,Pg(r)}function Pg(r,s,a){for(var d=(r.mode&1)!==0;ce!==null;){var f=ce,g=f.child;if(f.tag===22&&d){var w=f.memoizedState!==null||Su;if(!w){var O=f.alternate,V=O!==null&&O.memoizedState!==null||Bt;O=Su;var q=Bt;if(Su=w,(Bt=V)&&!q)for(ce=f;ce!==null;)w=ce,V=w.child,w.tag===22&&w.memoizedState!==null?Ng(f):V!==null?(V.return=w,ce=V):Ng(f);for(;g!==null;)ce=g,Pg(g),g=g.sibling;ce=f,Su=O,Bt=q}Ag(r)}else f.subtreeFlags&8772&&g!==null?(g.return=f,ce=g):Ag(r)}}function Ag(r){for(;ce!==null;){var s=ce;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Bt||Cu(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Bt)if(a===null)d.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Xn(s.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&xm(s,g,d);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}xm(s,w,a)}break;case 5:var O=s.stateNode;if(a===null&&s.flags&4){a=O;var V=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&a.focus();break;case"img":V.src&&(a.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var q=s.alternate;if(q!==null){var Z=q.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&Gn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Bt||s.flags&512&&fh(s)}catch(X){ut(s,s.return,X)}}if(s===r){ce=null;break}if(a=s.sibling,a!==null){a.return=s.return,ce=a;break}ce=s.return}}function xg(r){for(;ce!==null;){var s=ce;if(s===r){ce=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ce=a;break}ce=s.return}}function Ng(r){for(;ce!==null;){var s=ce;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(V){ut(s,a,V)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var f=s.return;try{d.componentDidMount()}catch(V){ut(s,f,V)}}var g=s.return;try{fh(s)}catch(V){ut(s,g,V)}break;case 5:var w=s.return;try{fh(s)}catch(V){ut(s,w,V)}}}catch(V){ut(s,s.return,V)}if(s===r){ce=null;break}var O=s.sibling;if(O!==null){O.return=s.return,ce=O;break}ce=s.return}}var PT=Math.ceil,ku=te.ReactCurrentDispatcher,gh=te.ReactCurrentOwner,bn=te.ReactCurrentBatchConfig,He=0,Pt=null,mt=null,bt=0,Tn=0,Io=_i(0),wt=0,Ma=null,Is=0,Ru=0,yh=0,Fa=null,ln=null,vh=0,So=1/0,Wr=null,Pu=!1,_h=null,Ci=null,Au=!1,ki=null,xu=0,Ua=0,Eh=null,Nu=-1,Ou=0;function Xt(){return He&6?Ye():Nu!==-1?Nu:Nu=Ye()}function Ri(r){return r.mode&1?He&2&&bt!==0?bt&-bt:dT.transition!==null?(Ou===0&&(Ou=ds()),Ou):(r=Le,r!==0||(r=window.event,r=r===void 0?16:pa(r.type)),r):1}function tr(r,s,a,d){if(50<Ua)throw Ua=0,Eh=null,Error(t(185));di(r,a,d),(!(He&2)||r!==Pt)&&(r===Pt&&(!(He&2)&&(Ru|=a),wt===4&&Pi(r,bt)),un(r,d),a===1&&He===0&&!(s.mode&1)&&(So=Ye()+500,ou&&wi()))}function un(r,s){var a=r.callbackNode;br(r,s);var d=cs(r,r===Pt?bt:0);if(d===0)a!==null&&ua(a),r.callbackNode=null,r.callbackPriority=0;else if(s=d&-d,r.callbackPriority!==s){if(a!=null&&ua(a),s===1)r.tag===0?cT(Dg.bind(null,r)):vm(Dg.bind(null,r)),oT(function(){!(He&6)&&wi()}),a=null;else{switch(fi(d)){case 1:a=ls;break;case 4:a=li;break;case 16:a=Rn;break;case 536870912:a=Ol;break;default:a=Rn}a=zg(a,Og.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Og(r,s){if(Nu=-1,Ou=0,He&6)throw Error(t(327));var a=r.callbackNode;if(Co()&&r.callbackNode!==a)return null;var d=cs(r,r===Pt?bt:0);if(d===0)return null;if(d&30||d&r.expiredLanes||s)s=Du(r,d);else{s=d;var f=He;He|=2;var g=jg();(Pt!==r||bt!==s)&&(Wr=null,So=Ye()+500,Cs(r,s));do try{NT();break}catch(O){bg(r,O)}while(!0);Md(),ku.current=g,He=f,mt!==null?s=0:(Pt=null,bt=0,s=wt)}if(s!==0){if(s===2&&(f=yn(r),f!==0&&(d=f,s=wh(r,f))),s===1)throw a=Ma,Cs(r,0),Pi(r,d),un(r,Ye()),a;if(s===6)Pi(r,d);else{if(f=r.current.alternate,!(d&30)&&!AT(f)&&(s=Du(r,d),s===2&&(g=yn(r),g!==0&&(d=g,s=wh(r,g))),s===1))throw a=Ma,Cs(r,0),Pi(r,d),un(r,Ye()),a;switch(r.finishedWork=f,r.finishedLanes=d,s){case 0:case 1:throw Error(t(345));case 2:ks(r,ln,Wr);break;case 3:if(Pi(r,d),(d&130023424)===d&&(s=vh+500-Ye(),10<s)){if(cs(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Xt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Rd(ks.bind(null,r,ln,Wr),s);break}ks(r,ln,Wr);break;case 4:if(Pi(r,d),(d&4194240)===d)break;for(s=r.eventTimes,f=-1;0<d;){var w=31-Qt(d);g=1<<w,w=s[w],w>f&&(f=w),d&=~g}if(d=f,d=Ye()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*PT(d/1960))-d,10<d){r.timeoutHandle=Rd(ks.bind(null,r,ln,Wr),d);break}ks(r,ln,Wr);break;case 5:ks(r,ln,Wr);break;default:throw Error(t(329))}}}return un(r,Ye()),r.callbackNode===a?Og.bind(null,r):null}function wh(r,s){var a=Fa;return r.current.memoizedState.isDehydrated&&(Cs(r,s).flags|=256),r=Du(r,s),r!==2&&(s=ln,ln=a,s!==null&&Th(s)),r}function Th(r){ln===null?ln=r:ln.push.apply(ln,r)}function AT(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Jn(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Pi(r,s){for(s&=~yh,s&=~Ru,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Qt(s),d=1<<a;r[a]=-1,s&=~d}}function Dg(r){if(He&6)throw Error(t(327));Co();var s=cs(r,0);if(!(s&1))return un(r,Ye()),null;var a=Du(r,s);if(r.tag!==0&&a===2){var d=yn(r);d!==0&&(s=d,a=wh(r,d))}if(a===1)throw a=Ma,Cs(r,0),Pi(r,s),un(r,Ye()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,ks(r,ln,Wr),un(r,Ye()),null}function Ih(r,s){var a=He;He|=1;try{return r(s)}finally{He=a,He===0&&(So=Ye()+500,ou&&wi())}}function Ss(r){ki!==null&&ki.tag===0&&!(He&6)&&Co();var s=He;He|=1;var a=bn.transition,d=Le;try{if(bn.transition=null,Le=1,r)return r()}finally{Le=d,bn.transition=a,He=s,!(He&6)&&wi()}}function Sh(){Tn=Io.current,et(Io)}function Cs(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,sT(a)),mt!==null)for(a=mt.return;a!==null;){var d=a;switch(Dd(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&iu();break;case 3:Eo(),et(sn),et(Ft),Wd();break;case 5:Hd(d);break;case 4:Eo();break;case 13:et(ot);break;case 19:et(ot);break;case 10:Fd(d.type._context);break;case 22:case 23:Sh()}a=a.return}if(Pt=r,mt=r=Ai(r.current,null),bt=Tn=s,wt=0,Ma=null,yh=Ru=Is=0,ln=Fa=null,Es!==null){for(s=0;s<Es.length;s++)if(a=Es[s],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,d.next=w}a.pending=d}Es=null}return r}function bg(r,s){do{var a=mt;try{if(Md(),gu.current=Eu,yu){for(var d=at.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}yu=!1}if(Ts=0,Rt=Et=at=null,Oa=!1,Da=0,gh.current=null,a===null||a.return===null){wt=1,Ma=s,mt=null;break}e:{var g=r,w=a.return,O=a,V=s;if(s=bt,O.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var q=V,Z=O,ne=Z.tag;if(!(Z.mode&1)&&(ne===0||ne===11||ne===15)){var X=Z.alternate;X?(Z.updateQueue=X.updateQueue,Z.memoizedState=X.memoizedState,Z.lanes=X.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var le=sg(w);if(le!==null){le.flags&=-257,og(le,w,O,g,s),le.mode&1&&ig(g,q,s),s=le,V=q;var he=s.updateQueue;if(he===null){var fe=new Set;fe.add(V),s.updateQueue=fe}else he.add(V);break e}else{if(!(s&1)){ig(g,q,s),Ch();break e}V=Error(t(426))}}else if(nt&&O.mode&1){var ht=sg(w);if(ht!==null){!(ht.flags&65536)&&(ht.flags|=256),og(ht,w,O,g,s),Vd(wo(V,O));break e}}g=V=wo(V,O),wt!==4&&(wt=2),Fa===null?Fa=[g]:Fa.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var $=ng(g,V,s);Am(g,$);break e;case 1:O=V;var M=g.type,H=g.stateNode;if(!(g.flags&128)&&(typeof M.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(Ci===null||!Ci.has(H)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=rg(g,O,s);Am(g,re);break e}}g=g.return}while(g!==null)}Lg(a)}catch(pe){s=pe,mt===a&&a!==null&&(mt=a=a.return);continue}break}while(!0)}function jg(){var r=ku.current;return ku.current=Eu,r===null?Eu:r}function Ch(){(wt===0||wt===3||wt===2)&&(wt=4),Pt===null||!(Is&268435455)&&!(Ru&268435455)||Pi(Pt,bt)}function Du(r,s){var a=He;He|=2;var d=jg();(Pt!==r||bt!==s)&&(Wr=null,Cs(r,s));do try{xT();break}catch(f){bg(r,f)}while(!0);if(Md(),He=a,ku.current=d,mt!==null)throw Error(t(261));return Pt=null,bt=0,wt}function xT(){for(;mt!==null;)Vg(mt)}function NT(){for(;mt!==null&&!xl();)Vg(mt)}function Vg(r){var s=Ug(r.alternate,r,Tn);r.memoizedProps=r.pendingProps,s===null?Lg(r):mt=s,gh.current=null}function Lg(r){var s=r;do{var a=s.alternate;if(r=s.return,s.flags&32768){if(a=ST(a,s),a!==null){a.flags&=32767,mt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{wt=6,mt=null;return}}else if(a=IT(a,s,Tn),a!==null){mt=a;return}if(s=s.sibling,s!==null){mt=s;return}mt=s=r}while(s!==null);wt===0&&(wt=5)}function ks(r,s,a){var d=Le,f=bn.transition;try{bn.transition=null,Le=1,OT(r,s,a,d)}finally{bn.transition=f,Le=d}return null}function OT(r,s,a,d){do Co();while(ki!==null);if(He&6)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Je(r,g),r===Pt&&(mt=Pt=null,bt=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Au||(Au=!0,zg(Rn,function(){return Co(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=bn.transition,bn.transition=null;var w=Le;Le=1;var O=He;He|=4,gh.current=null,kT(r,a),Rg(a,r),Xw(Cd),mi=!!Sd,Cd=Sd=null,r.current=a,RT(a),ld(),He=O,Le=w,bn.transition=g}else r.current=a;if(Au&&(Au=!1,ki=r,xu=f),g=r.pendingLanes,g===0&&(Ci=null),Dl(a.stateNode),un(r,Ye()),s!==null)for(d=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Pu)throw Pu=!1,r=_h,_h=null,r;return xu&1&&r.tag!==0&&Co(),g=r.pendingLanes,g&1?r===Eh?Ua++:(Ua=0,Eh=r):Ua=0,wi(),null}function Co(){if(ki!==null){var r=fi(xu),s=bn.transition,a=Le;try{if(bn.transition=null,Le=16>r?16:r,ki===null)var d=!1;else{if(r=ki,ki=null,xu=0,He&6)throw Error(t(331));var f=He;for(He|=4,ce=r.current;ce!==null;){var g=ce,w=g.child;if(ce.flags&16){var O=g.deletions;if(O!==null){for(var V=0;V<O.length;V++){var q=O[V];for(ce=q;ce!==null;){var Z=ce;switch(Z.tag){case 0:case 11:case 15:La(8,Z,g)}var ne=Z.child;if(ne!==null)ne.return=Z,ce=ne;else for(;ce!==null;){Z=ce;var X=Z.sibling,le=Z.return;if(Tg(Z),Z===q){ce=null;break}if(X!==null){X.return=le,ce=X;break}ce=le}}}var he=g.alternate;if(he!==null){var fe=he.child;if(fe!==null){he.child=null;do{var ht=fe.sibling;fe.sibling=null,fe=ht}while(fe!==null)}}ce=g}}if(g.subtreeFlags&2064&&w!==null)w.return=g,ce=w;else e:for(;ce!==null;){if(g=ce,g.flags&2048)switch(g.tag){case 0:case 11:case 15:La(9,g,g.return)}var $=g.sibling;if($!==null){$.return=g.return,ce=$;break e}ce=g.return}}var M=r.current;for(ce=M;ce!==null;){w=ce;var H=w.child;if(w.subtreeFlags&2064&&H!==null)H.return=w,ce=H;else e:for(w=M;ce!==null;){if(O=ce,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Cu(9,O)}}catch(pe){ut(O,O.return,pe)}if(O===w){ce=null;break e}var re=O.sibling;if(re!==null){re.return=O.return,ce=re;break e}ce=O.return}}if(He=f,wi(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(us,r)}catch{}d=!0}return d}finally{Le=a,bn.transition=s}}return!1}function Mg(r,s,a){s=wo(a,s),s=ng(r,s,1),r=Ii(r,s,1),s=Xt(),r!==null&&(di(r,1,s),un(r,s))}function ut(r,s,a){if(r.tag===3)Mg(r,r,a);else for(;s!==null;){if(s.tag===3){Mg(s,r,a);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ci===null||!Ci.has(d))){r=wo(a,r),r=rg(s,r,1),s=Ii(s,r,1),r=Xt(),s!==null&&(di(s,1,r),un(s,r));break}}s=s.return}}function DT(r,s,a){var d=r.pingCache;d!==null&&d.delete(s),s=Xt(),r.pingedLanes|=r.suspendedLanes&a,Pt===r&&(bt&a)===a&&(wt===4||wt===3&&(bt&130023424)===bt&&500>Ye()-vh?Cs(r,0):yh|=a),un(r,s)}function Fg(r,s){s===0&&(r.mode&1?(s=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):s=1);var a=Xt();r=$r(r,s),r!==null&&(di(r,s,a),un(r,a))}function bT(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Fg(r,a)}function jT(r,s){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(s),Fg(r,a)}var Ug;Ug=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||sn.current)an=!0;else{if(!(r.lanes&a)&&!(s.flags&128))return an=!1,TT(r,s,a);an=!!(r.flags&131072)}else an=!1,nt&&s.flags&1048576&&_m(s,lu,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Iu(r,s),r=s.pendingProps;var f=fo(s,Ft.current);_o(s,a),f=Qd(null,s,d,r,f,a);var g=Jd();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,on(d)?(g=!0,su(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Bd(s),f.updater=wu,s.stateNode=f,f._reactInternals=s,nh(s,d,r,a),s=oh(null,s,d,!0,g,a)):(s.tag=0,nt&&g&&Od(s),Yt(null,s,f,a),s=s.child),s;case 16:d=s.elementType;e:{switch(Iu(r,s),r=s.pendingProps,f=d._init,d=f(d._payload),s.type=d,f=s.tag=LT(d),r=Xn(d,r),f){case 0:s=sh(null,s,d,r,a);break e;case 1:s=hg(null,s,d,r,a);break e;case 11:s=ag(null,s,d,r,a);break e;case 14:s=lg(null,s,d,Xn(d.type,r),a);break e}throw Error(t(306,d,""))}return s;case 0:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Xn(d,f),sh(r,s,d,f,a);case 1:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Xn(d,f),hg(r,s,d,f,a);case 3:e:{if(fg(s),r===null)throw Error(t(387));d=s.pendingProps,g=s.memoizedState,f=g.element,Pm(r,s),pu(s,d,null,a);var w=s.memoizedState;if(d=w.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=wo(Error(t(423)),s),s=pg(r,s,d,a,f);break e}else if(d!==f){f=wo(Error(t(424)),s),s=pg(r,s,d,a,f);break e}else for(wn=vi(s.stateNode.containerInfo.firstChild),En=s,nt=!0,Yn=null,a=km(s,null,d,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(go(),d===f){s=qr(r,s,a);break e}Yt(r,s,d,a)}s=s.child}return s;case 5:return Nm(s),r===null&&jd(s),d=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,kd(d,f)?w=null:g!==null&&kd(d,g)&&(s.flags|=32),dg(r,s),Yt(r,s,w,a),s.child;case 6:return r===null&&jd(s),null;case 13:return mg(r,s,a);case 4:return $d(s,s.stateNode.containerInfo),d=s.pendingProps,r===null?s.child=yo(s,null,d,a):Yt(r,s,d,a),s.child;case 11:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Xn(d,f),ag(r,s,d,f,a);case 7:return Yt(r,s,s.pendingProps,a),s.child;case 8:return Yt(r,s,s.pendingProps.children,a),s.child;case 12:return Yt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(d=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Xe(du,d._currentValue),d._currentValue=w,g!==null)if(Jn(g.value,w)){if(g.children===f.children&&!sn.current){s=qr(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var O=g.dependencies;if(O!==null){w=g.child;for(var V=O.firstContext;V!==null;){if(V.context===d){if(g.tag===1){V=Hr(-1,a&-a),V.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var Z=q.pending;Z===null?V.next=V:(V.next=Z.next,Z.next=V),q.pending=V}}g.lanes|=a,V=g.alternate,V!==null&&(V.lanes|=a),Ud(g.return,a,s),O.lanes|=a;break}V=V.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,O=w.alternate,O!==null&&(O.lanes|=a),Ud(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Yt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,d=s.pendingProps.children,_o(s,a),f=On(f),d=d(f),s.flags|=1,Yt(r,s,d,a),s.child;case 14:return d=s.type,f=Xn(d,s.pendingProps),f=Xn(d.type,f),lg(r,s,d,f,a);case 15:return ug(r,s,s.type,s.pendingProps,a);case 17:return d=s.type,f=s.pendingProps,f=s.elementType===d?f:Xn(d,f),Iu(r,s),s.tag=1,on(d)?(r=!0,su(s)):r=!1,_o(s,a),eg(s,d,f),nh(s,d,f,a),oh(null,s,d,!0,r,a);case 19:return yg(r,s,a);case 22:return cg(r,s,a)}throw Error(t(156,s.tag))};function zg(r,s){return qs(r,s)}function VT(r,s,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(r,s,a,d){return new VT(r,s,a,d)}function kh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function LT(r){if(typeof r=="function")return kh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===j)return 11;if(r===Ne)return 14}return 2}function Ai(r,s){var a=r.alternate;return a===null?(a=jn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function bu(r,s,a,d,f,g){var w=2;if(d=r,typeof r=="function")kh(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return Rs(a.children,f,g,s);case C:w=8,f|=8;break;case P:return r=jn(12,a,s,f|2),r.elementType=P,r.lanes=g,r;case N:return r=jn(13,a,s,f),r.elementType=N,r.lanes=g,r;case Ae:return r=jn(19,a,s,f),r.elementType=Ae,r.lanes=g,r;case De:return ju(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case k:w=10;break e;case R:w=9;break e;case j:w=11;break e;case Ne:w=14;break e;case Pe:w=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=jn(w,a,s,f),s.elementType=r,s.type=d,s.lanes=g,s}function Rs(r,s,a,d){return r=jn(7,r,d,s),r.lanes=a,r}function ju(r,s,a,d){return r=jn(22,r,d,s),r.elementType=De,r.lanes=a,r.stateNode={isHidden:!1},r}function Rh(r,s,a){return r=jn(6,r,null,s),r.lanes=a,r}function Ph(r,s,a){return s=jn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function MT(r,s,a,d,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ci(0),this.expirationTimes=ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ci(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Ah(r,s,a,d,f,g,w,O,V){return r=new MT(r,s,a,O,V),s===1?(s=1,g===!0&&(s|=8)):s=0,g=jn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bd(g),r}function FT(r,s,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:d==null?null:""+d,children:r,containerInfo:s,implementation:a}}function Bg(r){if(!r)return Ei;r=r._reactInternals;e:{if($n(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(on(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(on(a))return gm(r,a,s)}return s}function $g(r,s,a,d,f,g,w,O,V){return r=Ah(a,d,!0,r,f,g,w,O,V),r.context=Bg(null),a=r.current,d=Xt(),f=Ri(a),g=Hr(d,f),g.callback=s??null,Ii(a,g,f),r.current.lanes=f,di(r,f,d),un(r,d),r}function Vu(r,s,a,d){var f=s.current,g=Xt(),w=Ri(f);return a=Bg(a),s.context===null?s.context=a:s.pendingContext=a,s=Hr(g,w),s.payload={element:r},d=d===void 0?null:d,d!==null&&(s.callback=d),r=Ii(f,s,w),r!==null&&(tr(r,f,w,g),fu(r,f,w)),w}function Lu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Hg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function xh(r,s){Hg(r,s),(r=r.alternate)&&Hg(r,s)}function UT(){return null}var qg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Nh(r){this._internalRoot=r}Mu.prototype.render=Nh.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Vu(r,s,null,null)},Mu.prototype.unmount=Nh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;Ss(function(){Vu(null,r,null,null)}),s[Fr]=null}};function Mu(r){this._internalRoot=r}Mu.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ml();r={blockedOn:null,target:r,priority:s};for(var a=0;a<hr.length&&s!==0&&s<hr[a].priority;a++);hr.splice(a,0,r),a===0&&zl(r)}};function Oh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Fu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Wg(){}function zT(r,s,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var q=Lu(w);g.call(q)}}var w=$g(s,d,r,0,null,!1,!1,"",Wg);return r._reactRootContainer=w,r[Fr]=w.current,Sa(r.nodeType===8?r.parentNode:r),Ss(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var O=d;d=function(){var q=Lu(V);O.call(q)}}var V=Ah(r,0,!1,null,null,!1,!1,"",Wg);return r._reactRootContainer=V,r[Fr]=V.current,Sa(r.nodeType===8?r.parentNode:r),Ss(function(){Vu(s,V,a,d)}),V}function Uu(r,s,a,d,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var O=f;f=function(){var V=Lu(w);O.call(V)}}Vu(s,w,r,f)}else w=zT(a,s,r,f,d);return Lu(w)}Vl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=ui(s.pendingLanes);a!==0&&(hi(s,a|1),un(s,Ye()),!(He&6)&&(So=Ye()+500,wi()))}break;case 13:Ss(function(){var d=$r(r,1);if(d!==null){var f=Xt();tr(d,r,1,f)}}),xh(r,1)}},Gs=function(r){if(r.tag===13){var s=$r(r,134217728);if(s!==null){var a=Xt();tr(s,r,134217728,a)}xh(r,134217728)}},Ll=function(r){if(r.tag===13){var s=Ri(r),a=$r(r,s);if(a!==null){var d=Xt();tr(a,r,s,d)}xh(r,s)}},Ml=function(){return Le},Fl=function(r,s){var a=Le;try{return Le=r,s()}finally{Le=a}},Fs=function(r,s,a){switch(s){case"input":if(st(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var d=a[s];if(d!==r&&d.form===r.form){var f=ru(d);if(!f)throw Error(t(90));xr(d),st(d,f)}}}break;case"textarea":oi(r,a);break;case"select":s=a.value,s!=null&&tn(r,!!a.multiple,s,!1)}},is=Ih,sa=Ss;var BT={usingClientEntryPoint:!1,Events:[Ra,co,ru,cr,ia,Ih]},za={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$T={bundleType:za.bundleType,version:za.version,rendererPackageName:za.rendererPackageName,rendererConfig:za.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:te.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=la(r),r===null?null:r.stateNode},findFiberByHostInstance:za.findFiberByHostInstance||UT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{us=zu.inject($T),gn=zu}catch{}}return cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BT,cn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Oh(s))throw Error(t(200));return FT(r,s,null,a)},cn.createRoot=function(r,s){if(!Oh(r))throw Error(t(299));var a=!1,d="",f=qg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=Ah(r,1,!1,null,null,a,!1,d,f),r[Fr]=s.current,Sa(r.nodeType===8?r.parentNode:r),new Nh(s)},cn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=la(s),r=r===null?null:r.stateNode,r},cn.flushSync=function(r){return Ss(r)},cn.hydrate=function(r,s,a){if(!Fu(s))throw Error(t(200));return Uu(null,r,s,!0,a)},cn.hydrateRoot=function(r,s,a){if(!Oh(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",w=qg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=$g(s,null,r,1,a??null,f,!1,g,w),r[Fr]=s.current,Sa(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new Mu(s)},cn.render=function(r,s,a){if(!Fu(s))throw Error(t(200));return Uu(null,r,s,!1,a)},cn.unmountComponentAtNode=function(r){if(!Fu(r))throw Error(t(40));return r._reactRootContainer?(Ss(function(){Uu(null,null,r,!1,function(){r._reactRootContainer=null,r[Fr]=null})}),!0):!1},cn.unstable_batchedUpdates=Ih,cn.unstable_renderSubtreeIntoContainer=function(r,s,a,d){if(!Fu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Uu(r,s,a,!1,d)},cn.version="18.3.1-next-f1338f8080-20240426",cn}var ey;function YT(){if(ey)return jh.exports;ey=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jh.exports=JT(),jh.exports}var ty;function XT(){if(ty)return Bu;ty=1;var n=YT();return Bu.createRoot=n.createRoot,Bu.hydrateRoot=n.hydrateRoot,Bu}var ZT=XT(),$a={},ny;function eI(){if(ny)return $a;ny=1,Object.defineProperty($a,"__esModule",{value:!0}),$a.parse=c,$a.serialize=y;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function c(S,A){const b=new l,L=S.length;if(L<2)return b;const D=(A==null?void 0:A.decode)||E;let F=0;do{const Q=S.indexOf("=",F);if(Q===-1)break;const G=S.indexOf(";",F),te=G===-1?L:G;if(Q>te){F=S.lastIndexOf(";",Q-1)+1;continue}const K=h(S,F,Q),ie=p(S,Q,K),x=S.slice(K,ie);if(b[x]===void 0){let C=h(S,Q+1,te),P=p(S,te,C);const k=D(S.slice(C,P));b[x]=k}F=te+1}while(F<L);return b}function h(S,A,b){do{const L=S.charCodeAt(A);if(L!==32&&L!==9)return A}while(++A<b);return b}function p(S,A,b){for(;A>b;){const L=S.charCodeAt(--A);if(L!==32&&L!==9)return A+1}return b}function y(S,A,b){const L=(b==null?void 0:b.encode)||encodeURIComponent;if(!n.test(S))throw new TypeError(`argument name is invalid: ${S}`);const D=L(A);if(!e.test(D))throw new TypeError(`argument val is invalid: ${A}`);let F=S+"="+D;if(!b)return F;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);F+="; Max-Age="+b.maxAge}if(b.domain){if(!t.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);F+="; Domain="+b.domain}if(b.path){if(!i.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);F+="; Path="+b.path}if(b.expires){if(!T(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);F+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(F+="; HttpOnly"),b.secure&&(F+="; Secure"),b.partitioned&&(F+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":F+="; Priority=Low";break;case"medium":F+="; Priority=Medium";break;case"high":F+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":F+="; SameSite=Strict";break;case"lax":F+="; SameSite=Lax";break;case"none":F+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return F}function E(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function T(S){return o.call(S)==="[object Date]"}return $a}eI();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ry="popstate";function tI(n={}){function e(i,o){let{pathname:l,search:c,hash:h}=i.location;return rf("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:rl(o)}return rI(e,t,null,n)}function it(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ir(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function nI(){return Math.random().toString(36).substring(2,10)}function iy(n,e){return{usr:n.state,key:n.key,idx:e}}function rf(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?$o(e):e,state:t,key:e&&e.key||i||nI()}}function rl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function $o(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function rI(n,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,h="POP",p=null,y=E();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function E(){return(c.state||{idx:null}).idx}function T(){h="POP";let D=E(),F=D==null?null:D-y;y=D,p&&p({action:h,location:L.location,delta:F})}function S(D,F){h="PUSH";let Q=rf(L.location,D,F);y=E()+1;let G=iy(Q,y),te=L.createHref(Q);try{c.pushState(G,"",te)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(te)}l&&p&&p({action:h,location:L.location,delta:1})}function A(D,F){h="REPLACE";let Q=rf(L.location,D,F);y=E();let G=iy(Q,y),te=L.createHref(Q);c.replaceState(G,"",te),l&&p&&p({action:h,location:L.location,delta:0})}function b(D){let F=o.location.origin!=="null"?o.location.origin:o.location.href,Q=typeof D=="string"?D:rl(D);return Q=Q.replace(/ $/,"%20"),it(F,`No window.location.(origin|href) available to create URL for href: ${Q}`),new URL(Q,F)}let L={get action(){return h},get location(){return n(o,c)},listen(D){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(ry,T),p=D,()=>{o.removeEventListener(ry,T),p=null}},createHref(D){return e(o,D)},createURL:b,encodeLocation(D){let F=b(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:S,replace:A,go(D){return c.go(D)}};return L}function Jv(n,e,t="/"){return iI(n,e,t,!1)}function iI(n,e,t,i){let o=typeof e=="string"?$o(e):e,l=Bi(o.pathname||"/",t);if(l==null)return null;let c=Yv(n);sI(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=gI(l);h=pI(c[p],y,i)}return h}function Yv(n,e=[],t=[],i=""){let o=(l,c,h)=>{let p={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(it(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let y=Yr([i,p.relativePath]),E=t.concat(p);l.children&&l.children.length>0&&(it(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Yv(l.children,e,E,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:hI(y,l.index),routesMeta:E})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of Xv(l.path))o(l,c,p)}),e}function Xv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=Xv(i.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function sI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var oI=/^:[\w-]+$/,aI=3,lI=2,uI=1,cI=10,dI=-2,sy=n=>n==="*";function hI(n,e){let t=n.split("/"),i=t.length;return t.some(sy)&&(i+=dI),e&&(i+=lI),t.filter(o=>!sy(o)).reduce((o,l)=>o+(oI.test(l)?aI:l===""?uI:cI),i)}function fI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function pI(n,e,t=!1){let{routesMeta:i}=n,o={},l="/",c=[];for(let h=0;h<i.length;++h){let p=i[h],y=h===i.length-1,E=l==="/"?e:e.slice(l.length)||"/",T=uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},E),S=p.route;if(!T&&y&&t&&!i[i.length-1].route.index&&(T=uc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:Yr([l,T.pathname]),pathnameBase:EI(Yr([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=Yr([l,T.pathnameBase]))}return c}function uc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=mI(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((y,{paramName:E,isOptional:T},S)=>{if(E==="*"){let b=h[S]||"";c=l.slice(0,l.length-b.length).replace(/(.)\/+$/,"$1")}const A=h[S];return T&&!A?y[E]=void 0:y[E]=(A||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function mI(n,e=!1,t=!0){ir(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(i.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function gI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Bi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function yI(n,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?$o(n):n;return{pathname:t?t.startsWith("/")?t:vI(t,e):e,search:wI(i),hash:TI(o)}}function vI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Mh(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _I(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Lf(n){let e=_I(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function Mf(n,e,t,i=!1){let o;typeof n=="string"?o=$o(n):(o={...n},it(!o.pathname||!o.pathname.includes("?"),Mh("?","pathname","search",o)),it(!o.pathname||!o.pathname.includes("#"),Mh("#","pathname","hash",o)),it(!o.search||!o.search.includes("#"),Mh("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}h=T>=0?e[T]:"/"}let p=yI(o,h),y=c&&c!=="/"&&c.endsWith("/"),E=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||E)&&(p.pathname+="/"),p}var Yr=n=>n.join("/").replace(/\/\/+/g,"/"),EI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),wI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,TI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function II(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Zv=["POST","PUT","PATCH","DELETE"];new Set(Zv);var SI=["GET",...Zv];new Set(SI);var Ho=U.createContext(null);Ho.displayName="DataRouter";var Dc=U.createContext(null);Dc.displayName="DataRouterState";var e_=U.createContext({isTransitioning:!1});e_.displayName="ViewTransition";var CI=U.createContext(new Map);CI.displayName="Fetchers";var kI=U.createContext(null);kI.displayName="Await";var or=U.createContext(null);or.displayName="Navigation";var ml=U.createContext(null);ml.displayName="Location";var ar=U.createContext({outlet:null,matches:[],isDataRoute:!1});ar.displayName="Route";var Ff=U.createContext(null);Ff.displayName="RouteError";function RI(n,{relative:e}={}){it(qo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=U.useContext(or),{hash:o,pathname:l,search:c}=gl(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Yr([t,l])),i.createHref({pathname:h,search:c,hash:o})}function qo(){return U.useContext(ml)!=null}function Yi(){return it(qo(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(ml).location}var t_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function n_(n){U.useContext(or).static||U.useLayoutEffect(n)}function Mn(){let{isDataRoute:n}=U.useContext(ar);return n?UI():PI()}function PI(){it(qo(),"useNavigate() may be used only in the context of a <Router> component.");let n=U.useContext(Ho),{basename:e,navigator:t}=U.useContext(or),{matches:i}=U.useContext(ar),{pathname:o}=Yi(),l=JSON.stringify(Lf(i)),c=U.useRef(!1);return n_(()=>{c.current=!0}),U.useCallback((p,y={})=>{if(ir(c.current,t_),!c.current)return;if(typeof p=="number"){t.go(p);return}let E=Mf(p,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Yr([e,E.pathname])),(y.replace?t.replace:t.push)(E,y.state,y)},[e,t,l,o,n])}U.createContext(null);function r_(){let{matches:n}=U.useContext(ar),e=n[n.length-1];return e?e.params:{}}function gl(n,{relative:e}={}){let{matches:t}=U.useContext(ar),{pathname:i}=Yi(),o=JSON.stringify(Lf(t));return U.useMemo(()=>Mf(n,JSON.parse(o),i,e==="path"),[n,o,i,e])}function AI(n,e){return i_(n,e)}function i_(n,e,t,i){var Q;it(qo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o,static:l}=U.useContext(or),{matches:c}=U.useContext(ar),h=c[c.length-1],p=h?h.params:{},y=h?h.pathname:"/",E=h?h.pathnameBase:"/",T=h&&h.route;{let G=T&&T.path||"";s_(y,!T||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let S=Yi(),A;if(e){let G=typeof e=="string"?$o(e):e;it(E==="/"||((Q=G.pathname)==null?void 0:Q.startsWith(E)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${E}" but pathname "${G.pathname}" was given in the \`location\` prop.`),A=G}else A=S;let b=A.pathname||"/",L=b;if(E!=="/"){let G=E.replace(/^\//,"").split("/");L="/"+b.replace(/^\//,"").split("/").slice(G.length).join("/")}let D=!l&&t&&t.matches&&t.matches.length>0?t.matches:Jv(n,{pathname:L});ir(T||D!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),ir(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let F=bI(D&&D.map(G=>Object.assign({},G,{params:Object.assign({},p,G.params),pathname:Yr([E,o.encodeLocation?o.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?E:Yr([E,o.encodeLocation?o.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),c,t,i);return e&&F?U.createElement(ml.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},F):F}function xI(){let n=FI(),e=II(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:l},"ErrorBoundary")," or"," ",U.createElement("code",{style:l},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),t?U.createElement("pre",{style:o},t):null,c)}var NI=U.createElement(xI,null),OI=class extends U.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?U.createElement(ar.Provider,{value:this.props.routeContext},U.createElement(Ff.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function DI({routeContext:n,match:e,children:t}){let i=U.useContext(Ho);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),U.createElement(ar.Provider,{value:n},t)}function bI(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);it(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let c=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(h=p),y.route.id){let{loaderData:E,errors:T}=t,S=y.route.loader&&!E.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||S){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}return o.reduceRight((p,y,E)=>{let T,S=!1,A=null,b=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,A=y.route.errorElement||NI,c&&(h<0&&E===0?(s_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,b=null):h===E&&(S=!0,b=y.route.hydrateFallbackElement||null)));let L=e.concat(o.slice(0,E+1)),D=()=>{let F;return T?F=A:S?F=b:y.route.Component?F=U.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=p,U.createElement(DI,{match:y,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:F})};return t&&(y.route.ErrorBoundary||y.route.errorElement||E===0)?U.createElement(OI,{location:t.location,revalidation:t.revalidation,component:A,error:T,children:D(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):D()},null)}function Uf(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jI(n){let e=U.useContext(Ho);return it(e,Uf(n)),e}function VI(n){let e=U.useContext(Dc);return it(e,Uf(n)),e}function LI(n){let e=U.useContext(ar);return it(e,Uf(n)),e}function zf(n){let e=LI(n),t=e.matches[e.matches.length-1];return it(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MI(){return zf("useRouteId")}function FI(){var i;let n=U.useContext(Ff),e=VI("useRouteError"),t=zf("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function UI(){let{router:n}=jI("useNavigate"),e=zf("useNavigate"),t=U.useRef(!1);return n_(()=>{t.current=!0}),U.useCallback(async(o,l={})=>{ir(t.current,t_),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var oy={};function s_(n,e,t){!e&&!oy[n]&&(oy[n]=!0,ir(!1,t))}U.memo(zI);function zI({routes:n,future:e,state:t}){return i_(n,void 0,t,e)}function BI({to:n,replace:e,state:t,relative:i}){it(qo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=U.useContext(or);ir(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=U.useContext(ar),{pathname:c}=Yi(),h=Mn(),p=Mf(n,Lf(l),c,i==="path"),y=JSON.stringify(p);return U.useEffect(()=>{h(JSON.parse(y),{replace:e,state:t,relative:i})},[h,y,i,e,t]),null}function Vn(n){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $I({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){it(!qo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=U.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=$o(t));let{pathname:p="/",search:y="",hash:E="",state:T=null,key:S="default"}=t,A=U.useMemo(()=>{let b=Bi(p,c);return b==null?null:{location:{pathname:b,search:y,hash:E,state:T,key:S},navigationType:i}},[c,p,y,E,T,S,i]);return ir(A!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:U.createElement(or.Provider,{value:h},U.createElement(ml.Provider,{children:e,value:A}))}function HI({children:n,location:e}){return AI(sf(n),e)}function sf(n,e=[]){let t=[];return U.Children.forEach(n,(i,o)=>{if(!U.isValidElement(i))return;let l=[...e,o];if(i.type===U.Fragment){t.push.apply(t,sf(i.props.children,l));return}it(i.type===Vn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=sf(i.props.children,l)),t.push(c)}),t}var Yu="get",Xu="application/x-www-form-urlencoded";function bc(n){return n!=null&&typeof n.tagName=="string"}function qI(n){return bc(n)&&n.tagName.toLowerCase()==="button"}function WI(n){return bc(n)&&n.tagName.toLowerCase()==="form"}function KI(n){return bc(n)&&n.tagName.toLowerCase()==="input"}function GI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function QI(n,e){return n.button===0&&(!e||e==="_self")&&!GI(n)}var $u=null;function JI(){if($u===null)try{new FormData(document.createElement("form"),0),$u=!1}catch{$u=!0}return $u}var YI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fh(n){return n!=null&&!YI.has(n)?(ir(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xu}"`),null):n}function XI(n,e){let t,i,o,l,c;if(WI(n)){let h=n.getAttribute("action");i=h?Bi(h,e):null,t=n.getAttribute("method")||Yu,o=Fh(n.getAttribute("enctype"))||Xu,l=new FormData(n)}else if(qI(n)||KI(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(i=p?Bi(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||Yu,o=Fh(n.getAttribute("formenctype"))||Fh(h.getAttribute("enctype"))||Xu,l=new FormData(h,n),!JI()){let{name:y,type:E,value:T}=n;if(E==="image"){let S=y?`${y}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else y&&l.append(y,T)}}else{if(bc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Yu,i=null,o=Xu,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:c}}function Bf(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function ZI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eS(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function tS(n,e,t){let i=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await ZI(l,t);return c.links?c.links():[]}return[]}));return sS(i.flat(1).filter(eS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function ay(n,e,t,i,o,l){let c=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,h=(p,y)=>{var E;return t[y].pathname!==p.pathname||((E=t[y].route.path)==null?void 0:E.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>c(p,y)||h(p,y)):l==="data"?e.filter((p,y)=>{var T;let E=i.routes[p.route.id];if(!E||!E.hasLoader)return!1;if(c(p,y)||h(p,y))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function nS(n,e){return rS(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let o=[i.module];return i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function rS(n){return[...new Set(n)]}function iS(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function sS(n,e){let t=new Set;return new Set(e),n.reduce((i,o)=>{let l=JSON.stringify(iS(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function oS(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function aS(){let n=U.useContext(Ho);return Bf(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function lS(){let n=U.useContext(Dc);return Bf(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $f=U.createContext(void 0);$f.displayName="FrameworkContext";function o_(){let n=U.useContext($f);return Bf(n,"You must render this element inside a <HydratedRouter> element"),n}function uS(n,e){let t=U.useContext($f),[i,o]=U.useState(!1),[l,c]=U.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:y,onMouseLeave:E,onTouchStart:T}=e,S=U.useRef(null);U.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let L=F=>{F.forEach(Q=>{c(Q.isIntersecting)})},D=new IntersectionObserver(L,{threshold:.5});return S.current&&D.observe(S.current),()=>{D.disconnect()}}},[n]),U.useEffect(()=>{if(i){let L=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(L)}}},[i]);let A=()=>{o(!0)},b=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:Ha(h,A),onBlur:Ha(p,b),onMouseEnter:Ha(y,A),onMouseLeave:Ha(E,b),onTouchStart:Ha(T,A)}]:[!1,S,{}]}function Ha(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function cS({page:n,...e}){let{router:t}=aS(),i=U.useMemo(()=>Jv(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?U.createElement(hS,{page:n,matches:i,...e}):null}function dS(n){let{manifest:e,routeModules:t}=o_(),[i,o]=U.useState([]);return U.useEffect(()=>{let l=!1;return tS(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),i}function hS({page:n,matches:e,...t}){let i=Yi(),{manifest:o,routeModules:l}=o_(),{loaderData:c,matches:h}=lS(),p=U.useMemo(()=>ay(n,e,h,o,i,"data"),[n,e,h,o,i]),y=U.useMemo(()=>ay(n,e,h,o,i,"assets"),[n,e,h,o,i]),E=U.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let A=new Set,b=!1;if(e.forEach(D=>{var Q;let F=o.routes[D.route.id];!F||!F.hasLoader||(!p.some(G=>G.route.id===D.route.id)&&D.route.id in c&&((Q=l[D.route.id])!=null&&Q.shouldRevalidate)||F.hasClientLoader?b=!0:A.add(D.route.id))}),A.size===0)return[];let L=oS(n);return b&&A.size>0&&L.searchParams.set("_routes",e.filter(D=>A.has(D.route.id)).map(D=>D.route.id).join(",")),[L.pathname+L.search]},[c,i,o,p,e,n,l]),T=U.useMemo(()=>nS(y,o),[y,o]),S=dS(y);return U.createElement(U.Fragment,null,E.map(A=>U.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),T.map(A=>U.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),S.map(({key:A,link:b})=>U.createElement("link",{key:A,...b})))}function fS(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var a_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{a_&&(window.__reactRouterVersion="7.1.5")}catch{}function pS({basename:n,children:e,window:t}){let i=U.useRef();i.current==null&&(i.current=tI({window:t,v5Compat:!0}));let o=i.current,[l,c]=U.useState({action:o.action,location:o.location}),h=U.useCallback(p=>{U.startTransition(()=>c(p))},[c]);return U.useLayoutEffect(()=>o.listen(h),[o,h]),U.createElement($I,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var l_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,u_=U.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:E,viewTransition:T,...S},A){let{basename:b}=U.useContext(or),L=typeof y=="string"&&l_.test(y),D,F=!1;if(typeof y=="string"&&L&&(D=y,a_))try{let P=new URL(window.location.href),k=y.startsWith("//")?new URL(P.protocol+y):new URL(y),R=Bi(k.pathname,b);k.origin===P.origin&&R!=null?y=R+k.search+k.hash:F=!0}catch{ir(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Q=RI(y,{relative:o}),[G,te,K]=uS(i,S),ie=vS(y,{replace:c,state:h,target:p,preventScrollReset:E,relative:o,viewTransition:T});function x(P){e&&e(P),P.defaultPrevented||ie(P)}let C=U.createElement("a",{...S,...K,href:D||Q,onClick:F||l?e:x,ref:fS(A,te),target:p,"data-discover":!L&&t==="render"?"true":void 0});return G&&!L?U.createElement(U.Fragment,null,C,U.createElement(cS,{page:Q})):C});u_.displayName="Link";var mS=U.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...y},E){let T=gl(c,{relative:y.relative}),S=Yi(),A=U.useContext(Dc),{navigator:b,basename:L}=U.useContext(or),D=A!=null&&IS(T)&&h===!0,F=b.encodeLocation?b.encodeLocation(T).pathname:T.pathname,Q=S.pathname,G=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),G=G?G.toLowerCase():null,F=F.toLowerCase()),G&&L&&(G=Bi(G,L)||G);const te=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let K=Q===F||!o&&Q.startsWith(F)&&Q.charAt(te)==="/",ie=G!=null&&(G===F||!o&&G.startsWith(F)&&G.charAt(F.length)==="/"),x={isActive:K,isPending:ie,isTransitioning:D},C=K?e:void 0,P;typeof i=="function"?P=i(x):P=[i,K?"active":null,ie?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let k=typeof l=="function"?l(x):l;return U.createElement(u_,{...y,"aria-current":C,className:P,ref:E,style:k,to:c,viewTransition:h},typeof p=="function"?p(x):p)});mS.displayName="NavLink";var gS=U.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:c=Yu,action:h,onSubmit:p,relative:y,preventScrollReset:E,viewTransition:T,...S},A)=>{let b=wS(),L=TS(h,{relative:y}),D=c.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&l_.test(h),Q=G=>{if(p&&p(G),G.defaultPrevented)return;G.preventDefault();let te=G.nativeEvent.submitter,K=(te==null?void 0:te.getAttribute("formmethod"))||c;b(te||G.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:o,state:l,relative:y,preventScrollReset:E,viewTransition:T})};return U.createElement("form",{ref:A,method:D,action:L,onSubmit:i?p:Q,...S,"data-discover":!F&&n==="render"?"true":void 0})});gS.displayName="Form";function yS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function c_(n){let e=U.useContext(Ho);return it(e,yS(n)),e}function vS(n,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:c}={}){let h=Mn(),p=Yi(),y=gl(n,{relative:l});return U.useCallback(E=>{if(QI(E,e)){E.preventDefault();let T=t!==void 0?t:rl(p)===rl(y);h(n,{replace:T,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[p,h,y,t,i,e,n,o,l,c])}var _S=0,ES=()=>`__${String(++_S)}__`;function wS(){let{router:n}=c_("useSubmit"),{basename:e}=U.useContext(or),t=MI();return U.useCallback(async(i,o={})=>{let{action:l,method:c,encType:h,formData:p,body:y}=XI(i,e);if(o.navigate===!1){let E=o.fetcherKey||ES();await n.fetch(E,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function TS(n,{relative:e}={}){let{basename:t}=U.useContext(or),i=U.useContext(ar);it(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...gl(n||".",{relative:e})},c=Yi();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(E=>E==="")){h.delete("index"),p.filter(T=>T).forEach(T=>h.append("index",T));let E=h.toString();l.search=E?`?${E}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Yr([t,l.pathname])),rl(l)}function IS(n,e={}){let t=U.useContext(e_);it(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=c_("useViewTransitionState"),o=gl(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Bi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Bi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return uc(o.pathname,c)!=null||uc(o.pathname,l)!=null}new TextEncoder;const Pr="/assets/logga-DSUrHbO8.png",SS=()=>{const n=Mn(),e=()=>{n("/register")},t=()=>{n("/login")};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img"})}),v.jsx("div",{className:"DivforRubrik",children:v.jsxs("h1",{className:"Rubriktext",children:[v.jsx("span",{className:"firstPart",children:"Find your"}),v.jsx("span",{className:"secondPart",children:"true"}),v.jsx("span",{className:"firstPart",children:" match"})]})}),v.jsxs("div",{className:"btncontainer",children:[v.jsx("button",{className:"accountBtn",onClick:t,children:" Logga in "}),v.jsx("button",{className:"accountBtn",onClick:e,children:" Registrera dig "})]}),v.jsx("div",{className:"frontpagetextDiv",children:v.jsx("h2",{className:"welcometexttopage",children:"Vi hjlper dig att hitta kta frbindelser baserat p knslor och gemensamma vrderingar, utan att dma utifrn yttre faktorer. ppna ditt hjrta och lt knslorna leda dig till din sanna match. Hitta din drm partner hr!"})})]})},ly=(n,e)=>{let t={};if(n>=1){if(e.firstName||(t.firstName="Frnamn r obligatoriskt."),e.password?/^(?=.*[A-Z])(?=.*\d|[^a-zA-Z\d]).{8,}$/.test(e.password)||(t.password="Lsenordet mste vara minst 8 tecken lngt, innehlla minst en stor bokstav och ett nummer eller specialtecken."):t.password="Lsenord r obligatoriskt.",!e.age||!e.age.month||!e.age.day||!e.age.year)t.age="lder mste anges.";else{const{month:i,day:o,year:l}=e.age,c=new Date(l,i-1,o),h=new Date;let p=h.getFullYear()-c.getFullYear();const y=h.getMonth()-c.getMonth();(y<0||y===0&&h.getDate()<c.getDate())&&p--,p<18&&(t.age="lder mste vara minst 18.")}e.age.year&&(e.age.year.length!==4||isNaN(Number(e.age.year)))&&(t.year="ret mste vara ett giltigt fyra-siffrigt tal."),e.city||(t.city="Stad r obligatoriskt."),e.email||(t.email="Epost r obligatoriskt")}return n>=2&&(e.gender||(t.gender="Kn r obligatoriskt."),e.sexualOrientation||(t.sexualOrientation="Sexuell lggning r obligatoriskt.")),n>=3&&(e.religion||(t.religion="Religion r obligatoriskt."),e.interests.length<5&&(t.interests="Vlj fem intressen.")),n>=4&&(e.hasChildren===void 0&&(t.hasChildren="Du mste svara p om du har barn."),e.wantsChildren===void 0&&(t.wantsChildren="Du mste svara p om du vill ha barn."),e.smokes===void 0&&(t.smokes="Du mste svara p om du rker.")),n>=5&&(e.relationshipStatus||(t.relationshipStatus="Vad sker du? r obligatoriskt."),e.education||(t.education="Utbildningsniv r obligatoriskt.")),n>=6&&(e.favoriteSong||(t.favoriteSong="Favorit lt r obligatoriskt."),e.favoriteMovie||(t.favoriteMovie="Favorit film r obligatoriskt.")),t},CS=["Sport","Musik","Lsa","Resor","Matlagning","Fotboll","Basket","Film","Teater","Djur","Natur","Trning","Mlning","Skulptur","Spel","Teknik","Politik","Historia","Fotografi","Mode","Mat","Vin","Yoga","Poesi","Podcast","Hlsa","Filosofi","Jakt","Fiska","Bilar","Kaffe","Trna","Hundar","katter","Xbox","Pc","playstation","Vr","Sjunga","Vnner","Youtube","Sociala aktiviteter","Baka","Tennis"],kS=({onClose:n,onAccept:e})=>v.jsx(v.Fragment,{children:v.jsxs("div",{className:"policy-container",children:[v.jsx("button",{className:"close-button",onClick:n,children:"  "}),v.jsx("p",{className:"policy-intro",children:"Anvndarvillkor fr TrueBlind Vlkommen till TrueBlind! Fr att anvnda vr tjnst och hitta potentiella partners, mste du godknna fljande anvndarvillkor."}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"1. ldersgrns"}),v.jsx("p",{className:"policy-text",children:"Fr att anvnda TrueBlind mste du vara minst 18 r gammal. Om du inte uppfyller lderskravet kommer ditt konto att stngas av omedelbart."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"2. Anvndning av appen"}),v.jsx("p",{className:"policy-text",children:"Denna app r avsedd fr personer som sker serisa partners. Vi tillhandahller en plattform fr att matcha med andra mnniskor baserat p intressen, preferenser och vrderingar. Du frbinder dig att anvnda appen p ett respektfullt och ansvarsfullt stt."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"3. Frbjudet innehll"}),v.jsx("p",{className:"policy-text",children:"Vi tolererar inte innehll som r sexuellt explicit, diskriminerande eller p ngot stt olmpligt. Innehll som bryter mot vra riktlinjer kommer att leda till avstngning eller permanent borttagning frn appen. Mobbning, trakasserier eller annat skadligt beteende r inte tilltet."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"4. Ingen hantering av bilder"}),v.jsx("p",{className:"policy-text",children:"Vi hjlper dig att hitta kta frbindelser baserat p knslor och gemensamma vrderingar, utan att dma utifrn yttre faktorer. Drfr hanterar vi inga bilder p vr plattform. Vi uppmuntrar dig att ppna ditt hjrta och lta knslorna leda dig till din sanna match."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"5. KP av VIP och krediter"}),v.jsx("p",{className:"policy-text",children:"Fr att f tillgng till VIP-funktioner och kpa krediter till kontot krvs betalning via Swish. Genom att genomfra betalningar bekrftar du att du har rtt att anvnda den betalningsmetoden och att du accepterar de aktuella betalningsvillkoren. Ingen terbetalning av krediter."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"6. Ansvar fr din information"}),v.jsx("p",{className:"policy-text",children:"Du ansvarar fr att den information du anger i appen r sann och korrekt. Du fr inte ljuga om din lder, identitet eller andra viktiga uppgifter som kan pverka andra anvndares upplevelse av appen. Att lmna falsk information kan leda till att ditt konto stngs av."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"7. Avstngning och blockerad tkomst"}),v.jsx("p",{className:"policy-text",children:"Om du bryter mot dessa anvndarvillkor, inklusive att skriva olmpligt eller falskt innehll, kommer ditt konto att stngas av, och du kommer inte att kunna anvnda appen igen."})]}),v.jsxs("div",{className:"policy-section",children:[v.jsx("h2",{className:"policy-title",children:"8. ndringar av anvndarvillkoren"}),v.jsx("p",{className:"policy-text",children:"Vi frbehller oss rtten att ndra dessa anvndarvillkor nr som helst. Om vi gr ngra ndringar kommer vi att meddela dig genom att uppdatera villkoren p den hr sidan. Genom att fortstta anvnda appen efter ndringarna, godknner du de nya villkoren."})]}),v.jsx("div",{className:"accept-button-container",children:v.jsx("button",{onClick:e,className:"accept-button",children:"Jag godknner"})})]})});var uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},RS=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},h_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,E=l>>2,T=(l&3)<<4|h>>4;let S=(h&15)<<2|y>>6,A=y&63;p||(A=64,c||(S=64)),i.push(t[E],t[T],t[S],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(d_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):RS(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||T==null)throw new PS;const S=l<<2|h>>4;if(i.push(S),y!==64){const A=h<<4&240|y>>2;if(i.push(A),T!==64){const b=y<<6&192|T;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class PS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AS=function(n){const e=d_(n);return h_.encodeByteArray(e,!0)},cc=function(n){return AS(n).replace(/\./g,"")},f_=function(n){try{return h_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=()=>xS().__FIREBASE_DEFAULTS__,OS=()=>{if(typeof process>"u"||typeof uy>"u")return;const n=uy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DS=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&f_(n[1]);return e&&JSON.parse(e)},jc=()=>{try{return NS()||OS()||DS()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},p_=n=>{var e,t;return(t=(e=jc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bS=n=>{const e=p_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},m_=()=>{var n;return(n=jc())===null||n===void 0?void 0:n.config},g_=n=>{var e;return(e=jc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cc(JSON.stringify(t)),cc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function MS(){var n;const e=(n=jc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function US(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function zS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BS(){const n=Wt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $S(){return!MS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function HS(){try{return typeof indexedDB=="object"}catch{return!1}}function qS(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class Ar extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=WS,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?KS(l,i):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new Ar(o,h,i)}}function KS(n,e){return n.replace(GS,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const GS=/\{\$([^}]+)}/g;function QS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function dc(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(cy(l)&&cy(c)){if(!dc(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function cy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function qa(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Wa(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function JS(n,e){const t=new YS(n,e);return t.subscribe.bind(t)}class YS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");XS(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Uh),o.error===void 0&&(o.error=Uh),o.complete===void 0&&(o.complete=Uh);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Uh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(n){return n&&n._delegate?n._delegate:n}class xs{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new jS;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tC(e))try{this.getOrInitializeService({instanceIdentifier:Ps})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ps){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ps){return this.instances.has(e)}getOptions(e=Ps){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:eC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ps){return this.component?this.component.multipleInstances?e:Ps:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eC(n){return n===Ps?void 0:n}function tC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ZS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(je||(je={}));const rC={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},iC=je.INFO,sC={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},oC=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=sC[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hf{constructor(e){this.name=e,this._logLevel=iC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const aC=(n,e)=>e.some(t=>n instanceof t);let dy,hy;function lC(){return dy||(dy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uC(){return hy||(hy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const y_=new WeakMap,of=new WeakMap,v_=new WeakMap,zh=new WeakMap,qf=new WeakMap;function cC(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Li(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&y_.set(t,n)}).catch(()=>{}),qf.set(e,n),e}function dC(n){if(of.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});of.set(n,e)}let af={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return of.get(n);if(e==="objectStoreNames")return n.objectStoreNames||v_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Li(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hC(n){af=n(af)}function fC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Bh(this),e,...t);return v_.set(i,e.sort?e.sort():[e]),Li(i)}:uC().includes(n)?function(...e){return n.apply(Bh(this),e),Li(y_.get(this))}:function(...e){return Li(n.apply(Bh(this),e))}}function pC(n){return typeof n=="function"?fC(n):(n instanceof IDBTransaction&&dC(n),aC(n,lC())?new Proxy(n,af):n)}function Li(n){if(n instanceof IDBRequest)return cC(n);if(zh.has(n))return zh.get(n);const e=pC(n);return e!==n&&(zh.set(n,e),qf.set(e,n)),e}const Bh=n=>qf.get(n);function mC(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=Li(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Li(c.result),p.oldVersion,p.newVersion,Li(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const gC=["get","getKey","getAll","getAllKeys","count"],yC=["put","add","delete","clear"],$h=new Map;function fy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($h.get(e))return $h.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=yC.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||gC.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return $h.set(e,l),l}hC(n=>({...n,get:(e,t,i)=>fy(e,t)||n.get(e,t,i),has:(e,t)=>!!fy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(_C(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function _C(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lf="@firebase/app",py="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Hf("@firebase/app"),EC="@firebase/app-compat",wC="@firebase/analytics-compat",TC="@firebase/analytics",IC="@firebase/app-check-compat",SC="@firebase/app-check",CC="@firebase/auth",kC="@firebase/auth-compat",RC="@firebase/database",PC="@firebase/data-connect",AC="@firebase/database-compat",xC="@firebase/functions",NC="@firebase/functions-compat",OC="@firebase/installations",DC="@firebase/installations-compat",bC="@firebase/messaging",jC="@firebase/messaging-compat",VC="@firebase/performance",LC="@firebase/performance-compat",MC="@firebase/remote-config",FC="@firebase/remote-config-compat",UC="@firebase/storage",zC="@firebase/storage-compat",BC="@firebase/firestore",$C="@firebase/vertexai",HC="@firebase/firestore-compat",qC="firebase",WC="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uf="[DEFAULT]",KC={[lf]:"fire-core",[EC]:"fire-core-compat",[TC]:"fire-analytics",[wC]:"fire-analytics-compat",[SC]:"fire-app-check",[IC]:"fire-app-check-compat",[CC]:"fire-auth",[kC]:"fire-auth-compat",[RC]:"fire-rtdb",[PC]:"fire-data-connect",[AC]:"fire-rtdb-compat",[xC]:"fire-fn",[NC]:"fire-fn-compat",[OC]:"fire-iid",[DC]:"fire-iid-compat",[bC]:"fire-fcm",[jC]:"fire-fcm-compat",[VC]:"fire-perf",[LC]:"fire-perf-compat",[MC]:"fire-rc",[FC]:"fire-rc-compat",[UC]:"fire-gcs",[zC]:"fire-gcs-compat",[BC]:"fire-fst",[HC]:"fire-fst-compat",[$C]:"fire-vertex","fire-js":"fire-js",[qC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=new Map,GC=new Map,cf=new Map;function my(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jo(n){const e=n.name;if(cf.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,n);for(const t of il.values())my(t,n);for(const t of GC.values())my(t,n);return!0}function Wf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ln(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mi=new yl("app","Firebase",QC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new xs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=WC;function __(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:uf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Mi.create("bad-app-name",{appName:String(o)});if(t||(t=m_()),!t)throw Mi.create("no-options");const l=il.get(o);if(l){if(dc(t,l.options)&&dc(i,l.config))return l;throw Mi.create("duplicate-app",{appName:o})}const c=new nC(o);for(const p of cf.values())c.addComponent(p);const h=new JC(t,i,c);return il.set(o,h),h}function Kf(n=uf){const e=il.get(n);if(!e&&n===uf&&m_())return __();if(!e)throw Mi.create("no-app",{appName:n});return e}function YC(){return Array.from(il.values())}function Fi(n,e,t){var i;let o=(i=KC[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const h=[`Unable to register library "${o}" with version "${e}":`];l&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&h.push("and"),c&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(h.join(" "));return}jo(new xs(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="firebase-heartbeat-database",ZC=1,sl="firebase-heartbeat-store";let Hh=null;function E_(){return Hh||(Hh=mC(XC,ZC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(sl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mi.create("idb-open",{originalErrorMessage:n.message})})),Hh}async function ek(n){try{const t=(await E_()).transaction(sl),i=await t.objectStore(sl).get(w_(n));return await t.done,i}catch(e){if(e instanceof Ar)ei.warn(e.message);else{const t=Mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(t.message)}}}async function gy(n,e){try{const i=(await E_()).transaction(sl,"readwrite");await i.objectStore(sl).put(e,w_(n)),await i.done}catch(t){if(t instanceof Ar)ei.warn(t.message);else{const i=Mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ei.warn(i.message)}}}function w_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=1024,nk=30;class rk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new sk(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=yy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>nk){const c=ok(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ei.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yy(),{heartbeatsToSend:i,unsentEntries:o}=ik(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ei.warn(t),""}}}function yy(){return new Date().toISOString().substring(0,10)}function ik(n,e=tk){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),vy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),vy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class sk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return HS()?qS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ek(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return gy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return gy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function vy(n){return cc(JSON.stringify({version:2,heartbeats:n})).length}function ok(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n){jo(new xs("platform-logger",e=>new vC(e),"PRIVATE")),jo(new xs("heartbeat",e=>new rk(e),"PRIVATE")),Fi(lf,py,n),Fi(lf,py,"esm2017"),Fi("fire-js","")}ak("");var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ui,T_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function P(){}P.prototype=C.prototype,x.D=C.prototype,x.prototype=new P,x.prototype.constructor=x,x.C=function(k,R,j){for(var N=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)N[Ae-2]=arguments[Ae];return C.prototype[R].apply(k,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,P){P||(P=0);var k=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)k[R]=C.charCodeAt(P++)|C.charCodeAt(P++)<<8|C.charCodeAt(P++)<<16|C.charCodeAt(P++)<<24;else for(R=0;16>R;++R)k[R]=C[P++]|C[P++]<<8|C[P++]<<16|C[P++]<<24;C=x.g[0],P=x.g[1],R=x.g[2];var j=x.g[3],N=C+(j^P&(R^j))+k[0]+3614090360&4294967295;C=P+(N<<7&4294967295|N>>>25),N=j+(R^C&(P^R))+k[1]+3905402710&4294967295,j=C+(N<<12&4294967295|N>>>20),N=R+(P^j&(C^P))+k[2]+606105819&4294967295,R=j+(N<<17&4294967295|N>>>15),N=P+(C^R&(j^C))+k[3]+3250441966&4294967295,P=R+(N<<22&4294967295|N>>>10),N=C+(j^P&(R^j))+k[4]+4118548399&4294967295,C=P+(N<<7&4294967295|N>>>25),N=j+(R^C&(P^R))+k[5]+1200080426&4294967295,j=C+(N<<12&4294967295|N>>>20),N=R+(P^j&(C^P))+k[6]+2821735955&4294967295,R=j+(N<<17&4294967295|N>>>15),N=P+(C^R&(j^C))+k[7]+4249261313&4294967295,P=R+(N<<22&4294967295|N>>>10),N=C+(j^P&(R^j))+k[8]+1770035416&4294967295,C=P+(N<<7&4294967295|N>>>25),N=j+(R^C&(P^R))+k[9]+2336552879&4294967295,j=C+(N<<12&4294967295|N>>>20),N=R+(P^j&(C^P))+k[10]+4294925233&4294967295,R=j+(N<<17&4294967295|N>>>15),N=P+(C^R&(j^C))+k[11]+2304563134&4294967295,P=R+(N<<22&4294967295|N>>>10),N=C+(j^P&(R^j))+k[12]+1804603682&4294967295,C=P+(N<<7&4294967295|N>>>25),N=j+(R^C&(P^R))+k[13]+4254626195&4294967295,j=C+(N<<12&4294967295|N>>>20),N=R+(P^j&(C^P))+k[14]+2792965006&4294967295,R=j+(N<<17&4294967295|N>>>15),N=P+(C^R&(j^C))+k[15]+1236535329&4294967295,P=R+(N<<22&4294967295|N>>>10),N=C+(R^j&(P^R))+k[1]+4129170786&4294967295,C=P+(N<<5&4294967295|N>>>27),N=j+(P^R&(C^P))+k[6]+3225465664&4294967295,j=C+(N<<9&4294967295|N>>>23),N=R+(C^P&(j^C))+k[11]+643717713&4294967295,R=j+(N<<14&4294967295|N>>>18),N=P+(j^C&(R^j))+k[0]+3921069994&4294967295,P=R+(N<<20&4294967295|N>>>12),N=C+(R^j&(P^R))+k[5]+3593408605&4294967295,C=P+(N<<5&4294967295|N>>>27),N=j+(P^R&(C^P))+k[10]+38016083&4294967295,j=C+(N<<9&4294967295|N>>>23),N=R+(C^P&(j^C))+k[15]+3634488961&4294967295,R=j+(N<<14&4294967295|N>>>18),N=P+(j^C&(R^j))+k[4]+3889429448&4294967295,P=R+(N<<20&4294967295|N>>>12),N=C+(R^j&(P^R))+k[9]+568446438&4294967295,C=P+(N<<5&4294967295|N>>>27),N=j+(P^R&(C^P))+k[14]+3275163606&4294967295,j=C+(N<<9&4294967295|N>>>23),N=R+(C^P&(j^C))+k[3]+4107603335&4294967295,R=j+(N<<14&4294967295|N>>>18),N=P+(j^C&(R^j))+k[8]+1163531501&4294967295,P=R+(N<<20&4294967295|N>>>12),N=C+(R^j&(P^R))+k[13]+2850285829&4294967295,C=P+(N<<5&4294967295|N>>>27),N=j+(P^R&(C^P))+k[2]+4243563512&4294967295,j=C+(N<<9&4294967295|N>>>23),N=R+(C^P&(j^C))+k[7]+1735328473&4294967295,R=j+(N<<14&4294967295|N>>>18),N=P+(j^C&(R^j))+k[12]+2368359562&4294967295,P=R+(N<<20&4294967295|N>>>12),N=C+(P^R^j)+k[5]+4294588738&4294967295,C=P+(N<<4&4294967295|N>>>28),N=j+(C^P^R)+k[8]+2272392833&4294967295,j=C+(N<<11&4294967295|N>>>21),N=R+(j^C^P)+k[11]+1839030562&4294967295,R=j+(N<<16&4294967295|N>>>16),N=P+(R^j^C)+k[14]+4259657740&4294967295,P=R+(N<<23&4294967295|N>>>9),N=C+(P^R^j)+k[1]+2763975236&4294967295,C=P+(N<<4&4294967295|N>>>28),N=j+(C^P^R)+k[4]+1272893353&4294967295,j=C+(N<<11&4294967295|N>>>21),N=R+(j^C^P)+k[7]+4139469664&4294967295,R=j+(N<<16&4294967295|N>>>16),N=P+(R^j^C)+k[10]+3200236656&4294967295,P=R+(N<<23&4294967295|N>>>9),N=C+(P^R^j)+k[13]+681279174&4294967295,C=P+(N<<4&4294967295|N>>>28),N=j+(C^P^R)+k[0]+3936430074&4294967295,j=C+(N<<11&4294967295|N>>>21),N=R+(j^C^P)+k[3]+3572445317&4294967295,R=j+(N<<16&4294967295|N>>>16),N=P+(R^j^C)+k[6]+76029189&4294967295,P=R+(N<<23&4294967295|N>>>9),N=C+(P^R^j)+k[9]+3654602809&4294967295,C=P+(N<<4&4294967295|N>>>28),N=j+(C^P^R)+k[12]+3873151461&4294967295,j=C+(N<<11&4294967295|N>>>21),N=R+(j^C^P)+k[15]+530742520&4294967295,R=j+(N<<16&4294967295|N>>>16),N=P+(R^j^C)+k[2]+3299628645&4294967295,P=R+(N<<23&4294967295|N>>>9),N=C+(R^(P|~j))+k[0]+4096336452&4294967295,C=P+(N<<6&4294967295|N>>>26),N=j+(P^(C|~R))+k[7]+1126891415&4294967295,j=C+(N<<10&4294967295|N>>>22),N=R+(C^(j|~P))+k[14]+2878612391&4294967295,R=j+(N<<15&4294967295|N>>>17),N=P+(j^(R|~C))+k[5]+4237533241&4294967295,P=R+(N<<21&4294967295|N>>>11),N=C+(R^(P|~j))+k[12]+1700485571&4294967295,C=P+(N<<6&4294967295|N>>>26),N=j+(P^(C|~R))+k[3]+2399980690&4294967295,j=C+(N<<10&4294967295|N>>>22),N=R+(C^(j|~P))+k[10]+4293915773&4294967295,R=j+(N<<15&4294967295|N>>>17),N=P+(j^(R|~C))+k[1]+2240044497&4294967295,P=R+(N<<21&4294967295|N>>>11),N=C+(R^(P|~j))+k[8]+1873313359&4294967295,C=P+(N<<6&4294967295|N>>>26),N=j+(P^(C|~R))+k[15]+4264355552&4294967295,j=C+(N<<10&4294967295|N>>>22),N=R+(C^(j|~P))+k[6]+2734768916&4294967295,R=j+(N<<15&4294967295|N>>>17),N=P+(j^(R|~C))+k[13]+1309151649&4294967295,P=R+(N<<21&4294967295|N>>>11),N=C+(R^(P|~j))+k[4]+4149444226&4294967295,C=P+(N<<6&4294967295|N>>>26),N=j+(P^(C|~R))+k[11]+3174756917&4294967295,j=C+(N<<10&4294967295|N>>>22),N=R+(C^(j|~P))+k[2]+718787259&4294967295,R=j+(N<<15&4294967295|N>>>17),N=P+(j^(R|~C))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(R+(N<<21&4294967295|N>>>11))&4294967295,x.g[2]=x.g[2]+R&4294967295,x.g[3]=x.g[3]+j&4294967295}i.prototype.u=function(x,C){C===void 0&&(C=x.length);for(var P=C-this.blockSize,k=this.B,R=this.h,j=0;j<C;){if(R==0)for(;j<=P;)o(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<C;)if(k[R++]=x.charCodeAt(j++),R==this.blockSize){o(this,k),R=0;break}}else for(;j<C;)if(k[R++]=x[j++],R==this.blockSize){o(this,k),R=0;break}}this.h=R,this.o+=C},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;var P=8*this.o;for(C=x.length-8;C<x.length;++C)x[C]=P&255,P/=256;for(this.u(x),x=Array(16),C=P=0;4>C;++C)for(var k=0;32>k;k+=8)x[P++]=this.g[C]>>>k&255;return x};function l(x,C){var P=h;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=C(x)}function c(x,C){this.h=C;for(var P=[],k=!0,R=x.length-1;0<=R;R--){var j=x[R]|0;k&&j==C||(P[R]=j,k=!1)}this.g=P}var h={};function p(x){return-128<=x&&128>x?l(x,function(C){return new c([C|0],0>C?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(0>x)return D(y(-x));for(var C=[],P=1,k=0;x>=P;k++)C[k]=x/P|0,P*=4294967296;return new c(C,0)}function E(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return D(E(x.substring(1),C));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=y(Math.pow(C,8)),k=T,R=0;R<x.length;R+=8){var j=Math.min(8,x.length-R),N=parseInt(x.substring(R,R+j),C);8>j?(j=y(Math.pow(C,j)),k=k.j(j).add(y(N))):(k=k.j(P),k=k.add(y(N)))}return k}var T=p(0),S=p(1),A=p(16777216);n=c.prototype,n.m=function(){if(L(this))return-D(this).m();for(var x=0,C=1,P=0;P<this.g.length;P++){var k=this.i(P);x+=(0<=k?k:4294967296+k)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(L(this))return"-"+D(this).toString(x);for(var C=y(Math.pow(x,6)),P=this,k="";;){var R=te(P,C).g;P=F(P,R.j(C));var j=((0<P.g.length?P.g[0]:P.h)>>>0).toString(x);if(P=R,b(P))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function L(x){return x.h==-1}n.l=function(x){return x=F(this,x),L(x)?-1:b(x)?0:1};function D(x){for(var C=x.g.length,P=[],k=0;k<C;k++)P[k]=~x.g[k];return new c(P,~x.h).add(S)}n.abs=function(){return L(this)?D(this):this},n.add=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],k=0,R=0;R<=C;R++){var j=k+(this.i(R)&65535)+(x.i(R)&65535),N=(j>>>16)+(this.i(R)>>>16)+(x.i(R)>>>16);k=N>>>16,j&=65535,N&=65535,P[R]=N<<16|j}return new c(P,P[P.length-1]&-2147483648?-1:0)};function F(x,C){return x.add(D(C))}n.j=function(x){if(b(this)||b(x))return T;if(L(this))return L(x)?D(this).j(D(x)):D(D(this).j(x));if(L(x))return D(this.j(D(x)));if(0>this.l(A)&&0>x.l(A))return y(this.m()*x.m());for(var C=this.g.length+x.g.length,P=[],k=0;k<2*C;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var R=0;R<x.g.length;R++){var j=this.i(k)>>>16,N=this.i(k)&65535,Ae=x.i(R)>>>16,Ne=x.i(R)&65535;P[2*k+2*R]+=N*Ne,Q(P,2*k+2*R),P[2*k+2*R+1]+=j*Ne,Q(P,2*k+2*R+1),P[2*k+2*R+1]+=N*Ae,Q(P,2*k+2*R+1),P[2*k+2*R+2]+=j*Ae,Q(P,2*k+2*R+2)}for(k=0;k<C;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=C;k<2*C;k++)P[k]=0;return new c(P,0)};function Q(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function G(x,C){this.g=x,this.h=C}function te(x,C){if(b(C))throw Error("division by zero");if(b(x))return new G(T,T);if(L(x))return C=te(D(x),C),new G(D(C.g),D(C.h));if(L(C))return C=te(x,D(C)),new G(D(C.g),C.h);if(30<x.g.length){if(L(x)||L(C))throw Error("slowDivide_ only works with positive integers.");for(var P=S,k=C;0>=k.l(x);)P=K(P),k=K(k);var R=ie(P,1),j=ie(k,1);for(k=ie(k,2),P=ie(P,2);!b(k);){var N=j.add(k);0>=N.l(x)&&(R=R.add(P),j=N),k=ie(k,1),P=ie(P,1)}return C=F(x,R.j(C)),new G(R,C)}for(R=T;0<=x.l(C);){for(P=Math.max(1,Math.floor(x.m()/C.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=y(P),N=j.j(C);L(N)||0<N.l(x);)P-=k,j=y(P),N=j.j(C);b(j)&&(j=S),R=R.add(j),x=F(x,N)}return new G(R,x)}n.A=function(x){return te(this,x).h},n.and=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],k=0;k<C;k++)P[k]=this.i(k)&x.i(k);return new c(P,this.h&x.h)},n.or=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],k=0;k<C;k++)P[k]=this.i(k)|x.i(k);return new c(P,this.h|x.h)},n.xor=function(x){for(var C=Math.max(this.g.length,x.g.length),P=[],k=0;k<C;k++)P[k]=this.i(k)^x.i(k);return new c(P,this.h^x.h)};function K(x){for(var C=x.g.length+1,P=[],k=0;k<C;k++)P[k]=x.i(k)<<1|x.i(k-1)>>>31;return new c(P,x.h)}function ie(x,C){var P=C>>5;C%=32;for(var k=x.g.length-P,R=[],j=0;j<k;j++)R[j]=0<C?x.i(j+P)>>>C|x.i(j+P+1)<<32-C:x.i(j+P);return new c(R,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,T_=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=E,Ui=c}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var I_,Ka,S_,Zu,df,C_,k_,R_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hu=="object"&&Hu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var _=i;u=u.split(".");for(var I=0;I<u.length-1;I++){var B=u[I];if(!(B in _))break e;_=_[B]}u=u[u.length-1],I=_[u],m=m(I),m!=I&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,I=!1,B={next:function(){if(!I&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},h=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function E(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),u.apply(m,B)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:T,S.apply(null,arguments)}function A(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function b(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(I,B,W){for(var oe=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)oe[Qe-2]=arguments[Qe];return m.prototype[B].apply(I,oe)}}function L(u){const m=u.length;if(0<m){const _=Array(m);for(let I=0;I<m;I++)_[I]=u[I];return _}return[]}function D(u,m){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(p(I)){const B=u.length||0,W=I.length||0;u.length=B+W;for(let oe=0;oe<W;oe++)u[B+oe]=I[oe]}else u.push(I)}}class F{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Q(u){return/^[\s\xa0]*$/.test(u)}function G(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var K=G().indexOf("Gecko")!=-1&&!(G().toLowerCase().indexOf("webkit")!=-1&&G().indexOf("Edge")==-1)&&!(G().indexOf("Trident")!=-1||G().indexOf("MSIE")!=-1)&&G().indexOf("Edge")==-1;function ie(u,m,_){for(const I in u)m.call(_,u[I],I,u)}function x(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function C(u){const m={};for(const _ in u)m[_]=u[_];return m}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,m){let _,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(_ in I)u[_]=I[_];for(let W=0;W<P.length;W++)_=P[W],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function R(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function j(u){h.setTimeout(()=>{throw u},0)}function N(){var u=ye;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class Ae{constructor(){this.h=this.g=null}add(m,_){const I=Ne.get();I.set(m,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Ne=new F(()=>new Pe,u=>u.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let De,se=!1,ye=new Ae,ae=()=>{const u=h.Promise.resolve(void 0);De=()=>{u.then(z)}};var z=()=>{for(var u;u=N();){try{u.h.call(u.g)}catch(_){j(_)}var m=Ne;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u}();function Re(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(K){e:{try{te(m.nodeName);var B=!0;break e}catch{}B=!1}B||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Oe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Re.aa.h.call(this)}}b(Re,me);var Oe={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Ge(u,m,_,I,B){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!I,this.ha=B,this.key=++Fe,this.da=this.fa=!1}function ct(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cn(u){this.src=u,this.g={},this.h=0}Cn.prototype.add=function(u,m,_,I,B){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var oe=Fn(u,m,I,B);return-1<oe?(m=u[oe],_||(m.fa=!1)):(m=new Ge(m,this.src,W,!!I,B),m.fa=_,u.push(m)),m};function xr(u,m){var _=m.type;if(_ in u.g){var I=u.g[_],B=Array.prototype.indexOf.call(I,m,void 0),W;(W=0<=B)&&Array.prototype.splice.call(I,B,1),W&&(ct(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Fn(u,m,_,I){for(var B=0;B<u.length;++B){var W=u[B];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==I)return B}return-1}var we="closure_lm_"+(1e6*Math.random()|0),be={};function Ue(u,m,_,I,B){if(Array.isArray(m)){for(var W=0;W<m.length;W++)Ue(u,m[W],_,I,B);return null}return _=Yo(_),u&&u[$e]?u.K(m,_,y(I)?!!I.capture:!1,B):st(u,m,_,!1,I,B)}function st(u,m,_,I,B,W){if(!m)throw Error("Invalid event type");var oe=y(B)?!!B.capture:!!B,Qe=lr(u);if(Qe||(u[we]=Qe=new Cn(u)),_=Qe.add(m,_,I,oe,W),_.proxy)return _;if(I=Kt(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)de||(B=oe),B===void 0&&(B=!1),u.addEventListener(m.toString(),I,B);else if(u.attachEvent)u.attachEvent(tn(m.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Kt(){function u(_){return m.call(u.src,u.listener,_)}const m=Nr;return u}function Un(u,m,_,I,B){if(Array.isArray(m))for(var W=0;W<m.length;W++)Un(u,m[W],_,I,B);else I=y(I)?!!I.capture:!!I,_=Yo(_),u&&u[$e]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=Fn(W,_,I,B),-1<_&&(ct(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=lr(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Fn(m,_,I,B)),(_=-1<u?m[u]:null)&&Gt(_))}function Gt(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[$e])xr(m.i,u);else{var _=u.type,I=u.proxy;m.removeEventListener?m.removeEventListener(_,I,u.capture):m.detachEvent?m.detachEvent(tn(_),I):m.addListener&&m.removeListener&&m.removeListener(I),(_=lr(m))?(xr(_,u),_.h==0&&(_.src=null,m[we]=null)):ct(u)}}}function tn(u){return u in be?be[u]:be[u]="on"+u}function Nr(u,m){if(u.da)u=!0;else{m=new Re(m,this);var _=u.listener,I=u.ha||u.src;u.fa&&Gt(u),u=_.call(I,m)}return u}function lr(u){return u=u[we],u instanceof Cn?u:null}var oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yo(u){return typeof u=="function"?u:(u[oi]||(u[oi]=function(m){return u.handleEvent(m)}),u[oi])}function yt(){J.call(this),this.i=new Cn(this),this.M=this,this.F=null}b(yt,J),yt.prototype[$e]=!0,yt.prototype.removeEventListener=function(u,m,_,I){Un(this,u,m,_,I)};function vt(u,m){var _,I=u.F;if(I)for(_=[];I;I=I.F)_.push(I);if(u=u.M,I=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var B=m;m=new me(I,u),k(m,B)}if(B=!0,_)for(var W=_.length-1;0<=W;W--){var oe=m.g=_[W];B=Or(oe,I,!0,m)&&B}if(oe=m.g=u,B=Or(oe,I,!0,m)&&B,B=Or(oe,I,!1,m)&&B,_)for(W=0;W<_.length;W++)oe=m.g=_[W],B=Or(oe,I,!1,m)&&B}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],I=0;I<_.length;I++)ct(_[I]);delete u.g[m],u.h--}}this.F=null},yt.prototype.K=function(u,m,_,I){return this.i.add(String(u),m,!1,_,I)},yt.prototype.L=function(u,m,_,I){return this.i.add(String(u),m,!0,_,I)};function Or(u,m,_,I){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var B=!0,W=0;W<m.length;++W){var oe=m[W];if(oe&&!oe.da&&oe.capture==_){var Qe=oe.listener,_t=oe.ha||oe.src;oe.fa&&xr(u.i,oe),B=Qe.call(_t,I)!==!1&&B}}return B&&!I.defaultPrevented}function Xo(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:h.setTimeout(u,m||0)}function ai(u){u.g=Xo(()=>{u.g=null,u.i&&(u.i=!1,ai(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class ts extends J{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ai(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(u){J.call(this),this.h=u,this.g={}}b(ns,J);var Zo=[];function ea(u){ie(u.g,function(m,_){this.g.hasOwnProperty(_)&&Gt(m)},u),u.g={}}ns.prototype.N=function(){ns.aa.N.call(this),ea(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ta=h.JSON.stringify,na=h.JSON.parse,ra=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function rs(){}rs.prototype.h=null;function Ms(u){return u.h||(u.h=u.i())}function Fs(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ur(){me.call(this,"d")}b(ur,me);function Us(){me.call(this,"c")}b(Us,me);var cr={},ia=null;function is(){return ia=ia||new yt}cr.La="serverreachability";function sa(u){me.call(this,cr.La,u)}b(sa,me);function Dr(u){const m=is();vt(m,new sa(m))}cr.STAT_EVENT="statevent";function oa(u,m){me.call(this,cr.STAT_EVENT,u),this.stat=m}b(oa,me);function dt(u){const m=is();vt(m,new oa(m,u))}cr.Ma="timingevent";function zs(u,m){me.call(this,cr.Ma,u),this.size=m}b(zs,me);function zn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function ss(){this.g=!0}ss.prototype.xa=function(){this.g=!1};function os(u,m,_,I,B,W){u.info(function(){if(u.g)if(W)for(var oe="",Qe=W.split("&"),_t=0;_t<Qe.length;_t++){var ze=Qe[_t].split("=");if(1<ze.length){var kt=ze[0];ze=ze[1];var pt=kt.split("_");oe=2<=pt.length&&pt[1]=="type"?oe+(kt+"="+ze+"&"):oe+(kt+"=redacted&")}}else oe=null;else oe=W;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+m+`
`+_+`
`+oe})}function Bs(u,m,_,I,B,W,oe){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+m+`
`+_+`
`+W+" "+oe})}function Bn(u,m,_,I){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+ad(u,_)+(I?" "+I:"")})}function aa(u,m){u.info(function(){return"TIMEOUT: "+m})}ss.prototype.info=function(){};function ad(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var I=_[u];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var oe=1;oe<B.length;oe++)B[oe]=""}}}}return ta(_)}catch{return m}}var $s={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function as(){}b(as,rs),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},$n=new as;function Hn(u,m,_,I){this.j=u,this.i=m,this.l=_,this.R=I||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Al}function Al(){this.i=null,this.g="",this.h=!1}var la={},Hs={};function qs(u,m,_){u.L=1,u.v=hi(yn(m)),u.m=_,u.P=!0,ua(u,null)}function ua(u,m){u.F=Date.now(),Ye(u),u.A=yn(u.v);var _=u.A,I=u.R;Array.isArray(I)||(I=[String(I)]),pi(_.i,"t",I),u.C=0,_=u.j.J,u.h=new Al,u.g=Kl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new ts(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,I=u.ca;var B="readystatechange";Array.isArray(B)||(B&&(Zo[0]=B.toString()),B=Zo);for(var W=0;W<B.length;W++){var oe=Ue(_,B[W],I||m.handleEvent,!1,m.h||m);if(!oe)break;m.g[oe.key]=oe}m=u.H?C(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),Dr(),os(u.i,u.u,u.A,u.l,u.R,u.m)}Hn.prototype.ca=function(u){u=u.target;const m=this.M;m&&rn(u)==3?m.j():this.Y(u)},Hn.prototype.Y=function(u){try{if(u==this.g)e:{const pt=rn(this.g);var m=this.g.Ba();const An=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||ma(this.g)))){this.J||pt!=4||m==7||(m==8||0>=An?Dr(3):Dr(2)),ls(this);var _=this.g.Z();this.X=_;t:if(xl(this)){var I=ma(this.g);u="";var B=I.length,W=rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rn(this),li(this);var oe="";break t}this.h.i=new h.TextDecoder}for(m=0;m<B;m++)this.h.h=!0,u+=this.h.i.decode(I[m],{stream:!(W&&m==B-1)});I.length=0,this.h.g+=u,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,Bs(this.i,this.u,this.A,this.l,this.R,pt,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,_t=this.g;if((Qe=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Qe)){var ze=Qe;break t}}ze=null}if(_=ze)Bn(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,_);else{this.o=!1,this.s=3,dt(12),Rn(this),li(this);break e}}if(this.P){_=!0;let _n;for(;!this.J&&this.C<oe.length;)if(_n=ld(this,oe),_n==Hs){pt==4&&(this.s=4,dt(14),_=!1),Bn(this.i,this.l,null,"[Incomplete Response]");break}else if(_n==la){this.s=4,dt(15),Bn(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else Bn(this.i,this.l,_n,null),ca(this,_n);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||oe.length!=0||this.h.h||(this.s=1,dt(16),_=!1),this.o=this.o&&_,!_)Bn(this.i,this.l,oe,"[Invalid Chunked Response]"),Rn(this),li(this);else if(0<oe.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),ya(kt),kt.M=!0,dt(11))}}else Bn(this.i,this.l,oe,null),ca(this,oe);pt==4&&Rn(this),this.o&&!this.J&&(pt==4?no(this.j,this):(this.o=!1,Ye(this)))}else Ys(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Rn(this),li(this)}}}catch{}finally{}};function xl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ld(u,m){var _=u.C,I=m.indexOf(`
`,_);return I==-1?Hs:(_=Number(m.substring(_,I)),isNaN(_)?la:(I+=1,I+_>m.length?Hs:(m=m.slice(I,I+_),u.C=I+_,m)))}Hn.prototype.cancel=function(){this.J=!0,Rn(this)};function Ye(u){u.S=Date.now()+u.I,Nl(u,u.I)}function Nl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=zn(S(u.ba,u),m)}function ls(u){u.B&&(h.clearTimeout(u.B),u.B=null)}Hn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(aa(this.i,this.A),this.L!=2&&(Dr(),dt(17)),Rn(this),this.s=2,li(this)):Nl(this,this.S-u)};function li(u){u.j.G==0||u.J||no(u.j,u)}function Rn(u){ls(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ea(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ca(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||Qt(_.h,u))){if(!u.K&&Qt(_.h,u)&&_.G==3){try{var I=_.Da.g.parse(m)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)to(_),Qn(_);else break e;eo(_),dt(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=zn(S(_.Za,_),6e3));if(1>=Dl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mr(_,11)}else if((u.K||_.g==u)&&to(_),!Q(m))for(B=_.Da.g.parse(m),m=0;m<B.length;m++){let ze=B[m];if(_.T=ze[0],ze=ze[1],_.G==2)if(ze[0]=="c"){_.K=ze[1],_.ia=ze[2];const kt=ze[3];kt!=null&&(_.la=kt,_.j.info("VER="+_.la));const pt=ze[4];pt!=null&&(_.Aa=pt,_.j.info("SVER="+_.Aa));const An=ze[5];An!=null&&typeof An=="number"&&0<An&&(I=1.5*An,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const _n=u.g;if(_n){const ms=_n.g?_n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ms){var W=I.h;W.g||ms.indexOf("spdy")==-1&&ms.indexOf("quic")==-1&&ms.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(da(W,W.h),W.h=null))}if(I.D){const io=_n.g?_n.g.getResponseHeader("X-HTTP-Session-Id"):null;io&&(I.ya=io,Je(I.I,I.D,io))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var oe=u;if(I.qa=Wl(I,I.J?I.ia:null,I.W),oe.K){bl(I.h,oe);var Qe=oe,_t=I.L;_t&&(Qe.I=_t),Qe.B&&(ls(Qe),Ye(Qe)),I.g=oe}else ps(I);0<_.i.length&&pr(_)}else ze[0]!="stop"&&ze[0]!="close"||Mr(_,7);else _.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Mr(_,7):Ot(_):ze[0]!="noop"&&_.l&&_.l.ta(ze),_.v=0)}}Dr(4)}catch{}}var Ol=class{constructor(u,m){this.g=u,this.map=m}};function us(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Dl(u){return u.h?1:u.g?u.g.size:0}function Qt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function da(u,m){u.g?u.g.add(m):u.h=m}function bl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}us.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function jl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return L(u.i)}function Ws(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,I=0;I<_;I++)m.push(u[I]);return m}m=[],_=0;for(I in u)m[_++]=u[I];return m}function Ks(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const I in u)m[_++]=I;return m}}}function ui(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=Ks(u),I=Ws(u),B=I.length,W=0;W<B;W++)m.call(void 0,I[W],_&&_[W],u)}var cs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ud(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var I=u[_].indexOf("="),B=null;if(0<=I){var W=u[_].substring(0,I);B=u[_].substring(I+1)}else W=u[_];m(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function br(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof br){this.h=u.h,ds(this,u.j),this.o=u.o,this.g=u.g,ci(this,u.s),this.l=u.l;var m=u.i,_=new dr;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),di(this,_),this.m=u.m}else u&&(m=String(u).match(cs))?(this.h=!1,ds(this,m[1]||"",!0),this.o=Le(m[2]||""),this.g=Le(m[3]||"",!0),ci(this,m[4]),this.l=Le(m[5]||"",!0),di(this,m[6]||"",!0),this.m=Le(m[7]||"")):(this.h=!1,this.i=new dr(null,this.h))}br.prototype.toString=function(){var u=[],m=this.j;m&&u.push(fi(m,Gs,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(fi(m,Gs,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(fi(_,_.charAt(0)=="/"?Ml:Ll,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",fi(_,ha)),u.join("")};function yn(u){return new br(u)}function ds(u,m,_){u.j=_?Le(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ci(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function di(u,m,_){m instanceof dr?(u.i=m,hr(u.i,u.h)):(_||(m=fi(m,Fl)),u.i=new dr(m,u.h))}function Je(u,m,_){u.i.set(m,_)}function hi(u){return Je(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Le(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,Vl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Vl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Gs=/[#\/\?@]/g,Ll=/[#\?:]/g,Ml=/[#\?]/g,Fl=/[#\?@]/g,ha=/#/g;function dr(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Nt(u){u.g||(u.g=new Map,u.h=0,u.i&&ud(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}n=dr.prototype,n.add=function(u,m){Nt(this),this.i=null,u=Pn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function qn(u,m){Nt(u),m=Pn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Wn(u,m){return Nt(u),m=Pn(u,m),u.g.has(m)}n.forEach=function(u,m){Nt(this),this.g.forEach(function(_,I){_.forEach(function(B){u.call(m,B,I,this)},this)},this)},n.na=function(){Nt(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let I=0;I<m.length;I++){const B=u[I];for(let W=0;W<B.length;W++)_.push(m[I])}return _},n.V=function(u){Nt(this);let m=[];if(typeof u=="string")Wn(this,u)&&(m=m.concat(this.g.get(Pn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},n.set=function(u,m){return Nt(this),this.i=null,u=Pn(this,u),Wn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function pi(u,m,_){qn(u,m),0<_.length&&(u.i=null,u.g.set(Pn(u,m),L(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var I=m[_];const W=encodeURIComponent(String(I)),oe=this.V(I);for(I=0;I<oe.length;I++){var B=W;oe[I]!==""&&(B+="="+encodeURIComponent(String(oe[I]))),u.push(B)}}return this.i=u.join("&")};function Pn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function hr(u,m){m&&!u.j&&(Nt(u),u.i=null,u.g.forEach(function(_,I){var B=I.toLowerCase();I!=B&&(qn(this,I),pi(this,B,_))},u)),u.j=m}function cd(u,m){const _=new ss;if(h.Image){const I=new Image;I.onload=A(nn,_,"TestLoadImage: loaded",!0,m,I),I.onerror=A(nn,_,"TestLoadImage: error",!1,m,I),I.onabort=A(nn,_,"TestLoadImage: abort",!1,m,I),I.ontimeout=A(nn,_,"TestLoadImage: timeout",!1,m,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else m(!1)}function Ul(u,m){const _=new ss,I=new AbortController,B=setTimeout(()=>{I.abort(),nn(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:I.signal}).then(W=>{clearTimeout(B),W.ok?nn(_,"TestPingServer: ok",!0,m):nn(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(B),nn(_,"TestPingServer: error",!1,m)})}function nn(u,m,_,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(_)}catch{}}function dd(){this.g=new ra}function zl(u,m,_){const I=_||"";try{ui(u,function(B,W){let oe=B;y(B)&&(oe=ta(B)),m.push(I+W+"="+encodeURIComponent(oe))})}catch(B){throw m.push(I+"type="+encodeURIComponent("_badmap")),B}}function jr(u){this.l=u.Ub||null,this.j=u.eb||!1}b(jr,rs),jr.prototype.g=function(){return new hs(this.l,this.j)},jr.prototype.i=function(u){return function(){return u}}({});function hs(u,m){yt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(hs,yt),n=hs.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Gn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||h).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Bl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Kn(this):Gn(this),this.readyState==3&&Bl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Kn(this))},n.Qa=function(u){this.g&&(this.response=u,Kn(this))},n.ga=function(){this.g&&Kn(this)};function Kn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Gn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Gn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vr(u){let m="";return ie(u,function(_,I){m+=I,m+=":",m+=_,m+=`\r
`}),m}function mi(u,m,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=Vr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Je(u,m,_))}function tt(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(tt,yt);var hd=/^https?$/i,fa=["POST","PUT"];n=tt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?Ms(this.o):Ms($n),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){fs(this,W);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)_.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const W of I.keys())_.set(W,I.get(W));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),B=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(fa,m,void 0))||I||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,oe]of _)this.g.setRequestHeader(W,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){fs(this,W)}};function fs(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,Qs(u),vn(u)}function Qs(u){u.A||(u.A=!0,vt(u,"complete"),vt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,vt(this,"complete"),vt(this,"abort"),vn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vn(this,!0)),tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},n.bb=function(){pa(this)};function pa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||rn(u)!=4||u.Z()!=2)){if(u.u&&rn(u)==4)Xo(u.Ea,0,u);else if(vt(u,"readystatechange"),rn(u)==4){u.h=!1;try{const oe=u.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var I;if(I=oe===0){var B=String(u.D).match(cs)[1]||null;!B&&h.self&&h.self.location&&(B=h.self.location.protocol.slice(0,-1)),I=!hd.test(B?B.toLowerCase():"")}_=I}if(_)vt(u,"complete"),vt(u,"success");else{u.m=6;try{var W=2<rn(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Qs(u)}}finally{vn(u)}}}}function vn(u,m){if(u.g){Js(u);const _=u.g,I=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||vt(u,"ready");try{_.onreadystatechange=I}catch{}}}function Js(u){u.I&&(h.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function rn(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),na(m)}};function ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(u){const m={};u=(u.g&&2<=rn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(Q(u[I]))continue;var _=R(u[I]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[B]||[];m[B]=W,W.push(_)}x(m,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fr(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ga(u){this.Aa=0,this.i=[],this.j=new ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fr("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fr("baseRetryDelayMs",5e3,u),this.cb=fr("retryDelaySeedMs",1e4,u),this.Wa=fr("forwardChannelMaxRetries",2,u),this.wa=fr("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new us(u&&u.concurrentRequestLimit),this.Da=new dd,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ga.prototype,n.la=8,n.G=1,n.connect=function(u,m,_,I){dt(0),this.W=u,this.H=m||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=Wl(this,null,this.W),pr(this)};function Ot(u){if(Xs(u),u.G==3){var m=u.U++,_=yn(u.I);if(Je(_,"SID",u.K),Je(_,"RID",m),Je(_,"TYPE","terminate"),Lr(u,_),m=new Hn(u,u.j,m),m.L=2,m.v=hi(yn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.v,_=!0),_||(m.g=Kl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Ye(m)}ql(u)}function Qn(u){u.g&&(ya(u),u.g.cancel(),u.g=null)}function Xs(u){Qn(u),u.u&&(h.clearTimeout(u.u),u.u=null),to(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function pr(u){if(!gn(u.h)&&!u.s){u.s=!0;var m=u.Ga;De||ae(),se||(De(),se=!0),ye.add(m,u),u.B=0}}function fd(u,m){return Dl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=zn(S(u.Ga,u,m),Hl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const B=new Hn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=C(W),k(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(m+=I,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=gi(this,B,m),_=yn(this.I),Je(_,"RID",u),Je(_,"CVER",22),this.D&&Je(_,"X-HTTP-Session-Id",this.D),Lr(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(Vr(W)))+"&"+m:this.m&&mi(_,this.m,W)),da(this.h,B),this.Ua&&Je(_,"TYPE","init"),this.P?(Je(_,"$req",m),Je(_,"SID","null"),B.T=!0,qs(B,_,null)):qs(B,_,m),this.G=2}}else this.G==3&&(u?Zs(this,u):this.i.length==0||gn(this.h)||Zs(this))};function Zs(u,m){var _;m?_=m.l:_=u.U++;const I=yn(u.I);Je(I,"SID",u.K),Je(I,"RID",_),Je(I,"AID",u.T),Lr(u,I),u.m&&u.o&&mi(I,u.m,u.o),_=new Hn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=gi(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),da(u.h,_),qs(_,I,m)}function Lr(u,m){u.H&&ie(u.H,function(_,I){Je(m,I,_)}),u.l&&ui({},function(_,I){Je(m,I,_)})}function gi(u,m,_){_=Math.min(u.i.length,_);var I=u.l?S(u.l.Na,u.l,u):null;e:{var B=u.i;let W=-1;for(;;){const oe=["count="+_];W==-1?0<_?(W=B[0].g,oe.push("ofs="+W)):W=0:oe.push("ofs="+W);let Qe=!0;for(let _t=0;_t<_;_t++){let ze=B[_t].g;const kt=B[_t].map;if(ze-=W,0>ze)W=Math.max(0,B[_t].g-100),Qe=!1;else try{zl(kt,oe,"req"+ze+"_")}catch{I&&I(kt)}}if(Qe){I=oe.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,I}function ps(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;De||ae(),se||(De(),se=!0),ye.add(m,u),u.v=0}}function eo(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=zn(S(u.Fa,u),Hl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,$l(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=zn(S(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),Qn(this),$l(this))};function ya(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function $l(u){u.g=new Hn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=yn(u.qa);Je(m,"RID","rpc"),Je(m,"SID",u.K),Je(m,"AID",u.T),Je(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Je(m,"TO",u.ja),Je(m,"TYPE","xmlhttp"),Lr(u,m),u.m&&u.o&&mi(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=hi(yn(m)),_.m=null,_.P=!0,ua(_,u)}n.Za=function(){this.C!=null&&(this.C=null,Qn(this),eo(this),dt(19))};function to(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function no(u,m){var _=null;if(u.g==m){to(u),ya(u),u.g=null;var I=2}else if(Qt(u.h,m))_=m.D,bl(u.h,m),I=1;else return;if(u.G!=0){if(m.o)if(I==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var B=u.B;I=is(),vt(I,new zs(I,_)),pr(u)}else ps(u);else if(B=m.s,B==3||B==0&&0<m.X||!(I==1&&fd(u,m)||I==2&&eo(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),B){case 1:Mr(u,5);break;case 4:Mr(u,10);break;case 3:Mr(u,6);break;default:Mr(u,2)}}}function Hl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function Mr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),I=u.Xa;const B=!I;I=new br(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ds(I,"https"),hi(I),B?cd(I.toString(),_):Ul(I.toString(),_)}else dt(2);u.G=0,u.l&&u.l.sa(m),ql(u),Xs(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function ql(u){if(u.G=0,u.ka=[],u.l){const m=jl(u.h);(m.length!=0||u.i.length!=0)&&(D(u.ka,m),D(u.ka,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.ra()}}function Wl(u,m,_){var I=_ instanceof br?yn(_):new br(_);if(I.g!="")m&&(I.g=m+"."+I.g),ci(I,I.s);else{var B=h.location;I=B.protocol,m=m?m+"."+B.hostname:B.hostname,B=+B.port;var W=new br(null);I&&ds(W,I),m&&(W.g=m),B&&ci(W,B),_&&(W.l=_),I=W}return _=u.D,m=u.ya,_&&m&&Je(I,_,m),Je(I,"VER",u.la),Lr(u,I),I}function Kl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new tt(new jr({eb:_})):new tt(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function va(){}n=va.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ro(){}ro.prototype.g=function(u,m){return new Jt(u,m)};function Jt(u,m){yt.call(this),this.g=new ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Q(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Q(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new mr(this)}b(Jt,yt),Jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){Ot(this.g)},Jt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ta(u),u=_);m.i.push(new Ol(m.Ya++,u)),m.G==3&&pr(m)},Jt.prototype.N=function(){this.g.l=null,delete this.j,Ot(this.g),delete this.g,Jt.aa.N.call(this)};function Gl(u){ur.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(Gl,ur);function Ql(){Us.call(this),this.status=1}b(Ql,Us);function mr(u){this.g=u}b(mr,va),mr.prototype.ua=function(){vt(this.g,"a")},mr.prototype.ta=function(u){vt(this.g,new Gl(u))},mr.prototype.sa=function(u){vt(this.g,new Ql)},mr.prototype.ra=function(){vt(this.g,"b")},ro.prototype.createWebChannel=ro.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,R_=function(){return new ro},k_=function(){return is()},C_=cr,df={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},$s.NO_ERROR=0,$s.TIMEOUT=8,$s.HTTP_ERROR=6,Zu=$s,Pl.COMPLETE="complete",S_=Pl,Fs.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Ka=Fs,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,I_=tt}).apply(typeof Hu<"u"?Hu:typeof self<"u"?self:typeof window<"u"?window:{});const Ey="@firebase/firestore",wy="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Hf("@firebase/firestore");function ko(){return Ns.logLevel}function ue(n,...e){if(Ns.logLevel<=je.DEBUG){const t=e.map(Gf);Ns.debug(`Firestore (${Ko}): ${n}`,...t)}}function ti(n,...e){if(Ns.logLevel<=je.ERROR){const t=e.map(Gf);Ns.error(`Firestore (${Ko}): ${n}`,...t)}}function Vo(n,...e){if(Ns.logLevel<=je.WARN){const t=e.map(Gf);Ns.warn(`Firestore (${Ko}): ${n}`,...t)}}function Gf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${Ko}) INTERNAL ASSERTION FAILED: `+n;throw ti(e),new Error(e)}function Ke(n,e){n||Ie()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Ar{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ht.UNAUTHENTICATED))}shutdown(){}}class uk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ck{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Xr,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},h=p=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Xr)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new P_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Ht(e)}}class dk{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class hk{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new dk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ty{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fk{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Ln(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0);const i=l=>{l.error!=null&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.R;return this.R=l.token,ue("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ty(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new Ty(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=pk(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Me(n,e){return n<e?-1:n>e?1:0}function Lo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-62135596800,Sy=1e6;class It{static now(){return It.fromMillis(Date.now())}static fromDate(e){return It.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Sy);return new It(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iy)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sy}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Iy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new It(0,0))}static max(){return new Ce(new It(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy="__name__";class Er{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ie(),i===void 0?i=e.length-t:i>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Er.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Er.isNumericId(e),o=Er.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Er.extractNumericId(e).compare(Er.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ui.fromString(e.substring(4,e.length-2))}}class rt extends Er{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const mk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Er{construct(e,t,i){return new Lt(e,t,i)}static isValidIdentifier(e){return mk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Cy}static keyField(){return new Lt([Cy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(i+=h,o++):(l(),o++)}if(l(),c)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(t)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(rt.fromString(e))}static fromName(e){return new Ee(rt.fromString(e).popFirst(5))}static empty(){return new Ee(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=-1;function gk(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(i===1e9?new It(t+1,0):new It(t,i));return new $i(o,Ee.empty(),e)}function yk(n){return new $i(n.readTime,n.key,ol)}class $i{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $i(Ce.min(),Ee.empty(),ol)}static max(){return new $i(Ce.max(),Ee.empty(),ol)}}function vk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==_k)throw n;ue("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Y.reject(t)}static resolve(e){return new Y((t,i)=>{t(e)})}static reject(e){return new Y((t,i)=>{i(e)})}static waitFor(e){return new Y((t,i)=>{let o=0,l=0,c=!1;e.forEach(h=>{++o,h.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next(o=>o?Y.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new Y((i,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(E=>{c[y]=E,++h,h===l&&i(c)},E=>o(E))}})}static doWhile(e,t){return new Y((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function wk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Vc.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=-1;function Lc(n){return n==null}function hc(n){return n===0&&1/n==-1/0}function Tk(n){return typeof n=="number"&&Number.isInteger(n)&&!hc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="";function Ik(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ky(e)),e=Sk(n.get(t),e);return ky(e)}function Sk(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case x_:t+="";break;default:t+=l}}return t}function ky(n){return n+x_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function N_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,t){this.comparator=e,this.root=t||Vt.EMPTY}insert(e,t){return new lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vt.BLACK,null,null))}remove(e){return new lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qu(this.root,e,this.comparator,!0)}}class qu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??Vt.RED,this.left=o??Vt.EMPTY,this.right=l??Vt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new Vt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Vt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Vt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Vt.EMPTY=null,Vt.RED=!0,Vt.BLACK=!1;Vt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,i,o,l){return this}insert(e,t,i){return new Vt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Py(this.data.getIterator())}getIteratorFrom(e){return new Py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class Py{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new In([])}unionWith(e){let t=new St(Lt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Lo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new O_("Invalid base64 string: "+l):l}}(e);return new Mt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const Ck=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hi(n){if(Ke(!!n),typeof n=="string"){let e=0;const t=Ck.exec(n);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qi(n){return typeof n=="string"?Mt.fromBase64String(n):Mt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="server_timestamp",b_="__type__",j_="__previous_value__",V_="__local_write_time__";function Jf(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[b_])===null||t===void 0?void 0:t.stringValue)===D_}function Mc(n){const e=n.mapValue.fields[j_];return Jf(e)?Mc(e):e}function al(n){const e=Hi(n.mapValue.fields[V_].timestampValue);return new It(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,t,i,o,l,c,h,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y}}const fc="(default)";class ll{constructor(e,t){this.projectId=e,this.database=t||fc}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===fc}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_="__type__",Rk="__max__",Wu={mapValue:{}},M_="__vector__",pc="value";function Wi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jf(n)?4:Ak(n)?9007199254740991:Pk(n)?10:11:Ie()}function Cr(n,e){if(n===e)return!0;const t=Wi(n);if(t!==Wi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return al(n).isEqual(al(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Hi(o.timestampValue),h=Hi(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return qi(o.bytesValue).isEqual(qi(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return ft(o.geoPointValue.latitude)===ft(l.geoPointValue.latitude)&&ft(o.geoPointValue.longitude)===ft(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return ft(o.integerValue)===ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=ft(o.doubleValue),h=ft(l.doubleValue);return c===h?hc(c)===hc(h):isNaN(c)&&isNaN(h)}return!1}(n,e);case 9:return Lo(n.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Ry(c)!==Ry(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Cr(c[p],h[p])))return!1;return!0}(n,e);default:return Ie()}}function ul(n,e){return(n.values||[]).find(t=>Cr(t,e))!==void 0}function Mo(n,e){if(n===e)return 0;const t=Wi(n),i=Wi(e);if(t!==i)return Me(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return function(l,c){const h=ft(l.integerValue||l.doubleValue),p=ft(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Ay(n.timestampValue,e.timestampValue);case 4:return Ay(al(n),al(e));case 5:return Me(n.stringValue,e.stringValue);case 6:return function(l,c){const h=qi(l),p=qi(c);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const E=Me(h[y],p[y]);if(E!==0)return E}return Me(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const h=Me(ft(l.latitude),ft(c.latitude));return h!==0?h:Me(ft(l.longitude),ft(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return xy(n.arrayValue,e.arrayValue);case 10:return function(l,c){var h,p,y,E;const T=l.fields||{},S=c.fields||{},A=(h=T[pc])===null||h===void 0?void 0:h.arrayValue,b=(p=S[pc])===null||p===void 0?void 0:p.arrayValue,L=Me(((y=A==null?void 0:A.values)===null||y===void 0?void 0:y.length)||0,((E=b==null?void 0:b.values)===null||E===void 0?void 0:E.length)||0);return L!==0?L:xy(A,b)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Wu.mapValue&&c===Wu.mapValue)return 0;if(l===Wu.mapValue)return 1;if(c===Wu.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},E=Object.keys(y);p.sort(),E.sort();for(let T=0;T<p.length&&T<E.length;++T){const S=Me(p[T],E[T]);if(S!==0)return S;const A=Mo(h[p[T]],y[E[T]]);if(A!==0)return A}return Me(p.length,E.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function Ay(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=Hi(n),i=Hi(e),o=Me(t.seconds,i.seconds);return o!==0?o:Me(t.nanos,i.nanos)}function xy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Mo(t[o],i[o]);if(l)return l}return Me(t.length,i.length)}function Fo(n){return hf(n)}function hf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Hi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=hf(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${hf(t.fields[c])}`;return o+"}"}(n.mapValue):Ie()}function ec(n){switch(Wi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mc(n);return e?16+ec(e):16;case 5:return 2*n.stringValue.length;case 6:return qi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+ec(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Xi(i.fields,(l,c)=>{o+=l.length+ec(c)}),o}(n.mapValue);default:throw Ie()}}function ff(n){return!!n&&"integerValue"in n}function Yf(n){return!!n&&"arrayValue"in n}function Ny(n){return!!n&&"nullValue"in n}function Oy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tc(n){return!!n&&"mapValue"in n}function Pk(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[L_])===null||t===void 0?void 0:t.stringValue)===M_}function Xa(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Xi(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Xa(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xa(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ak(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Rk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.value=e}static empty(){return new fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!tc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xa(t)}setAll(e){let t=Lt.emptyPath(),i={},o=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=h.popLast()}c?i[h.lastSegment()]=Xa(c):o.push(h.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());tc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];tc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Xi(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new fn(Xa(this.value))}}function F_(n){const e=[];return Xi(n.fields,(t,i)=>{const o=new Lt([t]);if(tc(i)){const l=F_(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,i,o,l,c,h){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new qt(e,0,Ce.min(),Ce.min(),Ce.min(),fn.empty(),0)}static newFoundDocument(e,t,i,o){return new qt(e,1,t,Ce.min(),i,o,0)}static newNoDocument(e,t){return new qt(e,2,t,Ce.min(),Ce.min(),fn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Ce.min(),Ce.min(),fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,t){this.position=e,this.inclusive=t}}function Dy(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=Ee.comparator(Ee.fromName(c.referenceValue),t.key):i=Mo(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function by(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Cr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t="asc"){this.field=e,this.dir=t}}function xk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{}class Tt extends U_{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Ok(e,t,i):t==="array-contains"?new jk(e,i):t==="in"?new Vk(e,i):t==="not-in"?new Lk(e,i):t==="array-contains-any"?new Mk(e,i):new Tt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Dk(e,i):new bk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Mo(t,this.value)):t!==null&&Wi(this.value)===Wi(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends U_{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new kr(e,t)}matches(e){return z_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function z_(n){return n.op==="and"}function B_(n){return Nk(n)&&z_(n)}function Nk(n){for(const e of n.filters)if(e instanceof kr)return!1;return!0}function pf(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+Fo(n.value);if(B_(n))return n.filters.map(e=>pf(e)).join(",");{const e=n.filters.map(t=>pf(t)).join(",");return`${n.op}(${e})`}}function $_(n,e){return n instanceof Tt?function(i,o){return o instanceof Tt&&i.op===o.op&&i.field.isEqual(o.field)&&Cr(i.value,o.value)}(n,e):n instanceof kr?function(i,o){return o instanceof kr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,h)=>l&&$_(c,o.filters[h]),!0):!1}(n,e):void Ie()}function H_(n){return n instanceof Tt?function(t){return`${t.field.canonicalString()} ${t.op} ${Fo(t.value)}`}(n):n instanceof kr?function(t){return t.op.toString()+" {"+t.getFilters().map(H_).join(" ,")+"}"}(n):"Filter"}class Ok extends Tt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class Dk extends Tt{constructor(e,t){super(e,"in",t),this.keys=q_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bk extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=q_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function q_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class jk extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yf(t)&&ul(t.arrayValue,this.value)}}class Vk extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ul(this.value.arrayValue,t)}}class Lk extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ul(this.value.arrayValue,t)}}class Mk extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ul(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,t=null,i=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.le=null}}function jy(n,e=null,t=[],i=[],o=null,l=null,c=null){return new Fk(n,e,t,i,o,l,c)}function Xf(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>pf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Lc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Fo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Fo(i)).join(",")),e.le=t}return e.le}function Zf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!by(n.startAt,e.startAt)&&by(n.endAt,e.endAt)}function mf(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,i=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function Uk(n,e,t,i,o,l,c,h){return new Fc(n,e,t,i,o,l,c,h)}function Uc(n){return new Fc(n)}function Vy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zk(n){return n.collectionGroup!==null}function Za(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new St(Lt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(h=h.add(y.field))})}),h})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new gc(l,i))}),t.has(Lt.keyField().canonicalString())||e.he.push(new gc(Lt.keyField(),i))}return e.he}function wr(n){const e=ke(n);return e.Pe||(e.Pe=Bk(e,Za(n))),e.Pe}function Bk(n,e){if(n.limitType==="F")return jy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new gc(o.field,l)});const t=n.endAt?new mc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new mc(n.startAt.position,n.startAt.inclusive):null;return jy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gf(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zc(n,e){return Zf(wr(n),wr(e))&&n.limitType===e.limitType}function W_(n){return`${Xf(wr(n))}|lt:${n.limitType}`}function Ro(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>H_(o)).join(", ")}]`),Lc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Fo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Fo(o)).join(",")),`Target(${i})`}(wr(n))}; limitType=${n.limitType})`}function Bc(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ee.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Za(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,h,p){const y=Dy(c,h,p);return c.inclusive?y<=0:y<0}(i.startAt,Za(i),o)||i.endAt&&!function(c,h,p){const y=Dy(c,h,p);return c.inclusive?y>=0:y>0}(i.endAt,Za(i),o))}(n,e)}function $k(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function K_(n){return(e,t)=>{let i=!1;for(const o of Za(n)){const l=Hk(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function Hk(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?Mo(p,y):Ie()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return N_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new lt(Ee.comparator);function ni(){return qk}const G_=new lt(Ee.comparator);function Ga(...n){let e=G_;for(const t of n)e=e.insert(t.key,t);return e}function Q_(n){let e=G_;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function As(){return el()}function J_(){return el()}function el(){return new js(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wk=new lt(Ee.comparator),Kk=new St(Ee.comparator);function Ve(...n){let e=Kk;for(const t of n)e=e.add(t);return e}const Gk=new St(Me);function Qk(){return Gk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hc(e)?"-0":e}}function Y_(n){return{integerValue:""+n}}function Jk(n,e){return Tk(e)?Y_(e):ep(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function Yk(n,e,t){return n instanceof cl?function(o,l){const c={fields:{[b_]:{stringValue:D_},[V_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Jf(l)&&(l=Mc(l)),l&&(c.fields[j_]=l),{mapValue:c}}(t,e):n instanceof dl?Z_(n,e):n instanceof hl?eE(n,e):function(o,l){const c=X_(o,l),h=Ly(c)+Ly(o.Ie);return ff(c)&&ff(o.Ie)?Y_(h):ep(o.serializer,h)}(n,e)}function Xk(n,e,t){return n instanceof dl?Z_(n,e):n instanceof hl?eE(n,e):t}function X_(n,e){return n instanceof yc?function(i){return ff(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class cl extends $c{}class dl extends $c{constructor(e){super(),this.elements=e}}function Z_(n,e){const t=tE(e);for(const i of n.elements)t.some(o=>Cr(o,i))||t.push(i);return{arrayValue:{values:t}}}class hl extends $c{constructor(e){super(),this.elements=e}}function eE(n,e){let t=tE(e);for(const i of n.elements)t=t.filter(o=>!Cr(o,i));return{arrayValue:{values:t}}}class yc extends $c{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Ly(n){return ft(n.integerValue||n.doubleValue)}function tE(n){return Yf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,t){this.field=e,this.transform=t}}function eR(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof dl&&o instanceof dl||i instanceof hl&&o instanceof hl?Lo(i.elements,o.elements,Cr):i instanceof yc&&o instanceof yc?Cr(i.Ie,o.Ie):i instanceof cl&&o instanceof cl}(n.transform,e.transform)}class tR{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Hc{}function nE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tp(n.key,rr.none()):new _l(n.key,n.data,rr.none());{const t=n.data,i=fn.empty();let o=new St(Lt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Zi(n.key,i,new In(o.toArray()),rr.none())}}function nR(n,e,t){n instanceof _l?function(o,l,c){const h=o.value.clone(),p=Fy(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Zi?function(o,l,c){if(!nc(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Fy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(rE(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function tl(n,e,t,i){return n instanceof _l?function(l,c,h,p){if(!nc(l.precondition,c))return h;const y=l.value.clone(),E=Uy(l.fieldTransforms,p,c);return y.setAll(E),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Zi?function(l,c,h,p){if(!nc(l.precondition,c))return h;const y=Uy(l.fieldTransforms,p,c),E=c.data;return E.setAll(rE(l)),E.setAll(y),c.convertToFoundDocument(c.version,E).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(n,e,t,i):function(l,c,h){return nc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h}(n,e,t)}function rR(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=X_(i.transform,o||null);l!=null&&(t===null&&(t=fn.empty()),t.set(i.field,l))}return t||null}function My(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Lo(i,o,(l,c)=>eR(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _l extends Hc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zi extends Hc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function rE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Fy(n,e,t){const i=new Map;Ke(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);i.set(l.field,Xk(c,h,t[o]))}return i}function Uy(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,Yk(l,c,e))}return i}class tp extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iR extends Hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&nR(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=J_();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=nE(c,h);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Lo(this.mutations,e.mutations,(t,i)=>My(t,i))&&Lo(this.baseMutations,e.baseMutations,(t,i)=>My(t,i))}}class np{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=function(){return Wk}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new np(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt,Be;function lR(n){switch(n){case ee.OK:return Ie();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ie()}}function iE(n){if(n===void 0)return ti("GRPC error has no .code"),ee.UNKNOWN;switch(n){case gt.OK:return ee.OK;case gt.CANCELLED:return ee.CANCELLED;case gt.UNKNOWN:return ee.UNKNOWN;case gt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case gt.INTERNAL:return ee.INTERNAL;case gt.UNAVAILABLE:return ee.UNAVAILABLE;case gt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case gt.NOT_FOUND:return ee.NOT_FOUND;case gt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case gt.ABORTED:return ee.ABORTED;case gt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case gt.DATA_LOSS:return ee.DATA_LOSS;default:return Ie()}}(Be=gt||(gt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Ui([4294967295,4294967295],0);function zy(n){const e=uR().encode(n),t=new T_;return t.update(e),new Uint8Array(t.digest())}function By(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ui([t,i],0),new Ui([o,l],0)]}class rp{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qa(`Invalid padding: ${t}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ui.fromNumber(this.Ee)}Ae(e,t,i){let o=e.add(t.multiply(Ui.fromNumber(i)));return o.compare(cR)===1&&(o=new Ui([o.getBits(0),o.getBits(1)],0)),o.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=zy(e),[i,o]=By(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(i,o,l);if(!this.Re(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new rp(l,o,t);return i.forEach(h=>c.insert(h)),c}insert(e){if(this.Ee===0)return;const t=zy(e),[i,o]=By(t);for(let l=0;l<this.hashCount;l++){const c=this.Ae(i,o,l);this.Ve(c)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,El.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new qc(Ce.min(),o,new lt(Me),ni(),Ve())}}class El{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new El(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,o){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=o}}class sE{constructor(e,t){this.targetId=e,this.ge=t}}class oE{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class $y{constructor(){this.pe=0,this.ye=Hy(),this.we=Mt.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ve(),t=Ve(),i=Ve();return this.ye.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ie()}}),new El(this.we,this.Se,e,t,i)}Me(){this.be=!1,this.ye=Hy()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ke(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class dR{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ni(),this.$e=Ku(),this.Ke=Ku(),this.Ue=new lt(Me)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,o)=>{this.Je(o)&&t(o)})}Ze(e){const t=e.targetId,i=e.ge.count,o=this.Xe(t);if(o){const l=o.target;if(mf(l))if(i===0){const c=new Ee(l.path);this.ze(t,c,qt.newNoDocument(c,Ce.min()))}else Ke(i===1);else{const c=this.et(t);if(c!==i){const h=this.tt(e),p=h?this.nt(h,e,c):1;if(p!==0){this.Ye(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,y)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=qi(i).toUint8Array()}catch(p){if(p instanceof O_)return Vo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new rp(c,o,l)}catch(p){return Vo(p instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ee===0?null:h}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.ke.it(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.ze(t,l,null),o++)}),o}ot(e){const t=new Map;this.qe.forEach((l,c)=>{const h=this.Xe(c);if(h){if(l.current&&mf(h.target)){const p=new Ee(h.target.path);this._t(p).has(c)||this.ut(c,p)||this.ze(c,p,qt.newNoDocument(p,e))}l.ve&&(t.set(c,l.Fe()),l.Me())}});let i=Ve();this.Ke.forEach((l,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.Xe(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(l))}),this.Qe.forEach((l,c)=>c.setReadTime(e));const o=new qc(e,t,this.Ue,this.Qe,i);return this.Qe=ni(),this.$e=Ku(),this.Ke=Ku(),this.Ue=new lt(Me),o}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const o=this.He(e);this.ut(e,t)?o.xe(t,1):o.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new $y,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new St(Me),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new St(Me),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new $y),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Ku(){return new lt(Ee.comparator)}function Hy(){return new lt(Ee.comparator)}const hR={asc:"ASCENDING",desc:"DESCENDING"},fR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pR={and:"AND",or:"OR"};class mR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yf(n,e){return n.useProto3Json||Lc(e)?e:{value:e}}function vc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gR(n,e){return vc(n,e.toTimestamp())}function Tr(n){return Ke(!!n),Ce.fromTimestamp(function(t){const i=Hi(t);return new It(i.seconds,i.nanos)}(n))}function ip(n,e){return vf(n,e).canonicalString()}function vf(n,e){const t=function(o){return new rt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lE(n){const e=rt.fromString(n);return Ke(fE(e)),e}function _f(n,e){return ip(n.databaseId,e.path)}function qh(n,e){const t=lE(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(cE(t))}function uE(n,e){return ip(n.databaseId,e)}function yR(n){const e=lE(n);return e.length===4?rt.emptyPath():cE(e)}function Ef(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cE(n){return Ke(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function qy(n,e,t){return{name:_f(n,e),fields:t.value.mapValue.fields}}function vR(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,E){return y.useProto3Json?(Ke(E===void 0||typeof E=="string"),Mt.fromBase64String(E||"")):(Ke(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Mt.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(y){const E=y.code===void 0?ee.UNKNOWN:iE(y.code);return new ge(E,y.message||"")}(c);t=new oE(i,o,l,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=qh(n,i.document.name),l=Tr(i.document.updateTime),c=i.document.createTime?Tr(i.document.createTime):Ce.min(),h=new fn({mapValue:{fields:i.document.fields}}),p=qt.newFoundDocument(o,l,c,h),y=i.targetIds||[],E=i.removedTargetIds||[];t=new rc(y,E,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=qh(n,i.document),l=i.readTime?Tr(i.readTime):Ce.min(),c=qt.newNoDocument(o,l),h=i.removedTargetIds||[];t=new rc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=qh(n,i.document),l=i.removedTargetIds||[];t=new rc([],l,o,null)}else{if(!("filter"in e))return Ie();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new aR(o,l),h=i.targetId;t=new sE(h,c)}}return t}function _R(n,e){let t;if(e instanceof _l)t={update:qy(n,e.key,e.value)};else if(e instanceof tp)t={delete:_f(n,e.key)};else if(e instanceof Zi)t={update:qy(n,e.key,e.data),updateMask:PR(e.fieldMask)};else{if(!(e instanceof iR))return Ie();t={verify:_f(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const h=c.transform;if(h instanceof cl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof dl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof hl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof yc)return{fieldPath:c.field.canonicalString(),increment:h.Ie};throw Ie()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:gR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie()}(n,e.precondition)),t}function ER(n,e){return n&&n.length>0?(Ke(e!==void 0),n.map(t=>function(o,l){let c=o.updateTime?Tr(o.updateTime):Tr(l);return c.isEqual(Ce.min())&&(c=Tr(l)),new tR(c,o.transformResults||[])}(t,e))):[]}function wR(n,e){return{documents:[uE(n,e.path)]}}function TR(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uE(n,o);const l=function(y){if(y.length!==0)return hE(kr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(E=>function(S){return{field:Po(S.field),direction:CR(S.dir)}}(E))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=yf(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ht:t,parent:o}}function IR(n){let e=yR(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];t.where&&(l=function(T){const S=dE(T);return S instanceof kr&&B_(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(T){return T.map(S=>function(b){return new gc(Ao(b.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(S))}(t.orderBy));let h=null;t.limit&&(h=function(T){let S;return S=typeof T=="object"?T.value:T,Lc(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(T){const S=!!T.before,A=T.values||[];return new mc(A,S)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const S=!T.before,A=T.values||[];return new mc(A,S)}(t.endAt)),Uk(e,o,c,l,h,"F",p,y)}function SR(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ao(t.unaryFilter.field);return Tt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Ao(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Ao(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ao(t.unaryFilter.field);return Tt.create(c,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return Tt.create(Ao(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return kr.create(t.compositeFilter.filters.map(i=>dE(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function CR(n){return hR[n]}function kR(n){return fR[n]}function RR(n){return pR[n]}function Po(n){return{fieldPath:n.canonicalString()}}function Ao(n){return Lt.fromServerFormat(n.fieldPath)}function hE(n){return n instanceof Tt?function(t){if(t.op==="=="){if(Oy(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NAN"}};if(Ny(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Oy(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NAN"}};if(Ny(t.value))return{unaryFilter:{field:Po(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Po(t.field),op:kR(t.op),value:t.value}}}(n):n instanceof kr?function(t){const i=t.getFilters().map(o=>hE(o));return i.length===1?i[0]:{compositeFilter:{op:RR(t.op),filters:i}}}(n):Ie()}function PR(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t,i,o,l=Ce.min(),c=Ce.min(),h=Mt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.Tt=e}}function xR(n){const e=IR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Tn=new OR}addToCollectionParentIndex(e,t){return this.Tn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve($i.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve($i.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class OR{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new St(rt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new St(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pE=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(pE,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Uo(0)}static Un(){return new Uo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LruGarbageCollector",DR=1048576;function Gy([n,e],[t,i]){const o=Me(n,t);return o===0?Me(e,i):o}class bR{constructor(e){this.Hn=e,this.buffer=new St(Gy),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Gy(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jR{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ue(Ky,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?ue(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await Go(t)}await this.er(3e5)})}}class VR{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(Vc.ae);const i=new bR(t);return this.tr.forEachTarget(e,o=>i.Zn(o.sequenceNumber)).next(()=>this.tr.rr(e,o=>i.Zn(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(Wy)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wy):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,o,l,c,h,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(i=T,h=Date.now(),this.removeTargets(e,i,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),ko()<=je.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-E}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-E}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function LR(n,e){return new VR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(){this.changes=new js(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&tl(i.mutation,o,In.empty(),It.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){const o=As();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Ga();return l.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=As();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,i,o){let l=ni();const c=el(),h=function(){return el()}();return t.forEach((p,y)=>{const E=i.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Zi)?l=l.insert(y.key,y):E!==void 0?(c.set(y.key,E.mutation.getFieldMask()),tl(E.mutation,y,E.mutation.getFieldMask(),It.now())):c.set(y.key,In.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,E)=>c.set(y,E)),t.forEach((y,E)=>{var T;return h.set(y,new FR(E,(T=c.get(y))!==null&&T!==void 0?T:null))}),h))}recalculateAndSaveOverlays(e,t){const i=el();let o=new lt((c,h)=>c-h),l=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let E=i.get(p)||In.empty();E=h.applyToLocalView(y,E),i.set(p,E);const T=(o.get(h.batchId)||Ve()).add(p);o=o.insert(h.batchId,T)})}).next(()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,E=p.value,T=J_();E.forEach(S=>{if(!l.has(S)){const A=nE(t.get(S),i.get(S));A!==null&&T.set(S,A),l=l.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Y.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):Y.resolve(As());let h=ol,p=l;return c.next(y=>Y.forEach(y,(E,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),l.get(E)?Y.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{p=p.insert(E,S)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Ve())).next(E=>({batchId:h,changes:Q_(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(i=>{let o=Ga();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Ga();return this.indexManager.getCollectionParents(e,l).next(h=>Y.forEach(h,p=>{const y=function(T,S){return new Fc(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(E=>{E.forEach((T,S)=>{c=c.insert(T,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,y)=>{const E=y.getKey();c.get(E)===null&&(c=c.insert(E,qt.newInvalidDocument(E)))});let h=Ga();return c.forEach((p,y)=>{const E=l.get(p);E!==void 0&&tl(E.mutation,y,In.empty(),It.now()),Bc(t,y)&&(h=h.insert(p,y))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Y.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:Tr(o.createTime)}}(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(o){return{name:o.name,query:xR(o.bundledQuery),readTime:Tr(o.readTime)}}(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.overlays=new lt(Ee.comparator),this.Rr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=As();return Y.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.Et(e,t,l)}),Y.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Rr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const o=As(),l=t.length+1,c=new Ee(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return Y.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new lt((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let E=l.get(y.largestBatchId);E===null&&(E=As(),l=l.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=As(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=o)););return Y.resolve(h)}Et(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Rr.get(o.largestBatchId).delete(i.key);this.Rr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new oR(t,i));let l=this.Rr.get(t);l===void 0&&(l=Ve(),this.Rr.set(t,l)),this.Rr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(){this.Vr=new St(xt.mr),this.gr=new St(xt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new xt(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new xt(e,t))}Sr(e,t){e.forEach(i=>this.removeReference(i,t))}br(e){const t=new Ee(new rt([])),i=new xt(t,e),o=new xt(t,e+1),l=[];return this.gr.forEachInRange([i,o],c=>{this.wr(c),l.push(c.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Ee(new rt([])),i=new xt(t,e),o=new xt(t,e+1);let l=Ve();return this.gr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new xt(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Ee.comparator(e.key,t.key)||Me(e.Cr,t.Cr)}static pr(e,t){return Me(e.Cr,t.Cr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new St(xt.mr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new sR(l,t,i,o);this.mutationQueue.push(c);for(const h of o)this.Mr=this.Mr.add(new xt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Y.resolve(c)}lookupMutationBatch(e,t){return Y.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Nr(i),l=o<0?0:o;return Y.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Qf:this.Fr-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xt(t,0),o=new xt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([i,o],c=>{const h=this.Or(c.Cr);l.push(h)}),Y.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Me);return t.forEach(o=>{const l=new xt(o,0),c=new xt(o,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,c],h=>{i=i.add(h.Cr)})}),Y.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ee.isDocumentKey(l)||(l=l.child(""));const c=new xt(new Ee(l),0);let h=new St(Me);return this.Mr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.Cr)),!0)},c),Y.resolve(this.Br(h))}Br(e){const t=[];return e.forEach(i=>{const o=this.Or(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ke(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Y.forEach(t.mutations,o=>{const l=new xt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new xt(t,0),o=this.Mr.firstAfterOrEqual(i);return Y.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.kr=e,this.docs=function(){return new lt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let i=ni();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():qt.newInvalidDocument(o))}),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=ni();const c=t.path,h=new Ee(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:E}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||vk(yk(E),i)<=0||(o.has(E.key)||Bc(t,E))&&(l=l.insert(E.key,E.mutableCopy()))}return Y.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Ie()}qr(e,t){return Y.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new WR(this)}getSize(e){return Y.resolve(this.size)}}class WR extends MR{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.Ir.addEntry(e,o)):this.Ir.removeEntry(i)}),Y.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.persistence=e,this.Qr=new js(t=>Xf(t),Zf),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.$r=0,this.Kr=new sp,this.targetCount=0,this.Ur=Uo.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,o)=>t(o)),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),Y.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Uo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.zn(t),Y.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.br(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.Qr.forEach((c,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.Qr.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)}),Y.waitFor(l).next(()=>o)}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.Kr.Sr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),Y.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Kr.br(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Vc(0),this.zr=!1,this.zr=!0,this.jr=new $R,this.referenceDelegate=e(this),this.Hr=new KR(this),this.indexManager=new NR,this.remoteDocumentCache=function(o){return new qR(o)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new AR(t),this.Yr=new zR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new BR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new HR(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){ue("MemoryPersistence","Starting transaction:",e);const o=new GR(this.Gr.next());return this.referenceDelegate.Zr(),i(o).next(l=>this.referenceDelegate.Xr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}ei(e,t){return Y.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class GR extends Ek{constructor(e){super(),this.currentSequenceNumber=e}}class op{constructor(e){this.persistence=e,this.ti=new sp,this.ni=null}static ri(e){return new op(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Y.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(o=>this.ii.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ii.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.ii,i=>{const o=Ee.fromPath(i);return this.si(e,o).next(l=>{l||t.removeEntry(o,Ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Y.or([()=>Y.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class _c{constructor(e,t){this.persistence=e,this.oi=new js(i=>Ik(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=LR(this,t)}static ri(e,t){return new _c(e,t)}Zr(){}Xr(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return Y.forEach(this.oi,(i,o)=>this.ar(e,i,o).next(l=>l?Y.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.qr(e,c=>this.ar(e,c,t).next(h=>{h||(i++,l.removeEntry(c,Ce.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Y.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ec(e.data.value)),t}ar(e,t,i){return Y.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.oi.get(t);return Y.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=o}static Yi(e,t){let i=Ve(),o=Ve();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new ap(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return $S()?8:wk(Wt())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ss(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new QR;return this._s(e,t,c).next(h=>{if(l.result=h,this.Xi)return this.us(e,t,c,h.size)})}).next(()=>l.result)}us(e,t,i,o){return i.documentReadCount<this.es?(ko()<=je.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Y.resolve()):(ko()<=je.DEBUG&&ue("QueryEngine","Query:",Ro(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ts*o?(ko()<=je.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):Y.resolve())}rs(e,t){if(Vy(t))return Y.resolve(null);let i=wr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=gf(t,null,"F"),i=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ve(...l);return this.ns.getDocuments(e,c).next(h=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.cs(t,h);return this.ls(t,y,c,p.readTime)?this.rs(e,gf(t,null,"F")):this.hs(e,y,t,p)}))})))}ss(e,t,i,o){return Vy(t)||o.isEqual(Ce.min())?Y.resolve(null):this.ns.getDocuments(e,i).next(l=>{const c=this.cs(t,l);return this.ls(t,c,i,o)?Y.resolve(null):(ko()<=je.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.hs(e,c,t,gk(o,ol)).next(h=>h))})}cs(e,t){let i=new St(K_(e));return t.forEach((o,l)=>{Bc(e,l)&&(i=i.add(l))}),i}ls(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}_s(e,t,i){return ko()<=je.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ns.getDocumentsMatchingQuery(e,t,$i.min(),i)}hs(e,t,i,o){return this.ns.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="LocalStore",YR=3e8;class XR{constructor(e,t,i,o){this.persistence=e,this.Ps=t,this.serializer=o,this.Ts=new lt(Me),this.Is=new js(l=>Xf(l),Zf),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new UR(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ZR(n,e,t,i){return new XR(n,e,t,i)}async function gE(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],h=[];let p=Ve();for(const y of o){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of l){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Rs:y,removedBatchIds:c,addedBatchIds:h}))})})}function e0(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(h,p,y,E){const T=y.batch,S=T.keys();let A=Y.resolve();return S.forEach(b=>{A=A.next(()=>E.getEntry(p,b)).next(L=>{const D=y.docVersions.get(b);Ke(D!==null),L.version.compareTo(D)<0&&(T.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),E.addEntry(L)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(p,T))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let p=Ve();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function yE(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function t0(n,e){const t=ke(n),i=e.snapshotVersion;let o=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.ds.newChangeBuffer({trackRemovals:!0});o=t.Ts;const h=[];e.targetChanges.forEach((E,T)=>{const S=o.get(T);if(!S)return;h.push(t.Hr.removeMatchingKeys(l,E.removedDocuments,T).next(()=>t.Hr.addMatchingKeys(l,E.addedDocuments,T)));let A=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(Mt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):E.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(E.resumeToken,i)),o=o.insert(T,A),function(L,D,F){return L.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=YR?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(S,A,E)&&h.push(t.Hr.updateTargetData(l,A))});let p=ni(),y=Ve();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,E))}),h.push(n0(l,c,e.documentUpdates).next(E=>{p=E.Vs,y=E.fs})),!i.isEqual(Ce.min())){const E=t.Hr.getLastRemoteSnapshotVersion(l).next(T=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,i));h.push(E)}return Y.waitFor(h).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ts=o,l))}function n0(n,e,t){let i=Ve(),o=Ve();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=ni();return t.forEach((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ue(lp,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Vs:c,fs:o}})}function r0(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Qf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function i0(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Hr.getTargetData(i,e).next(l=>l?(o=l,Y.resolve(o)):t.Hr.allocateTargetId(i).next(c=>(o=new Vi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ts.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function wf(n,e,t){const i=ke(n),o=i.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!Qo(c))throw c;ue(lp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ts=i.Ts.remove(e),i.Is.delete(o.target)}function Qy(n,e,t){const i=ke(n);let o=Ce.min(),l=Ve();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,E){const T=ke(p),S=T.Is.get(E);return S!==void 0?Y.resolve(T.Ts.get(S)):T.Hr.getTargetData(y,E)}(i,c,wr(e)).next(h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(c,h.targetId).next(p=>{l=p})}).next(()=>i.Ps.getDocumentsMatchingQuery(c,e,t?o:Ce.min(),t?l:Ve())).next(h=>(s0(i,$k(e),h),{documents:h,gs:l})))}function s0(n,e,t){let i=n.Es.get(e)||Ce.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.Es.set(e,i)}class Jy{constructor(){this.activeTargetIds=Qk()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class o0{constructor(){this.ho=new Jy,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Jy,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="ConnectivityMonitor";class Xy{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ue(Yy,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ue(Yy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gu=null;function Tf(){return Gu===null?Gu=function(){return 268435456+Math.round(2147483648*Math.random())}():Gu++,"0x"+Gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",l0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class u0{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${o}`,this.wo=this.databaseId.database===fc?`project_id=${i}`:`project_id=${i}&database_id=${o}`}So(e,t,i,o,l){const c=Tf(),h=this.bo(e,t.toUriEncodedString());ue(Wh,`Sending RPC '${e}' ${c}:`,h,i);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,o,l),this.vo(e,h,p,i).then(y=>(ue(Wh,`Received RPC '${e}' ${c}: `,y),y),y=>{throw Vo(Wh,`RPC '${e}' ${c} failed with error: `,y,"url: ",h,"request:",i),y})}Co(e,t,i,o,l,c){return this.So(e,t,i,o,l)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ko}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}bo(e,t){const i=l0[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $t="WebChannelConnection";class d0 extends u0{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,o){const l=Tf();return new Promise((c,h)=>{const p=new I_;p.setWithCredentials(!0),p.listenOnce(S_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Zu.NO_ERROR:const E=p.getResponseJson();ue($t,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(E)),c(E);break;case Zu.TIMEOUT:ue($t,`RPC '${e}' ${l} timed out`),h(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zu.HTTP_ERROR:const T=p.getStatus();if(ue($t,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const A=S==null?void 0:S.error;if(A&&A.status&&A.message){const b=function(D){const F=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(F)>=0?F:ee.UNKNOWN}(A.status);h(new ge(b,A.message))}else h(new ge(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ue($t,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);ue($t,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}Wo(e,t,i){const o=Tf(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=R_(),h=k_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const E=l.join("");ue($t,`Creating RPC '${e}' stream ${o}: ${E}`,p);const T=c.createWebChannel(E,p);let S=!1,A=!1;const b=new c0({Fo:D=>{A?ue($t,`Not sending because RPC '${e}' stream ${o} is closed:`,D):(S||(ue($t,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),ue($t,`RPC '${e}' stream ${o} sending:`,D),T.send(D))},Mo:()=>T.close()}),L=(D,F,Q)=>{D.listen(F,G=>{try{Q(G)}catch(te){setTimeout(()=>{throw te},0)}})};return L(T,Ka.EventType.OPEN,()=>{A||(ue($t,`RPC '${e}' stream ${o} transport opened.`),b.Qo())}),L(T,Ka.EventType.CLOSE,()=>{A||(A=!0,ue($t,`RPC '${e}' stream ${o} transport closed`),b.Ko())}),L(T,Ka.EventType.ERROR,D=>{A||(A=!0,Vo($t,`RPC '${e}' stream ${o} transport errored:`,D),b.Ko(new ge(ee.UNAVAILABLE,"The operation could not be completed")))}),L(T,Ka.EventType.MESSAGE,D=>{var F;if(!A){const Q=D.data[0];Ke(!!Q);const G=Q,te=(G==null?void 0:G.error)||((F=G[0])===null||F===void 0?void 0:F.error);if(te){ue($t,`RPC '${e}' stream ${o} received error:`,te);const K=te.status;let ie=function(P){const k=gt[P];if(k!==void 0)return iE(k)}(K),x=te.message;ie===void 0&&(ie=ee.INTERNAL,x="Unknown error status: "+K+" with message "+te.message),A=!0,b.Ko(new ge(ie,x)),T.close()}else ue($t,`RPC '${e}' stream ${o} received:`,Q),b.Uo(Q)}}),L(h,C_.STAT_EVENT,D=>{D.stat===df.PROXY?ue($t,`RPC '${e}' stream ${o} detected buffering proxy`):D.stat===df.NOPROXY&&ue($t,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}}function Kh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n){return new mR(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=o,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),o=Math.max(0,t-i);o>0&&ue("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,o,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="PersistentStream";class _E{constructor(e,t,i,o,l,c,h,p){this.Ti=e,this.n_=i,this.r_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new vE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ti(t.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.i_===t&&this.V_(i,o)},i=>{e(()=>{const o=new ge(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(o)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(o=>{i(()=>this.m_(o))}),this.stream.onMessage(o=>{i(()=>++this.__==1?this.g_(o):this.onNext(o))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ue(Zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ue(Zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class h0 extends _E{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=vR(this.serializer,e),i=function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?Tr(c.readTime):Ce.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=Ef(this.serializer),t.addTarget=function(l,c){let h;const p=c.target;if(h=mf(p)?{documents:wR(l,p)}:{query:TR(l,p).ht},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=aE(l,c.resumeToken);const y=yf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ce.min())>0){h.readTime=vc(l,c.snapshotVersion.toTimestamp());const y=yf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h}(this.serializer,e);const i=SR(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=Ef(this.serializer),t.removeTarget=e,this.I_(t)}}class f0 extends _E{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=ER(e.writeResults,e.commitTime),i=Tr(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=Ef(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>_R(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class m0 extends p0{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.F_=!1}M_(){if(this.F_)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,i,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.So(e,vf(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ee.UNKNOWN,l.toString())})}Co(e,t,i,o,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.Co(e,vf(t,i),o,c,h,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(ee.UNKNOWN,c.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class g0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(ti(t),this.N_=!1):ue("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class y0{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(c=>{i.enqueueAndForget(async()=>{Vs(this)&&(ue(Os,"Restarting streams for network reachability change."),await async function(p){const y=ke(p);y.W_.add(4),await wl(y),y.j_.set("Unknown"),y.W_.delete(4),await Kc(y)}(this))})}),this.j_=new g0(i,o)}}async function Kc(n){if(Vs(n))for(const e of n.G_)await e(!0)}async function wl(n){for(const e of n.G_)await e(!1)}function EE(n,e){const t=ke(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),hp(t)?dp(t):Jo(t).c_()&&cp(t,e))}function up(n,e){const t=ke(n),i=Jo(t);t.U_.delete(e),i.c_()&&wE(t,e),t.U_.size===0&&(i.c_()?i.P_():Vs(t)&&t.j_.set("Unknown"))}function cp(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).y_(e)}function wE(n,e){n.H_.Ne(e),Jo(n).w_(e)}function dp(n){n.H_=new dR({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.j_.B_()}function hp(n){return Vs(n)&&!Jo(n).u_()&&n.U_.size>0}function Vs(n){return ke(n).W_.size===0}function TE(n){n.H_=void 0}async function v0(n){n.j_.set("Online")}async function _0(n){n.U_.forEach((e,t)=>{cp(n,e)})}async function E0(n,e){TE(n),hp(n)?(n.j_.q_(e),dp(n)):n.j_.set("Unknown")}async function w0(n,e,t){if(n.j_.set("Online"),e instanceof oE&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const h of l.targetIds)o.U_.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.U_.delete(h),o.H_.removeTarget(h))}(n,e)}catch(i){ue(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ec(n,i)}else if(e instanceof rc?n.H_.We(e):e instanceof sE?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Ce.min()))try{const i=await yE(n.localStore);t.compareTo(i)>=0&&await function(l,c){const h=l.H_.ot(c);return h.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const E=l.U_.get(y);E&&l.U_.set(y,E.withResumeToken(p.resumeToken,c))}}),h.targetMismatches.forEach((p,y)=>{const E=l.U_.get(p);if(!E)return;l.U_.set(p,E.withResumeToken(Mt.EMPTY_BYTE_STRING,E.snapshotVersion)),wE(l,p);const T=new Vi(E.target,p,y,E.sequenceNumber);cp(l,T)}),l.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){ue(Os,"Failed to raise snapshot:",i),await Ec(n,i)}}async function Ec(n,e,t){if(!Qo(e))throw e;n.W_.add(1),await wl(n),n.j_.set("Offline"),t||(t=()=>yE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ue(Os,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Kc(n)})}function IE(n,e){return e().catch(t=>Ec(n,t,e))}async function Gc(n){const e=ke(n),t=Ki(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Qf;for(;T0(e);)try{const o=await r0(e.localStore,i);if(o===null){e.K_.length===0&&t.P_();break}i=o.batchId,I0(e,o)}catch(o){await Ec(e,o)}SE(e)&&CE(e)}function T0(n){return Vs(n)&&n.K_.length<10}function I0(n,e){n.K_.push(e);const t=Ki(n);t.c_()&&t.S_&&t.b_(e.mutations)}function SE(n){return Vs(n)&&!Ki(n).u_()&&n.K_.length>0}function CE(n){Ki(n).start()}async function S0(n){Ki(n).C_()}async function C0(n){const e=Ki(n);for(const t of n.K_)e.b_(t.mutations)}async function k0(n,e,t){const i=n.K_.shift(),o=np.from(i,e,t);await IE(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Gc(n)}async function R0(n,e){e&&Ki(n).S_&&await async function(i,o){if(function(c){return lR(c)&&c!==ee.ABORTED}(o.code)){const l=i.K_.shift();Ki(i).h_(),await IE(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Gc(i)}}(n,e),SE(n)&&CE(n)}async function ev(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ue(Os,"RemoteStore received new credentials");const i=Vs(t);t.W_.add(3),await wl(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Kc(t)}async function P0(n,e){const t=ke(n);e?(t.W_.delete(2),await Kc(t)):e||(t.W_.add(2),await wl(t),t.j_.set("Unknown"))}function Jo(n){return n.J_||(n.J_=function(t,i,o){const l=ke(t);return l.M_(),new h0(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{xo:v0.bind(null,n),No:_0.bind(null,n),Lo:E0.bind(null,n),p_:w0.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),hp(n)?dp(n):n.j_.set("Unknown")):(await n.J_.stop(),TE(n))})),n.J_}function Ki(n){return n.Y_||(n.Y_=function(t,i,o){const l=ke(t);return l.M_(),new f0(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:S0.bind(null,n),Lo:R0.bind(null,n),D_:C0.bind(null,n),v_:k0.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Gc(n)):(await n.Y_.stop(),n.K_.length>0&&(ue(Os,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,h=new fp(e,t,c,o,l);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pp(n,e){if(ti("AsyncQueue",`${e}: ${n}`),Qo(n))return new ge(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{static emptySet(e){return new No(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Ga(),this.sortedSet=new lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof No)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new No;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.Z_=new lt(Ee.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class zo{constructor(e,t,i,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(h=>{c.push({type:0,doc:h})}),new zo(e,t,No.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class x0{constructor(){this.queries=nv(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const o=ke(t),l=o.queries;o.queries=nv(),l.forEach((c,h)=>{for(const p of h.ta)p.onError(i)})})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function nv(){return new js(n=>W_(n),zc)}async function mp(n,e){const t=ke(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.na()&&e.ra()&&(i=2):(l=new A0,i=e.ra()?0:1);try{switch(i){case 0:l.ea=await t.onListen(o,!0);break;case 1:l.ea=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=pp(c,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&yp(t)}async function gp(n,e){const t=ke(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.ta.indexOf(e);c>=0&&(l.ta.splice(c,1),l.ta.length===0?o=e.ra()?0:1:!l.na()&&e.ra()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function N0(n,e){const t=ke(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.ta)h.oa(o)&&(i=!0);c.ea=o}}i&&yp(t)}function O0(n,e,t){const i=ke(n),o=i.queries.get(e);if(o)for(const l of o.ta)l.onError(t);i.queries.delete(e)}function yp(n){n.ia.forEach(e=>{e.next()})}var If,rv;(rv=If||(If={}))._a="default",rv.Cache="cache";class vp{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==If.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.key=e}}class RE{constructor(e){this.key=e}}class D0{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=K_(e),this.wa=new No(this.ya)}get Sa(){return this.fa}ba(e,t){const i=t?t.Da:new tv,o=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,T)=>{const S=o.get(E),A=Bc(this.query,T)?T:null,b=!!S&&this.mutatedKeys.has(S.key),L=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let D=!1;S&&A?S.data.isEqual(A.data)?b!==L&&(i.track({type:3,doc:A}),D=!0):this.va(S,A)||(i.track({type:2,doc:A}),D=!0,(p&&this.ya(A,p)>0||y&&this.ya(A,y)<0)&&(h=!0)):!S&&A?(i.track({type:0,doc:A}),D=!0):S&&!A&&(i.track({type:1,doc:S}),D=!0,(p||y)&&(h=!0)),D&&(A?(c=c.add(A),l=L?l.add(E):l.delete(E)):(c=c.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const E=this.query.limitType==="F"?c.last():c.first();c=c.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{wa:c,Da:i,ls:h,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const c=e.Da.X_();c.sort((E,T)=>function(A,b){const L=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return L(A)-L(b)}(E.type,T.type)||this.ya(E.doc,T.doc)),this.Ca(i),o=o!=null&&o;const h=t&&!o?this.Fa():[],p=this.pa.size===0&&this.current&&!o?1:0,y=p!==this.ga;return this.ga=p,c.length!==0||y?{snapshot:new zo(this.query,e.wa,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:h}:{Ma:h}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new tv,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new RE(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new kE(i))}),t}Oa(e){this.fa=e.gs,this.pa=Ve();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return zo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const _p="SyncEngine";class b0{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class j0{constructor(e){this.key=e,this.Ba=!1}}class V0{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.La={},this.ka=new js(h=>W_(h),zc),this.qa=new Map,this.Qa=new Set,this.$a=new lt(Ee.comparator),this.Ka=new Map,this.Ua=new sp,this.Wa={},this.Ga=new Map,this.za=Uo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function L0(n,e,t=!0){const i=DE(n);let o;const l=i.ka.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Na()):o=await PE(i,e,t,!0),o}async function M0(n,e){const t=DE(n);await PE(t,e,!0,!1)}async function PE(n,e,t,i){const o=await i0(n.localStore,wr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return i&&(h=await F0(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&EE(n.remoteStore,o),h}async function F0(n,e,t,i,o){n.Ha=(T,S,A)=>async function(L,D,F,Q){let G=D.view.ba(F);G.ls&&(G=await Qy(L.localStore,D.query,!1).then(({documents:x})=>D.view.ba(x,G)));const te=Q&&Q.targetChanges.get(D.targetId),K=Q&&Q.targetMismatches.get(D.targetId)!=null,ie=D.view.applyChanges(G,L.isPrimaryClient,te,K);return sv(L,D.targetId,ie.Ma),ie.snapshot}(n,T,S,A);const l=await Qy(n.localStore,e,!0),c=new D0(e,l.gs),h=c.ba(l.documents),p=El.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);sv(n,t,y.Ma);const E=new b0(e,t,c);return n.ka.set(e,E),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),y.snapshot}async function U0(n,e,t){const i=ke(n),o=i.ka.get(e),l=i.qa.get(o.targetId);if(l.length>1)return i.qa.set(o.targetId,l.filter(c=>!zc(c,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await wf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&up(i.remoteStore,o.targetId),Sf(i,o.targetId)}).catch(Go)):(Sf(i,o.targetId),await wf(i.localStore,o.targetId,!0))}async function z0(n,e){const t=ke(n),i=t.ka.get(e),o=t.qa.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),up(t.remoteStore,i.targetId))}async function B0(n,e,t){const i=Q0(n);try{const o=await function(c,h){const p=ke(c),y=It.now(),E=h.reduce((A,b)=>A.add(b.key),Ve());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",A=>{let b=ni(),L=Ve();return p.ds.getEntries(A,E).next(D=>{b=D,b.forEach((F,Q)=>{Q.isValidDocument()||(L=L.add(F))})}).next(()=>p.localDocuments.getOverlayedDocuments(A,b)).next(D=>{T=D;const F=[];for(const Q of h){const G=rR(Q,T.get(Q.key).overlayedDocument);G!=null&&F.push(new Zi(Q.key,G,F_(G.value.mapValue),rr.exists(!0)))}return p.mutationQueue.addMutationBatch(A,y,F,h)}).next(D=>{S=D;const F=D.applyToLocalDocumentSet(T,L);return p.documentOverlayCache.saveOverlays(A,D.batchId,F)})}).then(()=>({batchId:S.batchId,changes:Q_(T)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,h,p){let y=c.Wa[c.currentUser.toKey()];y||(y=new lt(Me)),y=y.insert(h,p),c.Wa[c.currentUser.toKey()]=y}(i,o.batchId,t),await Tl(i,o.changes),await Gc(i.remoteStore)}catch(o){const l=pp(o,"Failed to persist write");t.reject(l)}}async function AE(n,e){const t=ke(n);try{const i=await t0(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t.Ka.get(l);c&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.Ba=!0:o.modifiedDocuments.size>0?Ke(c.Ba):o.removedDocuments.size>0&&(Ke(c.Ba),c.Ba=!1))}),await Tl(t,i,e)}catch(i){await Go(i)}}function iv(n,e,t){const i=ke(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ka.forEach((l,c)=>{const h=c.view.sa(e);h.snapshot&&o.push(h.snapshot)}),function(c,h){const p=ke(c);p.onlineState=h;let y=!1;p.queries.forEach((E,T)=>{for(const S of T.ta)S.sa(h)&&(y=!0)}),y&&yp(p)}(i.eventManager,e),o.length&&i.La.p_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function $0(n,e,t){const i=ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Ka.get(e),l=o&&o.key;if(l){let c=new lt(Ee.comparator);c=c.insert(l,qt.newNoDocument(l,Ce.min()));const h=Ve().add(l),p=new qc(Ce.min(),new Map,new lt(Me),c,h);await AE(i,p),i.$a=i.$a.remove(l),i.Ka.delete(e),Ep(i)}else await wf(i.localStore,e,!1).then(()=>Sf(i,e,t)).catch(Go)}async function H0(n,e){const t=ke(n),i=e.batch.batchId;try{const o=await e0(t.localStore,e);NE(t,i,null),xE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Tl(t,o)}catch(o){await Go(o)}}async function q0(n,e,t){const i=ke(n);try{const o=await function(c,h){const p=ke(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let E;return p.mutationQueue.lookupMutationBatch(y,h).next(T=>(Ke(T!==null),E=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,E,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E)).next(()=>p.localDocuments.getDocuments(y,E))})}(i.localStore,e);NE(i,e,t),xE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Tl(i,o)}catch(o){await Go(o)}}function xE(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function NE(n,e,t){const i=ke(n);let o=i.Wa[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Wa[i.currentUser.toKey()]=o}}function Sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.br(e).forEach(i=>{n.Ua.containsKey(i)||OE(n,i)})}function OE(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(up(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),Ep(n))}function sv(n,e,t){for(const i of t)i instanceof kE?(n.Ua.addReference(i.key,e),W0(n,i)):i instanceof RE?(ue(_p,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||OE(n,i.key)):Ie()}function W0(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(ue(_p,"New document in limbo: "+t),n.Qa.add(i),Ep(n))}function Ep(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Ee(rt.fromString(e)),i=n.za.next();n.Ka.set(i,new j0(t)),n.$a=n.$a.insert(t,i),EE(n.remoteStore,new Vi(wr(Uc(t.path)),i,"TargetPurposeLimboResolution",Vc.ae))}}async function Tl(n,e,t){const i=ke(n),o=[],l=[],c=[];i.ka.isEmpty()||(i.ka.forEach((h,p)=>{c.push(i.Ha(p,e,t).then(y=>{var E;if((y||t)&&i.isPrimaryClient){const T=y?!y.fromCache:(E=t==null?void 0:t.targetChanges.get(p.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=ap.Yi(p.targetId,y);l.push(T)}}))}),await Promise.all(c),i.La.p_(o),await async function(p,y){const E=ke(p);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>Y.forEach(y,S=>Y.forEach(S.Hi,A=>E.persistence.referenceDelegate.addReference(T,S.targetId,A)).next(()=>Y.forEach(S.Ji,A=>E.persistence.referenceDelegate.removeReference(T,S.targetId,A)))))}catch(T){if(!Qo(T))throw T;ue(lp,"Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const A=E.Ts.get(S),b=A.snapshotVersion,L=A.withLastLimboFreeSnapshotVersion(b);E.Ts=E.Ts.insert(S,L)}}}(i.localStore,l))}async function K0(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ue(_p,"User change. New user:",e.toKey());const i=await gE(t.localStore,e);t.currentUser=e,function(l,c){l.Ga.forEach(h=>{h.forEach(p=>{p.reject(new ge(ee.CANCELLED,c))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Tl(t,i.Rs)}}function G0(n,e){const t=ke(n),i=t.Ka.get(e);if(i&&i.Ba)return Ve().add(i.key);{let o=Ve();const l=t.qa.get(e);if(!l)return o;for(const c of l){const h=t.ka.get(c);o=o.unionWith(h.view.Sa)}return o}}function DE(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=AE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=G0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$0.bind(null,e),e.La.p_=N0.bind(null,e.eventManager),e.La.Ja=O0.bind(null,e.eventManager),e}function Q0(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q0.bind(null,e),e}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wc(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ZR(this.persistence,new JR,e.initialUser,this.serializer)}Xa(e){return new mE(op.ri,this.serializer)}Za(e){return new o0}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class J0 extends wc{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){Ke(this.persistence.referenceDelegate instanceof _c);const i=this.persistence.referenceDelegate.garbageCollector;return new jR(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new mE(i=>_c.ri(i,t),this.serializer)}}class Cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=K0.bind(null,this.syncEngine),await P0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new x0}()}createDatastore(e){const t=Wc(e.databaseInfo.databaseId),i=function(l){return new d0(l)}(e.databaseInfo);return function(l,c,h,p){return new m0(l,c,h,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,h){return new y0(i,o,l,c,h)}(this.localStore,this.datastore,e.asyncQueue,t=>iv(this.syncEngine,t,0),function(){return Xy.D()?new Xy:new a0}())}createSyncEngine(e,t){return function(o,l,c,h,p,y,E){const T=new V0(o,l,c,h,p,y);return E&&(T.ja=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=ke(o);ue(Os,"RemoteStore shutting down."),l.W_.add(5),await wl(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Cf.provider={build:()=>new Cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="FirestoreClient";class Y0{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Ht.UNAUTHENTICATED,this.clientId=A_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{ue(Gi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(ue(Gi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=pp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Gh(n,e){n.asyncQueue.verifyOperationInProgress(),ue(Gi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await gE(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function ov(n,e){n.asyncQueue.verifyOperationInProgress();const t=await X0(n);ue(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>ev(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>ev(e.remoteStore,o)),n._onlineComponents=e}async function X0(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue(Gi,"Using user provided OfflineComponentProvider");try{await Gh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;Vo("Error using user provided cache. Falling back to memory cache: "+t),await Gh(n,new wc)}}else ue(Gi,"Using default OfflineComponentProvider"),await Gh(n,new J0(void 0));return n._offlineComponents}async function bE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue(Gi,"Using user provided OnlineComponentProvider"),await ov(n,n._uninitializedComponentsProvider._online)):(ue(Gi,"Using default OnlineComponentProvider"),await ov(n,new Cf))),n._onlineComponents}function Z0(n){return bE(n).then(e=>e.syncEngine)}async function Tc(n){const e=await bE(n),t=e.eventManager;return t.onListen=L0.bind(null,e.syncEngine),t.onUnlisten=U0.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=M0.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=z0.bind(null,e.syncEngine),t}function eP(n,e,t={}){const i=new Xr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,p,y){const E=new wp({next:S=>{E.su(),c.enqueueAndForget(()=>gp(l,T));const A=S.docs.has(h);!A&&S.fromCache?y.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&S.fromCache&&p&&p.source==="server"?y.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp(Uc(h.path),E,{includeMetadataChanges:!0,Ta:!0});return mp(l,T)}(await Tc(n),n.asyncQueue,e,t,i)),i.promise}function tP(n,e,t={}){const i=new Xr;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,h,p,y){const E=new wp({next:S=>{E.su(),c.enqueueAndForget(()=>gp(l,T)),S.fromCache&&p.source==="server"?y.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new vp(h,E,{includeMetadataChanges:!0,Ta:!0});return mp(l,T)}(await Tc(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(n,e,t){if(!t)throw new ge(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nP(n,e,t,i){if(e===!0&&i===!0)throw new ge(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lv(n){if(!Ee.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function uv(n){if(Ee.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function Sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tp(n);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firestore.googleapis.com",cv=!0;class dv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LE,this.ssl=cv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:cv;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DR)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new lk;switch(i.type){case"firstParty":return new hk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=av.get(t);i&&(ue("ComponentProvider","Removing Datastore"),av.delete(t),i.terminate())}(this),Promise.resolve()}}function rP(n,e,t,i={}){var o;const l=(n=Sn(n,Qc))._getSettings(),c=`${e}:${t}`;if(l.host!==LE&&l.host!==c&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},l),{host:c,ssl:!1})),i.mockUserToken){let h,p;if(typeof i.mockUserToken=="string")h=i.mockUserToken,p=Ht.MOCK_USER;else{h=VS(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const y=i.mockUserToken.sub||i.mockUserToken.user_id;if(!y)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ht(y)}n._authCredentials=new uk(new P_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Il(this.firestore,e,this._query)}}class Zt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}}class zi extends Il{constructor(e,t,i){super(e,t,Uc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Ee(e))}withConverter(e){return new zi(this.firestore,e,this._path)}}function iP(n,e,...t){if(n=Ct(n),VE("collection","path",e),n instanceof Qc){const i=rt.fromString(e,...t);return uv(i),new zi(n,null,i)}{if(!(n instanceof Zt||n instanceof zi))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return uv(i),new zi(n.firestore,null,i)}}function mn(n,e,...t){if(n=Ct(n),arguments.length===1&&(e=A_.newId()),VE("doc","path",e),n instanceof Qc){const i=rt.fromString(e,...t);return lv(i),new Zt(n,null,new Ee(i))}{if(!(n instanceof Zt||n instanceof zi))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return lv(i),new Zt(n.firestore,n instanceof zi?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="AsyncQueue";class fv{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new vE(this,"async_queue_retry"),this.Su=()=>{const i=Kh();i&&ue(hv,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const t=Kh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Kh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Xr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Qo(e))throw e;ue(hv,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const o=function(c){let h=c.message||"";return c.stack&&(h=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),h}(i);throw ti("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.pu=!1,i))));return this.bu=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const o=fp.createAndSchedule(this,e,t,i,l=>this.Fu(l));return this.fu.push(o),o}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function pv(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of i)if(l in o&&typeof o[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Qi extends Qc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new fv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fv(e),this._firestoreClient=void 0,await e}}}function Jc(n,e){const t=typeof n=="object"?n:Kf(),i=typeof n=="string"?n:fc,o=Wf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=bS("firestore");l&&rP(o,...l)}return o}function Yc(n){if(n._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sP(n),n._firestoreClient}function sP(n){var e,t,i;const o=n._freezeSettings(),l=function(h,p,y,E){return new kk(h,p,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,jE(E.experimentalLongPollingOptions),E.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new Y0(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bo(Mt.fromBase64String(e))}catch(t){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bo(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=/^__.*__$/;class aP{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms):new _l(e,this.data,t,this.fieldTransforms)}}class ME{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class Cp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.$u(e),o}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ku({path:i,Qu:!1});return o.Bu(),o}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Ic(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(FE(this.Lu)&&oP.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class lP{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Wc(e)}ju(e,t,i,o=!1){return new Cp({Lu:e,methodName:t,zu:i,path:Lt.emptyPath(),Qu:!1,Gu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function UE(n){const e=n._freezeSettings(),t=Wc(n._databaseId);return new lP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uP(n,e,t,i,o,l={}){const c=n.ju(l.merge||l.mergeFields?2:0,e,t,o);Rp("Data must be an object, but it was:",c,i);const h=zE(i,c);let p,y;if(l.merge)p=new In(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const E=[];for(const T of l.mergeFields){const S=kf(e,T,t);if(!c.contains(S))throw new ge(ee.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);$E(E,S)||E.push(S)}p=new In(E),y=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=c.fieldTransforms;return new aP(new fn(h),p,y)}class ed extends Zc{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}class kp extends Zc{_toFieldTransform(e){return new Zk(e.path,new cl)}isEqual(e){return e instanceof kp}}function cP(n,e,t,i){const o=n.ju(1,e,t);Rp("Data must be an object, but it was:",o,i);const l=[],c=fn.empty();Xi(i,(p,y)=>{const E=Pp(e,p,t);y=Ct(y);const T=o.Ku(E);if(y instanceof ed)l.push(E);else{const S=td(y,T);S!=null&&(l.push(E),c.set(E,S))}});const h=new In(l);return new ME(c,h,o.fieldTransforms)}function dP(n,e,t,i,o,l){const c=n.ju(1,e,t),h=[kf(e,i,t)],p=[o];if(l.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(kf(e,l[S])),p.push(l[S+1]);const y=[],E=fn.empty();for(let S=h.length-1;S>=0;--S)if(!$E(y,h[S])){const A=h[S];let b=p[S];b=Ct(b);const L=c.Ku(A);if(b instanceof ed)y.push(A);else{const D=td(b,L);D!=null&&(y.push(A),E.set(A,D))}}const T=new In(y);return new ME(E,T,c.fieldTransforms)}function td(n,e){if(BE(n=Ct(n)))return Rp("Unsupported field value:",e,n),zE(n,e);if(n instanceof Zc)return function(i,o){if(!FE(o.Lu))throw o.Wu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Wu(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const h of i){let p=td(h,o.Uu(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=Ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Jk(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=It.fromDate(i);return{timestampValue:vc(o.serializer,l)}}if(i instanceof It){const l=new It(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vc(o.serializer,l)}}if(i instanceof Ip)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bo)return{bytesValue:aE(o.serializer,i._byteString)};if(i instanceof Zt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Wu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:ip(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Sp)return function(c,h){return{mapValue:{fields:{[L_]:{stringValue:M_},[pc]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw h.Wu("VectorValues must only contain numeric values.");return ep(h.serializer,y)})}}}}}}(i,o);throw o.Wu(`Unsupported field value: ${Tp(i)}`)}(n,e)}function zE(n,e){const t={};return N_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(n,(i,o)=>{const l=td(o,e.qu(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function BE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof It||n instanceof Ip||n instanceof Bo||n instanceof Zt||n instanceof Zc||n instanceof Sp)}function Rp(n,e,t){if(!BE(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Tp(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function kf(n,e,t){if((e=Ct(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return Pp(n,e);throw Ic("Field path arguments must be of type string or ",n,!1,void 0,t)}const hP=new RegExp("[~\\*/\\[\\]]");function Pp(n,e,t){if(e.search(hP)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xc(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ic(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ge(ee.INVALID_ARGUMENT,h+n+p)}function $E(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class fP extends HE{data(){return super.data()}}function qE(n,e){return typeof e=="string"?Pp(n,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pP{convertValue(e,t="none"){switch(Wi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Xi(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[pc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>ft(c.doubleValue));return new Sp(l)}convertGeoPoint(e){return new Ip(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=Hi(e);return new It(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);Ke(fE(i));const o=new ll(i.get(1),i.get(3)),l=new Ee(i.popFirst(5));return o.isEqual(t)||ti(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KE extends HE{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(qE("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class ic extends KE{data(e={}){return super.data(e)}}class GE{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ic(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map(h=>{const p=new ic(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ja(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(h=>l||h.type!==3).map(h=>{const p=new ic(o._firestore,o._userDataWriter,h.doc.key,h.doc,new Ja(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),E=c.indexOf(h.doc.key)),{type:gP(h.type),doc:p,oldIndex:y,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(n){n=Sn(n,Zt);const e=Sn(n.firestore,Qi);return eP(Yc(e),n._key).then(t=>JE(e,n,t))}class Ap extends pP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function yP(n){n=Sn(n,Il);const e=Sn(n.firestore,Qi),t=Yc(e),i=new Ap(e);return WE(n._query),tP(t,n._query).then(o=>new GE(e,i,n,o))}function nd(n,e,t){n=Sn(n,Zt);const i=Sn(n.firestore,Qi),o=mP(n.converter,e);return xp(i,[uP(UE(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,rr.none())])}function Ji(n,e,t,...i){n=Sn(n,Zt);const o=Sn(n.firestore,Qi),l=UE(o);let c;return c=typeof(e=Ct(e))=="string"||e instanceof Xc?dP(l,"updateDoc",n._key,e,t,i):cP(l,"updateDoc",n._key,e),xp(o,[c.toMutation(n._key,rr.exists(!0))])}function vP(n){return xp(Sn(n.firestore,Qi),[new tp(n._key,rr.none())])}function _P(n,...e){var t,i,o;n=Ct(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||pv(e[c])||(l=e[c],c++);const h={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(pv(e[c])){const T=e[c];e[c]=(t=T.next)===null||t===void 0?void 0:t.bind(T),e[c+1]=(i=T.error)===null||i===void 0?void 0:i.bind(T),e[c+2]=(o=T.complete)===null||o===void 0?void 0:o.bind(T)}let p,y,E;if(n instanceof Zt)y=Sn(n.firestore,Qi),E=Uc(n._key.path),p={next:T=>{e[c]&&e[c](JE(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=Sn(n,Il);y=Sn(T.firestore,Qi),E=T._query;const S=new Ap(y);p={next:A=>{e[c]&&e[c](new GE(y,S,T,A))},error:e[c+1],complete:e[c+2]},WE(n._query)}return function(S,A,b,L){const D=new wp(L),F=new vp(A,D,b);return S.asyncQueue.enqueueAndForget(async()=>mp(await Tc(S),F)),()=>{D.su(),S.asyncQueue.enqueueAndForget(async()=>gp(await Tc(S),F))}}(Yc(y),E,h,p)}function xp(n,e){return function(i,o){const l=new Xr;return i.asyncQueue.enqueueAndForget(async()=>B0(await Z0(i),o,l)),l.promise}(Yc(n),e)}function JE(n,e,t){const i=t.docs.get(e._key),o=new Ap(n);return new KE(n,o,e._key,i,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}function YE(){return new kp("serverTimestamp")}(function(e,t=!0){(function(o){Ko=o})(Wo),jo(new xs("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),h=new Qi(new ck(i.getProvider("auth-internal")),new fk(c,i.getProvider("app-check-internal")),function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(y.options.projectId,E)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),h._setSettings(l),h},"PUBLIC").setMultipleInstances(!0)),Fi(Ey,wy,e),Fi(Ey,wy,"esm2017")})();var EP="firebase",wP="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(EP,wP,"app");function Np(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function XE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TP=XE,ZE=new yl("auth","Firebase",XE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Hf("@firebase/auth");function IP(n,...e){Sc.logLevel<=je.WARN&&Sc.warn(`Auth (${Wo}): ${n}`,...e)}function sc(n,...e){Sc.logLevel<=je.ERROR&&Sc.error(`Auth (${Wo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n,...e){throw Op(n,...e)}function Ir(n,...e){return Op(n,...e)}function ew(n,e,t){const i=Object.assign(Object.assign({},TP()),{[e]:t});return new yl("auth","Firebase",i).create(e,{appName:n.name})}function Zr(n){return ew(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Op(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ZE.create(n,...e)}function Te(n,e,...t){if(!n)throw Op(e,...t)}function Kr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sc(e),new Error(e)}function ri(n,e){n||Kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function SP(){return mv()==="http:"||mv()==="https:"}function mv(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(SP()||US()||"connection"in navigator)?navigator.onLine:!0}function kP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ri(t>e,"Short delay should be less than long delay!"),this.isMobile=LS()||zS()}get(){return CP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(n,e){ri(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=new Sl(3e4,6e4);function ii(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function si(n,e,t,i,o={}){return nw(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const h=vl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return FS()||(y.referrerPolicy="no-referrer"),tw.fetch()(rw(n,n.config.apiHost,t,h),y)})}async function nw(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},RP),e);try{const o=new xP(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qu(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Qu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Qu(n,"user-disabled",c);const E=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ew(n,E,y);sr(n,E)}}catch(o){if(o instanceof Ar)throw o;sr(n,"network-request-failed",{message:String(o)})}}async function Cl(n,e,t,i,o={}){const l=await si(n,e,t,i,o);return"mfaPendingCredential"in l&&sr(n,"multi-factor-auth-required",{_serverResponse:l}),l}function rw(n,e,t,i){const o=`${e}${t}?${i}`;return n.config.emulator?Dp(n.config,o):`${n.config.apiScheme}://${o}`}function AP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ir(this.auth,"network-request-failed")),PP.get())})}}function Qu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Ir(n,e,i);return o.customData._tokenResponse=t,o}function gv(n){return n!==void 0&&n.enterprise!==void 0}class NP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return AP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function OP(n,e){return si(n,"GET","/v2/recaptchaConfig",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){return si(n,"POST","/v1/accounts:delete",e)}async function iw(n,e){return si(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bP(n,e=!1){const t=Ct(n),i=await t.getIdToken(e),o=bp(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:nl(Qh(o.auth_time)),issuedAtTime:nl(Qh(o.iat)),expirationTime:nl(Qh(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Qh(n){return Number(n)*1e3}function bp(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return sc("JWT malformed, contained fewer than 3 sections"),null;try{const o=f_(t);return o?JSON.parse(o):(sc("Failed to decode base64 JWT payload"),null)}catch(o){return sc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function yv(n){const e=bp(n);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ar&&jP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function jP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nl(this.lastLoginAt),this.creationTime=nl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await fl(n,iw(t,{idToken:i}));Te(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?sw(l.providerUserInfo):[],h=MP(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(h!=null&&h.length),E=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Pf(l.createdAt,l.lastLoginAt),isAnonymous:E};Object.assign(n,T)}async function LP(n){const e=Ct(n);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MP(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function sw(n){return n.map(e=>{var{providerId:t}=e,i=Np(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n,e){const t=await nw(n,{},async()=>{const i=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=rw(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",tw.fetch()(c,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UP(n,e){return si(n,"POST","/v2/accounts:revokeToken",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=yv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await FP(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new Oo;return i&&(Te(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Te(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return Kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n,e){Te(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Gr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=Np(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Pf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await fl(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bP(this,e)}reload(){return LP(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Gr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ln(this.auth.app))return Promise.reject(Zr(this.auth));const e=await this.getIdToken();return await fl(this,DP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,h,p,y,E;const T=(i=t.displayName)!==null&&i!==void 0?i:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,b=(c=t.photoURL)!==null&&c!==void 0?c:void 0,L=(h=t.tenantId)!==null&&h!==void 0?h:void 0,D=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,F=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Q=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:G,emailVerified:te,isAnonymous:K,providerData:ie,stsTokenManager:x}=t;Te(G&&x,e,"internal-error");const C=Oo.fromJSON(this.name,x);Te(typeof G=="string",e,"internal-error"),Ni(T,e.name),Ni(S,e.name),Te(typeof te=="boolean",e,"internal-error"),Te(typeof K=="boolean",e,"internal-error"),Ni(A,e.name),Ni(b,e.name),Ni(L,e.name),Ni(D,e.name),Ni(F,e.name),Ni(Q,e.name);const P=new Gr({uid:G,auth:e,email:S,emailVerified:te,displayName:T,isAnonymous:K,photoURL:b,phoneNumber:A,tenantId:L,stsTokenManager:C,createdAt:F,lastLoginAt:Q});return ie&&Array.isArray(ie)&&(P.providerData=ie.map(k=>Object.assign({},k))),D&&(P._redirectEventId=D),P}static async _fromIdTokenResponse(e,t,i=!1){const o=new Oo;o.updateFromServerResponse(t);const l=new Gr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Cc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?sw(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),h=new Oo;h.updateFromIdToken(i);const p=new Gr({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Pf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;function Qr(n){ri(n instanceof Function,"Expected a class definition");let e=vv.get(n);return e?(ri(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ow.type="NONE";const _v=ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(n,e,t){return`firebase:${n}:${e}:${t}`}class Do{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=oc(this.userKey,o.apiKey,l),this.fullPersistenceKey=oc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Do(Qr(_v),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Qr(_v);const c=oc(i,e.config.apiKey,e.name);let h=null;for(const y of t)try{const E=await y._get(c);if(E){const T=Gr._fromJSON(e,E);y!==l&&(h=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Do(l,e,i):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Do(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hw(e))return"Blackberry";if(fw(e))return"Webos";if(lw(e))return"Safari";if((e.includes("chrome/")||uw(e))&&!e.includes("edge/"))return"Chrome";if(dw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function aw(n=Wt()){return/firefox\//i.test(n)}function lw(n=Wt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uw(n=Wt()){return/crios\//i.test(n)}function cw(n=Wt()){return/iemobile/i.test(n)}function dw(n=Wt()){return/android/i.test(n)}function hw(n=Wt()){return/blackberry/i.test(n)}function fw(n=Wt()){return/webos/i.test(n)}function jp(n=Wt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zP(n=Wt()){var e;return jp(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BP(){return BS()&&document.documentMode===10}function pw(n=Wt()){return jp(n)||dw(n)||fw(n)||hw(n)||/windows phone/i.test(n)||cw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(n,e=[]){let t;switch(n){case"Browser":t=Ev(Wt());break;case"Worker":t=`${Ev(Wt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HP(n,e={}){return si(n,"GET","/v2/passwordPolicy",ii(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP=6;class WP{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:qP,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wv(this),this.idTokenSubscription=new wv(this),this.beforeStateQueue=new $P(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Qr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await iw(this,{idToken:e}),i=await Gr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ln(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===h)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ln(this.app))return Promise.reject(Zr(this));const t=e?Ct(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ln(this.app)?Promise.reject(Zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ln(this.app)?Promise.reject(Zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HP(this),t=new WP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await UP(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Qr(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[Qr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&IP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function es(n){return Ct(n)}class wv{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GP(n){rd=n}function gw(n){return rd.loadJS(n)}function QP(){return rd.recaptchaEnterpriseScript}function JP(){return rd.gapiScript}function YP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class XP{constructor(){this.enterprise=new ZP}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZP{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eA="recaptcha-enterprise",yw="NO_RECAPTCHA";class tA{constructor(e){this.type=eA,this.auth=es(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{OP(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new NP(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;gv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(yw)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XP().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!t&&gv(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=QP();p.length!==0&&(p+=h),gw(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function Tv(n,e,t,i=!1,o=!1){const l=new tA(n);let c;if(o)c=yw;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function kc(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Tv(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await Tv(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(n,e){const t=Wf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(dc(l,e??{}))return o;sr(o,"already-initialized")}return t.initialize({options:e})}function rA(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Qr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function iA(n,e,t){const i=es(n);Te(i._canInitEmulator,i,"emulator-config-failed"),Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=vw(e),{host:c,port:h}=sA(e),p=h===null?"":`:${h}`;i.config.emulator={url:`${l}//${c}${p}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),oA()}function vw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sA(n){const e=vw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Iv(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Iv(c)}}}function Iv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oA(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,t){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function aA(n,e){return si(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(n,e){return Cl(n,"POST","/v1/accounts:signInWithPassword",ii(n,e))}async function _w(n,e){return si(n,"POST","/v1/accounts:sendOobCode",ii(n,e))}async function uA(n,e){return _w(n,e)}async function cA(n,e){return _w(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dA(n,e){return Cl(n,"POST","/v1/accounts:signInWithEmailLink",ii(n,e))}async function hA(n,e){return Cl(n,"POST","/v1/accounts:signInWithEmailLink",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl extends Vp{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new pl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new pl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kc(e,t,"signInWithPassword",lA);case"emailLink":return dA(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kc(e,i,"signUpPassword",aA);case"emailLink":return hA(e,{idToken:t,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(n,e){return Cl(n,"POST","/v1/accounts:signInWithIdp",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="http://localhost";class Ds extends Vp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ds(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):sr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=Np(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new Ds(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,bo(e,t)}buildRequest(){const e={requestUri:fA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mA(n){const e=qa(Wa(n)).link,t=e?qa(Wa(e)).deep_link_id:null,i=qa(Wa(n)).deep_link_id;return(i?qa(Wa(i)).link:null)||i||t||e||n}class Lp{constructor(e){var t,i,o,l,c,h;const p=qa(Wa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,E=(i=p.oobCode)!==null&&i!==void 0?i:null,T=pA((o=p.mode)!==null&&o!==void 0?o:null);Te(y&&E&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=E,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=mA(e);try{return new Lp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(){this.providerId=Ls.PROVIDER_ID}static credential(e,t){return pl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Lp.parseLink(t);return Te(i,"argument-error"),pl._fromEmailAndCode(e,i.code,i.tenantId)}}Ls.PROVIDER_ID="password";Ls.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ls.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends Ew{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends kl{constructor(){super("facebook.com")}static credential(e){return Ds._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends kl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ds._fromParams({providerId:Di.PROVIDER_ID,signInMethod:Di.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Di.credentialFromTaggedObject(e)}static credentialFromError(e){return Di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Di.credential(t,i)}catch{return null}}}Di.GOOGLE_SIGN_IN_METHOD="google.com";Di.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends kl{constructor(){super("github.com")}static credential(e){return Ds._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends kl{constructor(){super("twitter.com")}static credential(e,t){return Ds._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ji.credential(t,i)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(n,e){return Cl(n,"POST","/v1/accounts:signUp",ii(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await Gr._fromIdTokenResponse(e,i,o),c=Sv(i);return new bs({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Sv(i);return new bs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Sv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends Ar{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Rc(e,t,i,o)}}function ww(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(n,l,e,i):l})}async function yA(n,e,t=!1){const i=await fl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return bs._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tw(n,e,t=!1){const{auth:i}=n;if(Ln(i.app))return Promise.reject(Zr(i));const o="reauthenticate";try{const l=await fl(n,ww(i,o,e,n),t);Te(l.idToken,i,"internal-error");const c=bp(l.idToken);Te(c,i,"internal-error");const{sub:h}=c;return Te(n.uid===h,i,"user-mismatch"),bs._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&sr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iw(n,e,t=!1){if(Ln(n.app))return Promise.reject(Zr(n));const i="signIn",o=await ww(n,i,e),l=await bs._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function vA(n,e){return Iw(es(n),e)}async function _A(n,e){return Tw(Ct(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sw(n){const e=es(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EA(n,e,t){const i=es(n);await kc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cA)}async function wA(n,e,t){if(Ln(n.app))return Promise.reject(Zr(n));const i=es(n),c=await kc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gA).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Sw(n),p}),h=await bs._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function TA(n,e,t){return Ln(n.app)?Promise.reject(Zr(n)):vA(Ct(n),Ls.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Sw(n),i})}async function Cv(n,e){const t=Ct(n),o={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:l}=await uA(t.auth,o);l!==n.email&&await n.reload()}function IA(n,e,t,i){return Ct(n).onIdTokenChanged(e,t,i)}function SA(n,e,t){return Ct(n).beforeAuthStateChanged(e,t)}async function CA(n){return Ct(n).delete()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=1e3,RA=10;class kw extends Cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);BP()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,RA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},kA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}kw.type="LOCAL";const PA=kw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw extends Cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rw.type="SESSION";const Pw=Rw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new id(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await AA(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}id.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=Mp("",20);o.port1.start();const E=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(E),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(E),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return window}function NA(n){Sr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}async function OA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function bA(){return Aw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="firebaseLocalStorageDb",jA=1,Ac="firebaseLocalStorage",Nw="fbase_key";class Rl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sd(n,e){return n.transaction([Ac],e?"readwrite":"readonly").objectStore(Ac)}function VA(){const n=indexedDB.deleteDatabase(xw);return new Rl(n).toPromise()}function Af(){const n=indexedDB.open(xw,jA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ac,{keyPath:Nw})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ac)?e(i):(i.close(),await VA(),e(await Af()))})})}async function kv(n,e,t){const i=sd(n,!0).put({[Nw]:e,value:t});return new Rl(i).toPromise()}async function LA(n,e){const t=sd(n,!1).get(e),i=await new Rl(t).toPromise();return i===void 0?null:i.value}function Rv(n,e){const t=sd(n,!0).delete(e);return new Rl(t).toPromise()}const MA=800,FA=3;class Ow{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Af(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>FA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Aw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=id._getInstance(bA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await OA(),!this.activeServiceWorker)return;this.sender=new xA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Af();return await kv(e,Pc,"1"),await Rv(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>kv(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>LA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=sd(o,!1).getAll();return new Rl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ow.type="LOCAL";const UA=Ow;new Sl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e){return e?Qr(e):(Te(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends Vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BA(n){return Iw(n.auth,new Fp(n),n.bypassAuthState)}function $A(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),Tw(t,new Fp(n),n.bypassAuthState)}async function HA(n){const{auth:e,user:t}=n;return Te(t,e,"internal-error"),yA(t,new Fp(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BA;case"linkViaPopup":case"linkViaRedirect":return HA;case"reauthViaPopup":case"reauthViaRedirect":return $A;default:sr(this.auth,"internal-error")}}resolve(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ri(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Sl(2e3,1e4);class xo extends Dw{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ri(this.filter.length===1,"Popup operations only handle one event");const e=Mp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qA.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="pendingRedirect",ac=new Map;class KA extends Dw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=ac.get(this.auth._key());if(!e){try{const i=await GA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}ac.set(this.auth._key(),e)}return this.bypassAuthState||ac.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GA(n,e){const t=YA(e),i=JA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function QA(n,e){ac.set(n._key(),e)}function JA(n){return Qr(n._redirectPersistence)}function YA(n){return oc(WA,n.config.apiKey,n.name)}async function XA(n,e,t=!1){if(Ln(n.app))return Promise.reject(Zr(n));const i=es(n),o=zA(i,e),c=await new KA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=10*60*1e3;class ex{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!bw(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ir(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Pv(e))}saveEventToCache(e){this.cachedEventUids.add(Pv(e)),this.lastProcessedEventTime=Date.now()}}function Pv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(n,e={}){return si(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ix=/^https?/;async function sx(n){if(n.config.emulator)return;const{authorizedDomains:e}=await nx(n);for(const t of e)try{if(ox(t))return}catch{}sr(n,"unauthorized-domain")}function ox(n){const e=Rf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!ix.test(t))return!1;if(rx.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=new Sl(3e4,6e4);function Av(){const n=Sr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lx(n){return new Promise((e,t)=>{var i,o,l;function c(){Av(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Av(),t(Ir(n,"network-request-failed"))},timeout:ax.get()})}if(!((o=(i=Sr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Sr().gapi)===null||l===void 0)&&l.load)c();else{const h=YP("iframefcb");return Sr()[h]=()=>{gapi.load?c():t(Ir(n,"network-request-failed"))},gw(`${JP()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw lc=null,e})}let lc=null;function ux(n){return lc=lc||lx(n),lc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=new Sl(5e3,15e3),dx="__/auth/iframe",hx="emulator/auth/iframe",fx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},px=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mx(n){const e=n.config;Te(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dp(e,hx):`https://${n.config.authDomain}/${dx}`,i={apiKey:e.apiKey,appName:n.name,v:Wo},o=px.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${vl(i).slice(1)}`}async function gx(n){const e=await ux(n),t=Sr().gapi;return Te(t,n,"internal-error"),e.open({where:document.body,url:mx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fx,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ir(n,"network-request-failed"),h=Sr().setTimeout(()=>{l(c)},cx.get());function p(){Sr().clearTimeout(h),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vx=500,_x=600,Ex="_blank",wx="http://localhost";class xv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tx(n,e,t,i=vx,o=_x){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const p=Object.assign(Object.assign({},yx),{width:i.toString(),height:o.toString(),top:l,left:c}),y=Wt().toLowerCase();t&&(h=uw(y)?Ex:t),aw(y)&&(e=e||wx,p.scrollbars="yes");const E=Object.entries(p).reduce((S,[A,b])=>`${S}${A}=${b},`,"");if(zP(y)&&h!=="_self")return Ix(e||"",h),new xv(null);const T=window.open(e||"",h,E);Te(T,n,"popup-blocked");try{T.focus()}catch{}return new xv(T)}function Ix(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="__/auth/handler",Cx="emulator/auth/handler",kx=encodeURIComponent("fac");async function Nv(n,e,t,i,o,l){Te(n.config.authDomain,n,"auth-domain-config-required"),Te(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Wo,eventId:o};if(e instanceof Ew){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",QS(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,T]of Object.entries({}))c[E]=T}if(e instanceof kl){const E=e.getScopes().filter(T=>T!=="");E.length>0&&(c.scopes=E.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const E of Object.keys(h))h[E]===void 0&&delete h[E];const p=await n._getAppCheckToken(),y=p?`#${kx}=${encodeURIComponent(p)}`:"";return`${Rx(n)}?${vl(h).slice(1)}${y}`}function Rx({config:n}){return n.emulator?Dp(n,Cx):`https://${n.authDomain}/${Sx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="webStorageSupport";class Px{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pw,this._completeRedirectFn=XA,this._overrideRedirectResult=QA}async _openPopup(e,t,i,o){var l;ri((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Nv(e,t,i,Rf(),o);return Tx(e,c,Mp())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Nv(e,t,i,Rf(),o);return NA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ri(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await gx(e),i=new ex(e);return t.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jh,{type:Jh},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Jh];c!==void 0&&t(!!c),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pw()||lw()||jp()}}const Ax=Px;var Ov="@firebase/auth",Dv="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ox(n){jo(new xs("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;Te(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mw(n)},y=new KP(i,o,l,p);return rA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),jo(new xs("auth-internal",e=>{const t=es(e.getProvider("auth").getImmediate());return(i=>new xx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fi(Ov,Dv,Nx(n)),Fi(Ov,Dv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx=5*60,bx=g_("authIdTokenMaxAge")||Dx;let bv=null;const jx=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>bx)return;const o=t==null?void 0:t.token;bv!==o&&(bv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Vx(n=Kf()){const e=Wf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nA(n,{popupRedirectResolver:Ax,persistence:[UA,PA,Pw]}),i=g_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=jx(l.toString());SA(t,c,()=>c(t.currentUser)),IA(t,h=>c(h))}}const o=p_("auth");return o&&iA(t,`http://${o}`),t}function Lx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}GP({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=Ir("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",Lx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ox("Browser");const Mx={apiKey:"AIzaSyCZLsOvCsMkWKjKRSVBXHY3buF3x4x5q5A",authDomain:"https://accounts.google.com/o/oauth2/auth",projectId:"examen-e396b",storageBucket:"examen-e396b.firebasestorage.app",messagingSenderId:"165780663174",appId:"1:165780663174:web:e3cbb1d27e25fb70385a07",measurementId:"G-65QHZP7V56"};let xc;YC().length===0?xc=__(Mx):xc=Kf();const Rr=Jc(xc),pn=Vx(xc);pn.useDeviceLanguage();const jv=n=>{let e;const t=new Set,i=(y,E)=>{const T=typeof y=="function"?y(e):y;if(!Object.is(T,e)){const S=e;e=E??(typeof T!="object"||T===null)?T:Object.assign({},e,T),t.forEach(A=>A(e,S))}},o=()=>e,h={setState:i,getState:o,getInitialState:()=>p,subscribe:y=>(t.add(y),()=>t.delete(y))},p=e=n(i,o,h);return h},Fx=n=>n?jv(n):jv,Ux=n=>n;function zx(n,e=Ux){const t=Jr.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Jr.useDebugValue(t),t}const Vv=n=>{const e=Fx(n),t=i=>zx(e,i);return Object.assign(t,e),t},Bx=n=>n?Vv(n):Vv,jt=[];for(let n=0;n<256;++n)jt.push((n+256).toString(16).slice(1));function $x(n,e=0){return(jt[n[e+0]]+jt[n[e+1]]+jt[n[e+2]]+jt[n[e+3]]+"-"+jt[n[e+4]]+jt[n[e+5]]+"-"+jt[n[e+6]]+jt[n[e+7]]+"-"+jt[n[e+8]]+jt[n[e+9]]+"-"+jt[n[e+10]]+jt[n[e+11]]+jt[n[e+12]]+jt[n[e+13]]+jt[n[e+14]]+jt[n[e+15]]).toLowerCase()}let Yh;const Hx=new Uint8Array(16);function qx(){if(!Yh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Yh=crypto.getRandomValues.bind(crypto)}return Yh(Hx)}const Wx=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Lv={randomUUID:Wx};function jw(n,e,t){var o;if(Lv.randomUUID&&!n)return Lv.randomUUID();n=n||{};const i=n.random??((o=n.rng)==null?void 0:o.call(n))??qx();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,$x(i)}const en=Bx((n,e)=>{const t=(i,o)=>`${o}-${i}`;return{user:null,users:[],likedUsers:[],requests:[],searchResults:[],activeChats:[],seenUsers:[],deniedUsers:[],hasUsedPromoCode:!1,setUsers:i=>n({users:i}),token:localStorage.getItem("authToken"),chats:[],setChats:i=>n({chats:i}),setToken:i=>{i?localStorage.setItem("authToken",i):localStorage.removeItem("authToken"),n({token:i})},setUser:i=>{const o=i.id??"temp-user-id",l=t(o,"likedUsers"),c=JSON.parse(localStorage.getItem(l)||"[]"),h=JSON.parse(localStorage.getItem(t(o,"activeChats"))||"[]"),p=JSON.parse(localStorage.getItem(t(o,"requests"))||"[]"),y=t(o,"deniedUsers"),E=JSON.parse(localStorage.getItem(y)||"[]"),T=JSON.parse(localStorage.getItem(t(o,"user"))||"{}");n({user:i,likedUsers:c,activeChats:h,requests:p,deniedUsers:E,hasUsedPromoCode:T.hasUsedPromoCode||!1})},updatePromoCodeStatus:i=>{const o=e().user;if(!o)return;n({hasUsedPromoCode:i});const l={...o,hasUsedPromoCode:i};localStorage.setItem(t(o.id,"user"),JSON.stringify(l))},purchaseEmoji:(i,o)=>{const l=e().user;if(!l||l.credits<o)return;const c=l.credits-o,h=l.purchasedEmojis.findIndex(T=>T.emoji===i);let p=[...l.purchasedEmojis];h!==-1?p[h].count+=1:p.push({emoji:i,count:1});const y={...l,credits:c,purchasedEmojis:p};n({user:y});const E=y.id||"";localStorage.setItem(t(E,"credits"),JSON.stringify(c)),localStorage.setItem(t(E,"purchasedEmojis"),JSON.stringify(p))},resetDenyUsers:async()=>{var l;n({deniedUsers:[]});const i=((l=e().user)==null?void 0:l.id)??"temp-user-id";localStorage.removeItem(t(i,"deniedUsers"));const o=mn(Rr,"users",i);try{await Ji(o,{denylist:[]})}catch(c){console.error("Kunde inte terstlla denylist i Firebase:",c)}},addDenyUsers:async i=>{const o=e().user;if(!o)return;const l=[...e().deniedUsers,i],c=t(o.id,"deniedUsers");localStorage.setItem(c,JSON.stringify(l)),n({deniedUsers:l});const h=mn(Rr,"users",o.id);try{await Ji(h,{denylist:l})}catch(p){console.error("Fel vid uppdatering av denylist i Firestore:",p)}},addLikedUser:i=>{const o=e().user;if(!o)return;const l=t(o.id,"likedUsers"),c=[...e().likedUsers,i];localStorage.setItem(l,JSON.stringify(c)),n({likedUsers:c})},removeLikedUser:i=>{const o=e().user;if(!o)return;const l=t(o.id,"likedUsers"),c=e().likedUsers.filter(h=>h.id!==i);localStorage.setItem(l,JSON.stringify(c)),n({likedUsers:c})},addSearchResult:i=>{n({searchResults:[...e().searchResults,i]})},clearSearchResults:()=>{n({searchResults:[]})},sendMessageRequest:i=>{var E;const o=((E=e().user)==null?void 0:E.id)||"temp-user-id",l={senderId:o,receiverId:i,status:"pending"},c=t(o,"requests"),h=JSON.parse(localStorage.getItem(c)||"[]");h.push(l),localStorage.setItem(c,JSON.stringify(h));const p=t(i,"requests"),y=JSON.parse(localStorage.getItem(p)||"[]");y.push(l),localStorage.setItem(p,JSON.stringify(y)),n(T=>({requests:[...T.requests,l]}))},acceptMessageRequest:i=>{n(o=>{var D;const l=((D=o.user)==null?void 0:D.id)||"temp-user-id",c=o.requests.map(F=>F.senderId===i&&F.receiverId===l&&F.status==="pending"?{...F,status:"accepted"}:F),h=t(l,"requests");localStorage.setItem(h,JSON.stringify(c));const p=jw(),y=o.user,E=o.likedUsers.find(F=>F.id===i);if(!y||!E)return{requests:c};const T={chatRoomId:p,userIds:[l,i],userNames:[y.firstName||"Du",E.firstName||"Anvndare"],messages:[]},S={id:new Date().toISOString(),senderId:l,senderName:y.firstName||"Du",message:"Hej, trevligt att matcha!",timestamp:new Date().toISOString()};T.messages.push(S);const A=[...o.activeChats,T];localStorage.setItem(t(l,"activeChats"),JSON.stringify(A));const L=[...JSON.parse(localStorage.getItem(t(i,"activeChats"))||"[]"),T];return localStorage.setItem(t(i,"activeChats"),JSON.stringify(L)),{requests:c,activeChats:A}})},loadChatsFromStorage:()=>{const i=e().user;if(i){const o=t(i.id,"activeChats"),l=JSON.parse(localStorage.getItem(o)||"[]");n({activeChats:l})}},setActiveChats:i=>{var l;n({activeChats:i});const o=(l=e().user)==null?void 0:l.id;o&&localStorage.setItem(t(o,"activeChats"),JSON.stringify(i))},loadRequestsFromStorage:()=>{const i=e().user;if(!i)return;const o=t(i.id,"requests"),l=localStorage.getItem(o);if(l){const c=JSON.parse(l);n({requests:c})}else n({requests:[]})},rejectMessageRequest:i=>{var c;const o=((c=e().user)==null?void 0:c.id)||"temp-user-id",l=e().requests.map(h=>h.senderId===i&&h.receiverId===o&&h.status==="pending"?{...h,status:"rejected"}:h);localStorage.setItem(t(o,"requests"),JSON.stringify(l)),n({requests:l})},loadDeniedUsersFromStorage:()=>{const i=e().user;if(!i)return;const o=t(i.id,"deniedUsers"),l=JSON.parse(localStorage.getItem(o)||"[]");n({deniedUsers:l})},loadUserFromStorage:()=>{var l;const i=t(((l=e().user)==null?void 0:l.id)??"","user"),o=localStorage.getItem(i);if(o){const c=JSON.parse(o);n({user:c})}}}}),Up=Jc(),Kx=async n=>{try{const t=(await wA(pn,n.email,n.password)).user,i=mn(Up,"users",t.uid);return await nd(i,{id:t.uid,email:n.email,firstName:n.firstName,lastName:n.lastName,age:n.age,city:n.city,gender:n.gender,sexualOrientation:n.sexualOrientation,religion:n.religion,interests:n.interests,hasChildren:n.hasChildren,wantsChildren:n.wantsChildren,smokes:n.smokes,relationshipStatus:n.relationshipStatus,education:n.education,favoriteSong:n.favoriteSong,favoriteMovie:n.favoriteMovie,lifeStatement1:n.lifeStatement1,lifeStatement2:n.lifeStatement2,hasUsedPromoCode:n.hasUsedPromoCode,createdAt:new Date}),!0}catch(e){return e.message}},Gx=async(n,e)=>{try{const i=(await TA(pn,n,e)).user,o=mn(Up,"users",i.uid),l=await QE(o);if(l.exists()){const c=l.data();return en.getState().setUser({id:i.uid,firstName:c.firstName||"Oknd",lastName:c.lastName||"Ej angivet",email:c.email||"",age:c.age||0,city:c.city||"Ej angivet",gender:c.gender||"Ej angivet",sexualOrientation:c.sexualOrientation||"Ej angivet",religion:c.religion||"Ej angivet",interests:c.interests||[],hasChildren:c.hasChildren||!1,wantsChildren:c.wantsChildren||!1,smokes:c.smokes||"Ej angivet",relationshipStatus:c.relationshipStatus||"Ej angivet",education:c.education||"Ej angivet",favoriteSong:c.favoriteSong||"Ej angivet",favoriteMovie:c.favoriteMovie||"Ej angivet",lifeStatement1:c.lifeStatement1||"Ej angivet",lifeStatement2:c.lifeStatement2||"Ej angivet",ommig:c.ommig||"Ej angivet",credits:c.credits||0,purchasedEmojis:c.purchasedEmojis||[],vipStatus:c.vipStatus||!1,vipExpiry:c.vipExpiry||null,vipPlusStatus:c.vipPlusStatus||!1,hasUsedPromoCode:c.hasUsedPromoCode||!1,purchaseEmoji:(h,p)=>{},updateUser:h=>{},addCredits:h=>{}}),{...c,id:i.uid}}else throw console.error("Anvndardata finns inte i Firestore"),new Error("Anvndardata finns inte i Firestore.")}catch(t){return console.error(" Inloggning misslyckades:",t.message),t.message}};async function Qx(n){try{const e=pn.currentUser;if(!e||e.uid!==n)throw new Error("Ingen anvndare inloggad");const t=e.email;if(!t)throw new Error("Kan inte hmta e-postadress.");const i="Ange ditt lsenord fr att radera ditt konto:",o=Ls.credential(t,i);await _A(e,o);const l=mn(Up,"users",n);await vP(l),await CA(e)}catch(e){throw console.error("Fel vid borttagning av anvndare:",e),e}}const Jx=async()=>{var n;if(!pn.currentUser)return Promise.reject(new Error("No current user"));if(!((n=pn.currentUser)!=null&&n.emailVerified))try{await Cv(pn.currentUser)}catch(e){if(e instanceof Ar)if(e.code==="auth/too-many-requests")await Cv(pn.currentUser);else throw console.error("Error sending email verification:",e.message),e;else throw console.error("Unknown error:",e),e}};var Xh={exports:{}},Zh,Mv;function Yx(){if(Mv)return Zh;Mv=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zh=n,Zh}var ef,Fv;function Xx(){if(Fv)return ef;Fv=1;var n=Yx();function e(){}function t(){}return t.resetWarningCache=e,ef=function(){function i(c,h,p,y,E,T){if(T!==n){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}i.isRequired=i;function o(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},ef}var Uv;function Zx(){return Uv||(Uv=1,Xh.exports=Xx()()),Xh.exports}var e1=Zx();const dn=jf(e1);var t1=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function xf(){return xf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xf.apply(this,arguments)}function n1(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function Ju(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function r1(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Nf(n,e)}function Nf(n,e){return Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,o){return i.__proto__=o,i},Nf(n,e)}var od=function(n){r1(e,n);function e(){var i;return i=n.call(this)||this,i.handleExpired=i.handleExpired.bind(Ju(i)),i.handleErrored=i.handleErrored.bind(Ju(i)),i.handleChange=i.handleChange.bind(Ju(i)),i.handleRecaptchaRef=i.handleRecaptchaRef.bind(Ju(i)),i}var t=e.prototype;return t.getCaptchaFunction=function(o){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[o]:this.props.grecaptcha[o]:null},t.getValue=function(){var o=this.getCaptchaFunction("getResponse");return o&&this._widgetId!==void 0?o(this._widgetId):null},t.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},t.execute=function(){var o=this.getCaptchaFunction("execute");if(o&&this._widgetId!==void 0)return o(this._widgetId);this._executeRequested=!0},t.executeAsync=function(){var o=this;return new Promise(function(l,c){o.executionResolve=l,o.executionReject=c,o.execute()})},t.reset=function(){var o=this.getCaptchaFunction("reset");o&&this._widgetId!==void 0&&o(this._widgetId)},t.forceReset=function(){var o=this.getCaptchaFunction("reset");o&&o()},t.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},t.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},t.handleChange=function(o){this.props.onChange&&this.props.onChange(o),this.executionResolve&&(this.executionResolve(o),delete this.executionReject,delete this.executionResolve)},t.explicitRender=function(){var o=this.getCaptchaFunction("render");if(o&&this._widgetId===void 0){var l=document.createElement("div");this._widgetId=o(l,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(l)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},t.componentDidMount=function(){this.explicitRender()},t.componentDidUpdate=function(){this.explicitRender()},t.handleRecaptchaRef=function(o){this.captcha=o},t.render=function(){var o=this.props;o.sitekey,o.onChange,o.theme,o.type,o.tabindex,o.onExpired,o.onErrored,o.size,o.stoken,o.grecaptcha,o.badge,o.hl,o.isolated;var l=n1(o,t1);return U.createElement("div",xf({},l,{ref:this.handleRecaptchaRef}))},e}(U.Component);od.displayName="ReCAPTCHA";od.propTypes={sitekey:dn.string.isRequired,onChange:dn.func,grecaptcha:dn.object,theme:dn.oneOf(["dark","light"]),type:dn.oneOf(["image","audio"]),tabindex:dn.number,onExpired:dn.func,onErrored:dn.func,size:dn.oneOf(["compact","normal","invisible"]),stoken:dn.string,hl:dn.string,badge:dn.oneOf(["bottomright","bottomleft","inline"]),isolated:dn.bool};od.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var tf={exports:{}},We={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function i1(){if(zv)return We;zv=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,t=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,p=n?Symbol.for("react.async_mode"):60111,y=n?Symbol.for("react.concurrent_mode"):60111,E=n?Symbol.for("react.forward_ref"):60112,T=n?Symbol.for("react.suspense"):60113,S=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,b=n?Symbol.for("react.lazy"):60116,L=n?Symbol.for("react.block"):60121,D=n?Symbol.for("react.fundamental"):60117,F=n?Symbol.for("react.responder"):60118,Q=n?Symbol.for("react.scope"):60119;function G(K){if(typeof K=="object"&&K!==null){var ie=K.$$typeof;switch(ie){case e:switch(K=K.type,K){case p:case y:case i:case l:case o:case T:return K;default:switch(K=K&&K.$$typeof,K){case h:case E:case b:case A:case c:return K;default:return ie}}case t:return ie}}}function te(K){return G(K)===y}return We.AsyncMode=p,We.ConcurrentMode=y,We.ContextConsumer=h,We.ContextProvider=c,We.Element=e,We.ForwardRef=E,We.Fragment=i,We.Lazy=b,We.Memo=A,We.Portal=t,We.Profiler=l,We.StrictMode=o,We.Suspense=T,We.isAsyncMode=function(K){return te(K)||G(K)===p},We.isConcurrentMode=te,We.isContextConsumer=function(K){return G(K)===h},We.isContextProvider=function(K){return G(K)===c},We.isElement=function(K){return typeof K=="object"&&K!==null&&K.$$typeof===e},We.isForwardRef=function(K){return G(K)===E},We.isFragment=function(K){return G(K)===i},We.isLazy=function(K){return G(K)===b},We.isMemo=function(K){return G(K)===A},We.isPortal=function(K){return G(K)===t},We.isProfiler=function(K){return G(K)===l},We.isStrictMode=function(K){return G(K)===o},We.isSuspense=function(K){return G(K)===T},We.isValidElementType=function(K){return typeof K=="string"||typeof K=="function"||K===i||K===y||K===l||K===o||K===T||K===S||typeof K=="object"&&K!==null&&(K.$$typeof===b||K.$$typeof===A||K.$$typeof===c||K.$$typeof===h||K.$$typeof===E||K.$$typeof===D||K.$$typeof===F||K.$$typeof===Q||K.$$typeof===L)},We.typeOf=G,We}var Bv;function s1(){return Bv||(Bv=1,tf.exports=i1()),tf.exports}var nf,$v;function o1(){if($v)return nf;$v=1;var n=s1(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},l={};l[n.ForwardRef]=i,l[n.Memo]=o;function c(b){return n.isMemo(b)?o:l[b.$$typeof]||e}var h=Object.defineProperty,p=Object.getOwnPropertyNames,y=Object.getOwnPropertySymbols,E=Object.getOwnPropertyDescriptor,T=Object.getPrototypeOf,S=Object.prototype;function A(b,L,D){if(typeof L!="string"){if(S){var F=T(L);F&&F!==S&&A(b,F,D)}var Q=p(L);y&&(Q=Q.concat(y(L)));for(var G=c(b),te=c(L),K=0;K<Q.length;++K){var ie=Q[K];if(!t[ie]&&!(D&&D[ie])&&!(te&&te[ie])&&!(G&&G[ie])){var x=E(L,ie);try{h(b,ie,x)}catch{}}}}return b}return nf=A,nf}var a1=o1();const l1=jf(a1);function Of(){return Of=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Of.apply(this,arguments)}function u1(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function c1(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var nr={},d1=0;function h1(n,e){return e=e||{},function(i){var o=i.displayName||i.name||"Component",l=function(h){c1(p,h);function p(E,T){var S;return S=h.call(this,E,T)||this,S.state={},S.__scriptURL="",S}var y=p.prototype;return y.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+d1++),this.__scriptLoaderID},y.setupScriptURL=function(){return this.__scriptURL=typeof n=="function"?n():n,this.__scriptURL},y.asyncScriptLoaderHandleLoad=function(T){var S=this;this.setState(T,function(){return S.props.asyncScriptOnLoad&&S.props.asyncScriptOnLoad(S.state)})},y.asyncScriptLoaderTriggerOnScriptLoaded=function(){var T=nr[this.__scriptURL];if(!T||!T.loaded)throw new Error("Script is not loaded.");for(var S in T.observers)T.observers[S](T);delete window[e.callbackName]},y.componentDidMount=function(){var T=this,S=this.setupScriptURL(),A=this.asyncScriptLoaderGetScriptLoaderID(),b=e,L=b.globalName,D=b.callbackName,F=b.scriptId;if(L&&typeof window[L]<"u"&&(nr[S]={loaded:!0,observers:{}}),nr[S]){var Q=nr[S];if(Q&&(Q.loaded||Q.errored)){this.asyncScriptLoaderHandleLoad(Q);return}Q.observers[A]=function(x){return T.asyncScriptLoaderHandleLoad(x)};return}var G={};G[A]=function(x){return T.asyncScriptLoaderHandleLoad(x)},nr[S]={loaded:!1,observers:G};var te=document.createElement("script");te.src=S,te.async=!0;for(var K in e.attributes)te.setAttribute(K,e.attributes[K]);F&&(te.id=F);var ie=function(C){if(nr[S]){var P=nr[S],k=P.observers;for(var R in k)C(k[R])&&delete k[R]}};D&&typeof window<"u"&&(window[D]=function(){return T.asyncScriptLoaderTriggerOnScriptLoaded()}),te.onload=function(){var x=nr[S];x&&(x.loaded=!0,ie(function(C){return D?!1:(C(x),!0)}))},te.onerror=function(){var x=nr[S];x&&(x.errored=!0,ie(function(C){return C(x),!0}))},document.body.appendChild(te)},y.componentWillUnmount=function(){var T=this.__scriptURL;if(e.removeOnUnmount===!0)for(var S=document.getElementsByTagName("script"),A=0;A<S.length;A+=1)S[A].src.indexOf(T)>-1&&S[A].parentNode&&S[A].parentNode.removeChild(S[A]);var b=nr[T];b&&(delete b.observers[this.asyncScriptLoaderGetScriptLoaderID()],e.removeOnUnmount===!0&&delete nr[T])},y.render=function(){var T=e.globalName,S=this.props;S.asyncScriptOnLoad;var A=S.forwardedRef,b=u1(S,["asyncScriptOnLoad","forwardedRef"]);return T&&typeof window<"u"&&(b[T]=typeof window[T]<"u"?window[T]:void 0),b.ref=A,U.createElement(i,b)},p}(U.Component),c=U.forwardRef(function(h,p){return U.createElement(l,Of({},h,{forwardedRef:p}))});return c.displayName="AsyncScriptLoader("+o+")",c.propTypes={asyncScriptOnLoad:dn.func},l1(c,i)}}var Df="onloadcallback",f1="grecaptcha";function bf(){return typeof window<"u"&&window.recaptchaOptions||{}}function p1(){var n=bf(),e=n.useRecaptchaNet?"recaptcha.net":"www.google.com";return n.enterprise?"https://"+e+"/recaptcha/enterprise.js?onload="+Df+"&render=explicit":"https://"+e+"/recaptcha/api.js?onload="+Df+"&render=explicit"}const m1=h1(p1,{callbackName:Df,globalName:f1,attributes:bf().nonce?{nonce:bf().nonce}:{}})(od),g1=()=>{const n=Mn(),[e,t]=U.useState({firstName:"",lastName:"",age:{month:"",day:"",year:""},city:"",gender:"",sexualOrientation:"",religion:"",interests:[],hasChildren:!1,wantsChildren:!1,smokes:"",relationshipStatus:"",education:"",favoriteSong:"",favoriteMovie:"",email:"",lifeStatement1:"",lifeStatement2:"",password:"",credits:0,purchasedEmojis:[],vipStatus:!1,vipExpiry:null,vipPlusStatus:!1,vipPlusExpiry:null,hasUsedPromoCode:!1}),i=k=>{t(R=>{const j=[...R.interests],N=j.indexOf(k);return N>-1?j.splice(N,1):j.length<5&&j.push(k),{...R,interests:j}})},[o,l]=U.useState({}),[c,h]=U.useState(1),[p,y]=U.useState(!1),[E,T]=U.useState(!1),[S,A]=U.useState(!1),[b,L]=U.useState(!1),D=k=>{const{name:R,value:j,type:N}=k.target;let Ae=j;R==="email"&&(Ae=j.toLowerCase()),t(Ne=>{if(R==="age")return{...Ne,age:{...Ne.age,[R]:Ae}};if(N==="checkbox"){const Pe=k.target.checked;return{...Ne,[R]:Pe}}else if(N==="select-multiple"){const Pe=k.target.selectedOptions,De=Array.from(Pe).map(se=>se.value);return{...Ne,[R]:De}}else return{...Ne,[R]:Ae}})},F=k=>{T(k.target.checked)},Q=()=>{L(!0)},G=()=>{A(!0)},te=()=>{T(!0),A(!1)},K=()=>{A(!1)},ie=()=>{n("/")},x=()=>{const k=ly(c,e);if(Object.keys(k).length>0){l(k);return}l({}),h(R=>R+1)},C=()=>{h(k=>Math.max(k-1,1))},P=async k=>{k.preventDefault();const R=ly(6,e);if(Object.keys(R).length>0){l(R);return}try{await Kx(e)===!0?(y(!0),await Jx()):l("Registrerad! ")}catch(j){console.error("Fel vid registrering:",j),l("Ett fel uppstod vid registrering.")}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img",onClick:ie})}),v.jsx("div",{}),v.jsx("div",{className:"DivforRubrik",children:v.jsxs("h1",{className:"Rubriktext",children:[v.jsx("span",{className:"firstPart",children:"Regis"}),v.jsx("span",{className:"secondPart",children:"trera di"}),v.jsx("span",{className:"firstPart",children:"g hr"})]})}),p&&v.jsxs("div",{className:"confirmation-message",children:[v.jsx("h2",{children:"Du har blivit registrerad!"}),v.jsx("button",{className:"accountBtn",onClick:ie,children:"Till startsidan"})]}),v.jsxs("form",{onSubmit:P,children:[c===1&&v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"email",children:"E-post"}),v.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:D,placeholder:"Skriv din e-post"}),o.email&&v.jsx("span",{className:"error",children:o.email}),v.jsx("label",{htmlFor:"password",children:"Lsenord "}),v.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:D,placeholder:"Skriv in lsenord"}),v.jsx("p",{className:"ptext",children:" Minst 8 tecken lngt,En stor bokstav och ett tecken"}),o.password&&v.jsx("span",{className:"error",children:o.password}),v.jsx("label",{htmlFor:"firstName",children:"Frnamn"}),v.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:D}),o.firstName&&v.jsx("span",{className:"error",children:o.firstName}),v.jsx("label",{htmlFor:"lastName",children:"Efternamn"}),v.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:D}),o.lastName&&v.jsx("span",{className:"error",children:o.lastName}),v.jsx("label",{htmlFor:"month",children:"Mnad"}),v.jsx("input",{type:"number",id:"month",name:"month",value:e.age.month,onChange:D,min:"1",max:"12",placeholder:"Vlj mnad"}),v.jsx("label",{htmlFor:"day",children:"Dag"}),v.jsx("input",{type:"number",id:"day",name:"day",value:e.age.day,onChange:D,min:"1",max:"31",placeholder:"Vlj dag"}),v.jsx("label",{htmlFor:"year",children:"r"}),v.jsx("input",{type:"number",id:"year",name:"year",value:e.age.year,onChange:D,min:"1945",max:"2025",placeholder:"Skriv in r (4 siffror)"}),v.jsx("label",{htmlFor:"city",children:"Stad"}),v.jsx("input",{type:"text",id:"city",name:"city",value:e.city,onChange:D}),o.city&&v.jsx("span",{className:"error",children:o.city})]}),c===2&&v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"gender",children:"Kn"}),v.jsxs("select",{id:"gender",name:"gender",value:e.gender,onChange:D,children:[v.jsx("option",{value:"",children:"Vlj kn"}),v.jsx("option",{value:"Man",children:"Man"}),v.jsx("option",{value:"Kvinna",children:"Kvinna"})]}),o.gender&&v.jsx("span",{className:"error",children:o.gender}),v.jsx("label",{htmlFor:"sexualOrientation",children:"Sexuell lggning"}),v.jsxs("select",{id:"sexualOrientation",name:"sexualOrientation",value:e.sexualOrientation,onChange:D,children:[v.jsx("option",{value:"",children:"Vlj sexuell lggning"}),v.jsx("option",{value:"Hetero",children:"Hetero"}),v.jsx("option",{value:"Homo",children:"Homo"}),v.jsx("option",{value:"Bi",children:"Bisexuell"}),v.jsx("option",{value:"other",children:"Annat"})]}),o.sexualOrientation&&v.jsx("span",{className:"error",children:o.sexualOrientation})]}),c===3&&v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"religion",children:"Religion"}),v.jsxs("select",{id:"religion",name:"religion",value:e.religion,onChange:D,children:[v.jsx("option",{value:"",children:"Vlj religion"}),v.jsx("option",{value:"Kristen",children:"Kristen"}),v.jsx("option",{value:"Islam",children:"Muslim"}),v.jsx("option",{value:"Jude",children:"Jude"}),v.jsx("option",{value:"Hinduism",children:"Hindu"}),v.jsx("option",{value:"Annat",children:"Annat"}),v.jsx("option",{value:"Ingen",children:"Ingen"})]}),o.religion&&v.jsx("span",{className:"error",children:o.religion}),v.jsx("label",{htmlFor:"interests",children:"Vlj 5 intressen:"}),v.jsx("div",{className:"interest-buttons",children:CS.map(k=>v.jsx("button",{type:"button",className:`interest-button ${e.interests.includes(k.toLowerCase())?"selected":""}`,onClick:()=>i(k.toLowerCase()),disabled:e.interests.length>=5&&!e.interests.includes(k.toLowerCase()),children:k},k))}),o.interests&&v.jsx("span",{className:"error",children:o.interests})]}),c===4&&v.jsxs(v.Fragment,{children:[v.jsxs("label",{htmlFor:"hasChildren",children:["Har du barn?",v.jsx("input",{type:"checkbox",id:"hasChildren",name:"hasChildren",checked:e.hasChildren,onChange:D})]}),o.hasChildren&&v.jsx("span",{className:"error",children:o.hasChildren}),v.jsxs("label",{htmlFor:"wantsChildren",children:["Vill du ha barn?",v.jsx("input",{type:"checkbox",id:"wantsChildren",name:"wantsChildren",checked:e.wantsChildren,onChange:D})]}),o.wantsChildren&&v.jsx("span",{className:"error",children:o.wantsChildren}),v.jsx("label",{htmlFor:"smokes",children:"Rker du?"}),v.jsxs("div",{children:[v.jsxs("label",{children:[v.jsx("input",{type:"radio",id:"smokes_no",name:"smokes",value:"nej",checked:e.smokes==="nej",onChange:D}),"Nej"]}),v.jsxs("label",{children:[v.jsx("input",{type:"radio",id:"smokes_yes",name:"smokes",value:"ja",checked:e.smokes==="ja",onChange:D}),"Ja"]}),v.jsxs("label",{children:[v.jsx("input",{type:"radio",id:"smokes_occasional",name:"smokes",value:"festrker",checked:e.smokes==="festrker",onChange:D}),"Festrker"]})]}),o.smokes&&v.jsx("span",{className:"error",children:o.smokes})]}),c===5&&v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"relationshipStatus",children:"Vad sker du?"}),v.jsxs("select",{id:"relationshipStatus",name:"relationshipStatus",value:e.relationshipStatus,onChange:D,children:[v.jsx("option",{value:"",children:"Vlj vad du sker:"}),v.jsx("option",{value:"Serist",children:"Serist frhllande"}),v.jsx("option",{value:"ppet",children:"ppen fr serist"}),v.jsx("option",{value:"Vnner",children:"Nya vnner"})]}),o.relationshipStatus&&v.jsx("span",{className:"error",children:o.relationshipStatus}),v.jsx("label",{htmlFor:"education",children:"Utbildningsniv"}),v.jsxs("select",{id:"education",name:"education",value:e.education,onChange:D,children:[v.jsx("option",{value:"",children:"Vlj utbildning"}),v.jsx("option",{value:"Grundskola",children:"Grundskola"}),v.jsx("option",{value:"Gymnasium",children:"Gymnasium"}),v.jsx("option",{value:"Universitet",children:"Universitet"}),v.jsx("option",{value:"Kandidatexamen",children:" kandidatexamen "})]}),o.education&&v.jsx("span",{className:"error",children:o.education})]}),c===6&&v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"favoriteSong",children:"Favorit lt:"}),v.jsx("input",{type:"text",id:"favoriteSong",name:"favoriteSong",value:e.favoriteSong||"",onChange:D}),v.jsx("label",{htmlFor:"favoriteMovie",children:"Favorit film:"}),v.jsx("input",{type:"text",id:"favoriteMovie",name:"favoriteMovie",value:e.favoriteMovie||"",onChange:D}),v.jsx("p",{children:" Avsluta meningen "}),v.jsx("label",{children:"Jag skulle aldrig kunna leva utan..."}),v.jsx("input",{type:"text",name:"lifeStatement1",value:e.lifeStatement1,onChange:D}),v.jsx("label",{children:"Jag blir mest inspirerad nr..."}),v.jsx("input",{type:"text",name:"lifeStatement2",value:e.lifeStatement2,onChange:D}),v.jsxs("div",{className:"register-terms-checkbox",children:[v.jsx("input",{type:"checkbox",id:"agreeTerms",checked:E,onChange:F}),v.jsxs("label",{htmlFor:"agreeTerms",children:["Jag godknner"," ",v.jsx("a",{href:"#",onClick:G,children:"anvndarvillkoren"})]})]}),v.jsx("div",{className:"for-rechapta",children:v.jsx(m1,{sitekey:"6LcjQLcqAAAAANH5r9wv-Jaa3vQf6xlZVHJYsmjl",onChange:Q})})]}),v.jsxs("div",{className:"buttoncontainerinRegister",children:[c>1&&v.jsxs("button",{className:"accountBtn2",onClick:C,children:[" ",v.jsx("i",{className:"fas fa-arrow-left"})]}),c<6&&v.jsx("button",{className:"accountBtn",onClick:x,children:"Nsta"}),c===6&&v.jsx("button",{className:"accountBtn",type:"submit",disabled:!(E&&b),children:"Registrera"})]})]}),S&&v.jsx(kS,{onClose:K,onAccept:te})]})};var Vw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hv=Jr.createContext&&Jr.createContext(Vw),y1=["attr","size","title"];function v1(n,e){if(n==null)return{};var t=_1(n,e),i,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(o=0;o<l.length;o++)i=l[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function _1(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Nc(){return Nc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Nc.apply(this,arguments)}function qv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,i)}return t}function Oc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qv(Object(t),!0).forEach(function(i){E1(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qv(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function E1(n,e,t){return e=w1(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function w1(n){var e=T1(n,"string");return typeof e=="symbol"?e:e+""}function T1(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lw(n){return n&&n.map((e,t)=>Jr.createElement(e.tag,Oc({key:t},e.attr),Lw(e.child)))}function I1(n){return e=>Jr.createElement(S1,Nc({attr:Oc({},n.attr)},e),Lw(n.child))}function S1(n){var e=t=>{var{attr:i,size:o,title:l}=n,c=v1(n,y1),h=o||t.size||"1em",p;return t.className&&(p=t.className),n.className&&(p=(p?p+" ":"")+n.className),Jr.createElement("svg",Nc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:p,style:Oc(Oc({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),l&&Jr.createElement("title",null,l),n.children)};return Hv!==void 0?Jr.createElement(Hv.Consumer,null,t=>e(t)):e(Vw)}function Wv(n){return I1({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"},child:[]}]})(n)}const Kv=n=>{if(!n)return 0;const e=new Date(n).getTime()-new Date().getTime();return e>0?Math.floor(e/(1e3*3600*24)):0},C1=(n,e,t)=>{const i=new Date,o=new Date(n,e-1,t);let l=i.getFullYear()-o.getFullYear();return(i.getMonth()<o.getMonth()||i.getMonth()===o.getMonth()&&i.getDate()<o.getDate())&&l--,l},Ya=async n=>{const e=mn(Rr,"users",n.id),t={credits:n.credits??0,vipStatus:n.vipStatus??!1,vipExpiry:n.vipExpiry??null,vipPlusStatus:n.vipPlusStatus??!1,vipPlusExpiry:n.vipPlusExpiry??null,purchasedEmojis:n.purchasedEmojis??[],city:n.city??null,sexualOrientation:n.sexualOrientation??null,hasUsedPromoCode:n.hasUsedPromoCode??!1};try{await Ji(e,t)}catch(i){console.error(i)}},k1=async(n,e,t)=>{const i=mn(Rr,"users",n),o={[`purchasedEmojis.${e}.count`]:t};try{await Ji(i,o)}catch(l){console.error(l)}},R1=()=>{var x,C,P;const n=Mn(),e=en(k=>k.user),{setUser:t}=en(),[i,o]=U.useState(""),[l,c]=U.useState(!1),[h,p]=U.useState(!1),[y,E]=U.useState({firstName:!1,city:!1,sexualOrientation:!1}),[T,S]=U.useState({city:e?e.city:"",sexualOrientation:e?e.sexualOrientation:""}),A=async()=>{try{const k=pn.currentUser;if(k){const R=mn(Rr,"users",k.uid);await Ji(R,{"status.online":!1,"status.lastLogout":YE()})}await pn.signOut(),n("/")}catch(k){console.error("Fel vid utloggning:",k)}};if(U.useEffect(()=>{e&&S({city:e.city,sexualOrientation:e.sexualOrientation})},[e]),!e)return v.jsx("div",{children:"Inga anvndardata tillgngliga"});const b=()=>{p(!h)},L=k=>{E(R=>({...R,[k]:!0}))},D=k=>{E(R=>({...R,[k]:!1}))},F=k=>{const{name:R,value:j}=k.target;S(N=>({...N,[R]:j}))},Q=async()=>{try{if(!pn.currentUser){console.error("Ingen anvndare inloggad!");return}await Qx(pn.currentUser.uid)}catch(k){console.error("Misslyckades att radera kontot:",k)}},G=Kv(e.vipExpiry),te=Kv(e.vipPlusExpiry),K=(k,R,j)=>{const N=new Date,Ae=new Date(k,R-1,j);let Ne=N.getFullYear()-Ae.getFullYear();return(N.getMonth()<Ae.getMonth()||N.getMonth()===Ae.getMonth()&&N.getDate()<Ae.getDate())&&Ne--,Ne},ie=async k=>{k.preventDefault(),o("ndringarna har sparats!");const R={...e,city:T.city,sexualOrientation:T.sexualOrientation};try{await Ya(R),t(R)}catch(j){console.error("Fel vid uppdatering:",j)}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img"})}),v.jsxs("h1",{className:"Rubriktext",children:[v.jsx("span",{className:"firstPart",children:"KO"}),v.jsx("span",{className:"secondPart",children:"NT"}),v.jsx("span",{className:"firstPart",children:"O"})]}),v.jsx("div",{className:"buttondivforback",children:v.jsx("button",{className:"btnback",onClick:()=>n("/homepage"),children:v.jsx("i",{className:"fas fa-arrow-left"})})}),v.jsx("div",{className:"result-info",children:v.jsx("button",{onClick:A,className:"btnmatchsite",children:"Logga ut"})}),v.jsxs("div",{className:"result-info",children:[v.jsx("button",{onClick:()=>n("/match"),className:"btnmatchsite",children:"Dina Gillade"}),v.jsx("button",{onClick:()=>n("/messages"),className:"btnmatchsite",children:"Meddelanden & Frfrgningar"}),v.jsx("button",{onClick:()=>n("/shop"),className:"btnmatchsite",children:"Till shoppen"})]}),v.jsxs("h2",{className:"confirmation-message",children:["Dina uppgifter:",v.jsx("span",{className:`arrow ${h?"open":""}`,onClick:b,children:""})]}),h&&v.jsxs("div",{className:"columndiv2",children:[v.jsx("p",{children:v.jsxs("strong",{children:["Ditt namn: ",e.firstName]})}),v.jsx("p",{children:v.jsxs("strong",{children:["lder: ",(x=e==null?void 0:e.age)!=null&&x.year&&((C=e==null?void 0:e.age)!=null&&C.month)&&((P=e==null?void 0:e.age)!=null&&P.day)?K(Number(e.age.year),Number(e.age.month),Number(e.age.day)):"Ej angivet"]})}),e.vipPlusStatus?v.jsxs("p",{children:["Du har ",v.jsx("strong",{children:"VIP Plus"}),",",te>0?`${te} dagar kvar p din VIP Plus.`:"Din VIP Plus har gtt ut."]}):e.vipStatus?v.jsxs("p",{children:["Du har ",v.jsx("strong",{children:"VIP"}),",",G>0?`${G} dagar kvar p din VIP.`:"Din VIP har gtt ut."]}):v.jsx("p",{children:"Du har ingen aktiv VIP."}),v.jsxs("p",{children:[v.jsx("strong",{children:"Stad:"}),y.city?v.jsx("input",{type:"text",id:"city",name:"city",value:T.city,onChange:F,onBlur:()=>D("city")}):v.jsxs(v.Fragment,{children:[T.city,v.jsx(Wv,{className:"edit-icon",onClick:()=>L("city")})]})]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Sexuell lggning:"}),y.sexualOrientation?v.jsxs("select",{id:"sexualOrientation",name:"sexualOrientation",value:T.sexualOrientation,onChange:F,onBlur:()=>D("sexualOrientation"),children:[v.jsx("option",{value:"",children:"Vlj sexuell lggning"}),v.jsx("option",{value:"Hetero",children:"Hetero"}),v.jsx("option",{value:"Homo",children:"Homo"}),v.jsx("option",{value:"Bi",children:"Bisexuell"}),v.jsx("option",{value:"Other",children:"Annat"})]}):v.jsxs(v.Fragment,{children:[T.sexualOrientation||"Ej angiven",v.jsx(Wv,{className:"edit-icon",onClick:()=>L("sexualOrientation")})]})]}),v.jsx("button",{className:"delete-btn",onClick:()=>c(!0),children:"Radera konto?"}),l&&v.jsxs("div",{className:"confirmation-box",children:[v.jsxs("p",{children:["r du sker p att du vill radera ditt konto? ",v.jsx("br",{}),v.jsx("span",{className:"text-red",children:"Hela kontot kommer att raderas."})]}),v.jsxs("div",{className:"optiondeletecancel",children:[v.jsx("button",{className:"cancel-btn",onClick:()=>c(!1),children:"Avbryt"}),v.jsx("button",{className:"delete-btn",onClick:Q,children:"Radera"})]})]}),v.jsx("button",{type:"submit",className:"accountBtn",onClick:ie,children:"Spara"}),i&&v.jsx("p",{children:i})]})]})},P1=()=>{const[n,e]=U.useState(""),[t,i]=U.useState(""),[o,l]=U.useState(!1),c=async()=>{if(!n){i("Please enter your email address.");return}l(!0),i("");try{await EA(pn,n),i("Password reset email sent!")}catch(h){console.error("Password reset failed:",h),i("Failed to send reset email. Please try again.")}finally{l(!1)}};return v.jsxs("div",{className:"forgotpassworddiv",children:[v.jsx("input",{type:"email",value:n,onChange:h=>e(h.target.value),placeholder:"Skriv in din mejl "}),v.jsx("button",{className:"btnreset",onClick:c,disabled:o,children:o?"Sending...":"Reset Password"}),t&&v.jsx("p",{children:t})]})},A1=Jc(),x1=()=>{const[n,e]=U.useState(""),[t,i]=U.useState(""),[o,l]=U.useState(""),[c,h]=U.useState(!1),p=Mn(),y=()=>{h(!0)},E=async T=>{T.preventDefault();try{const S=await Gx(n.toLowerCase(),t);if(typeof S=="string"){l(S);return}const A=pn.currentUser;if(A){if(!A.emailVerified){l("Verifiera din email innan du loggar in. ");return}const b=mn(A1,"users",A.uid);await Ji(b,{"status.online":!0,"status.lastLogin":YE()}),p("/homepage")}else l("Anvndaren kunde inte hittas.")}catch(S){console.error("Fel vid inloggning:",S.message),S.code==="auth/wrong-password"?l("Felaktigt lsenord."):S.code==="auth/user-not-found"?l("Ingen anvndare med det e-postadressen."):l("Ngot gick fel vid inloggning.")}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"logo",className:"img"})}),v.jsx("h2",{className:"login-header",children:"Logga in"}),v.jsxs("div",{className:"login-container",children:[v.jsxs("form",{className:"form-login",onSubmit:E,children:[v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"email",children:"E-post"}),v.jsx("input",{type:"email",id:"email",value:n,onChange:T=>e(T.target.value),required:!0})]}),v.jsxs("div",{className:"input-group",children:[v.jsx("label",{htmlFor:"password",children:"Lsenord"}),v.jsx("input",{type:"password",id:"password",value:t,onChange:T=>i(T.target.value),required:!0})]}),v.jsx("button",{type:"submit",className:"login-button",children:"Logga in"})]}),o&&v.jsx("p",{className:"login-error",children:" Fel vid inloggning"}),v.jsx("button",{className:"justtextbtn",onClick:y,children:"Glmt lsenord"}),c&&v.jsx(P1,{})]})]})},N1=()=>{const{user:n,likedUsers:e,removeLikedUser:t,sendMessageRequest:i,requests:o}=en(),l=Mn(),[c,h]=U.useState("all"),p=()=>{l("/account")},y=()=>{l("/messages")},E=L=>{if(!n)return 0;let D=0;const F=7;(n.interests||"")===(L.interests||"")&&D++,n.smokes===L.smokes&&D++,n.religion===L.religion&&D++,n.wantsChildren===L.wantsChildren&&D++,n.hasChildren===L.hasChildren&&D++,n.education===L.education&&D++,n.relationshipStatus===L.relationshipStatus&&D++;const Q=D/F*100;return Math.round(Q)},T=L=>{const D=E(L);switch(c){case"0-30":return D>=0&&D<=30;case"30-60":return D>30&&D<=60;case"60-75":return D>60&&D<=75;case"75-100":return D>75&&D<=100;default:return!0}},S=L=>{h(L.target.value)},A=L=>{L?t(L):console.error("User is undefined")},b=L=>{L?i(L):console.error("Liked User is undefined")};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"logo",className:"img"})}),v.jsx("button",{className:"btnback",onClick:p,children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsxs("div",{className:"columndiv2",children:[v.jsx("h3",{children:"De anvndare du har gillat:"}),v.jsx("button",{className:"accountBtn",onClick:y,children:" Meddelanden "}),v.jsx("label",{htmlFor:"matchRange",children:"Filtrera efter matchning:"}),v.jsxs("select",{id:"matchRange",value:c,onChange:S,children:[v.jsx("option",{value:"all",children:"Alla"}),v.jsx("option",{value:"0-30",children:"0-30%"}),v.jsx("option",{value:"30-60",children:"30-60%"}),v.jsx("option",{value:"60-75",children:"60-75%"}),v.jsx("option",{value:"75-100",children:"75-100%"})]}),v.jsx("ul",{children:e.length===0?v.jsx("p",{children:"Du har inte gillat ngon nnu."}):e.filter(T).map(L=>{var Q,G,te;const D=E(L),F=o.find(K=>K.receiverId===L.id);return v.jsxs("li",{children:[v.jsxs("h4",{children:[L.firstName,v.jsx("button",{className:"deletebtn",onClick:()=>A(L.id),children:"X"})]}),"  ",v.jsxs("p",{children:[v.jsxs("strong",{children:["    r"," ",(Q=L.age)!=null&&Q.year&&((G=L.age)!=null&&G.month)&&((te=L.age)!=null&&te.day)?C1(Number(L.age.year),Number(L.age.month),Number(L.age.day)):"Ej angivet",", r gammal "]}),"  "]}),v.jsxs("p",{children:[" ",v.jsxs("strong",{children:[" ",D,"%  Matchning "]})," "]}),D>10&&!F&&v.jsx("button",{onClick:()=>b(L.id),className:"sendmessagebtn center-button",children:" Skicka frfrgan  "}),F&&(F.status==="pending"?v.jsx("p",{children:"Frfrgan skickad, vnta p svar!"}):F.status==="accepted"?v.jsx("p",{children:"Ni r nu matchade! "}):null)]},L.id)})})]})]})},O1=()=>{const{requests:n,likedUsers:e,acceptMessageRequest:t,removeLikedUser:i,activeChats:o,setChats:l}=en(),c=Mn(),{user:h}=en(),[p,y]=U.useState([]),E=()=>{c("/account")};U.useEffect(()=>{const A=h==null?void 0:h.id;if(!A)return;const b=`${A}-requests`,L=JSON.parse(localStorage.getItem(b)||"[]"),D=Array.from(new Set(L.map(F=>F.senderId))).map(F=>L.find(Q=>Q.senderId===F));y(D)},[h]);const T=async A=>{var Q;if(!h)return;const b=h.id;t(A);const L=jw();if(o.find(G=>G.chatRoomId===L)){console.log("Chat redan existerar."),c("/chat");return}const F={chatRoomId:L,userIds:[b,A],messages:[],userNames:[h.firstName,((Q=e.find(G=>G.id===A))==null?void 0:Q.firstName)||"Oknd"]};await nd(mn(Rr,"chats",L),F),l([...o,F]),localStorage.setItem(`${b}-activeChats`,JSON.stringify([...o,F])),c(`/chat/${L}`)},S=A=>{i(A);const b=n.filter(F=>F.senderId!==A),D=`${(h==null?void 0:h.id)||""}-requests`;localStorage.setItem(D,JSON.stringify(b))};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img"})}),v.jsx("div",{className:"buttondivforback",children:v.jsx("button",{onClick:E,className:"btnback",children:v.jsx("i",{className:"fas fa-arrow-left"})})}),v.jsxs("div",{className:"columndiv2",children:[v.jsx("p",{children:" Meddelande frfrgningar "}),n&&n.length===0?v.jsx("p",{children:"Inga nya meddelanden."}):n&&n.filter(A=>A.status==="pending").map((A,b)=>{const L=e&&e.find(D=>D.id===A.senderId);return L?v.jsxs("div",{className:"columndiv2",children:[v.jsxs("p",{children:[L.firstName," vill chatta med dig!"]}),A.status==="pending"&&v.jsxs("div",{children:[v.jsx("button",{onClick:()=>T(A.senderId),children:"Acceptera"}),v.jsx("button",{onClick:()=>S(A.senderId),children:"Neka"})]})]},`${A.senderId}-${b}`):null}),v.jsxs("div",{className:"columndiv2",children:[v.jsx("h2",{children:"Dina Chattar"}),o.length===0?v.jsx("p",{children:"Du har inga aktiva chattar."}):o.map(A=>{var L;const b=((L=A.userNames)==null?void 0:L.filter(D=>D!==(h==null?void 0:h.firstName)))||[];return v.jsx("div",{className:"divForallChats",children:v.jsx("button",{className:"ToChatBtn",onClick:()=>c(`/chat/${A.chatRoomId}`),children:b.join(", ")})},A.chatRoomId)})]})]})]})},Mw="/assets/bukett-QfDTUmHi.png",Fw="/assets/nalle1-C7Fb2LBN.png",Uw="/assets/nalle2-pk_eCP3f.png",zw="/assets/heart-ORPjMZ2P.png",Gv=async(n,e,t,i)=>{try{const o=mn(Rr,"chats",n),l=await QE(o);if(l.exists()){const c=l.data(),h=(c==null?void 0:c.messages)||[],p={senderId:e,senderName:t,message:i,timestamp:new Date().toISOString()},y=[...h,p];await Ji(o,{messages:y})}else{const c={userIds:[e,n],userNames:[t,n],messages:[{senderId:e,senderName:t,message:i,timestamp:new Date().toISOString()}]};await nd(o,c)}}catch(o){console.error("Fel vid att lgga till meddelande:",o)}},D1="/assets/heart2-BWFFuCiK.png",b1="/assets/vipblomma1-kzvKHKBz.png",j1="/assets/vipblomma2-6E4fcoH_.png",V1="/assets/Vipnalle-DHgCvnIX.png",L1=({chatRoomId:n,sendEmoji:e})=>{const[t,i]=U.useState(!1),{user:o}=en(),l=(o==null?void 0:o.vipPlusStatus)??!1,c=[{name:"heart2",src:D1,className:""},{name:"vipblomma1",src:b1,className:"small-emoji"},{name:"vipblomma2",src:j1,className:"small-emoji"},{name:"vipnalle",src:V1,className:"small-emoji"}],h=async p=>{if(!n||!(o!=null&&o.id)){console.error("chatRoomId eller user saknas!");return}try{await e(`<img src="${p}" alt="emoji" class="sent-emoji"/>`)}catch(y){console.error("Misslyckades att skicka emoji:",y)}};return l?v.jsxs("div",{className:"emoji-picker",children:[v.jsx("button",{onClick:()=>i(p=>!p),className:"emoji-btn",children:"VIP emojis"}),t&&v.jsx("div",{className:"emoji-list",children:c.map(p=>v.jsx("button",{onClick:()=>h(p.src),className:`emoji-item ${p.className}`,children:v.jsx("img",{src:p.src,alt:p.name,className:"emoji-img"})},p.name))})]}):null},M1=async(n,e,t)=>{if(!(!n||!e||!t))try{const i=mn(Rr,"reports",n+"_"+e);await nd(i,{chatRoomId:n,senderId:e,option:t,timestamp:new Date().toISOString()})}catch(i){console.error(i)}},F1=()=>{const[n,e]=U.useState(null),[t,i]=U.useState(""),{chatRoomId:o}=r_(),{user:l}=en();if(!l||!o)return v.jsx("p",{children:"Laddar..."});const c=async()=>{if(!t){e("Vnligen vlj en rapporttyp!");return}try{await M1(o,l.id,t),e("Rapporten skickades!")}catch(h){console.error("Fel vid rapportering:",h),e("Kunde inte skicka rapporten. Frsk igen.")}};return v.jsxs(v.Fragment,{children:[v.jsx("p",{children:"Du rapporterar anvndare som du chattar med !"}),v.jsxs("select",{onChange:h=>i(h.target.value),value:t,children:[v.jsx("option",{value:"",children:"Vlj en anledning fr rapporten"}),v.jsx("option",{value:"spam",children:"Spam"}),v.jsx("option",{value:"offensive",children:"Oacceptabelt beteende"}),v.jsx("option",{value:"abusive",children:"Hot eller trakasserier"}),v.jsx("option",{value:"sex",children:"Sexuella trakasserier"}),v.jsx("option",{value:"other",children:"Annat"})]}),v.jsx("button",{className:"reportbtn",onClick:c,children:"Skicka rapport"}),n&&v.jsx("p",{children:n})]})},Qv=()=>{var k;const{chatRoomId:n}=r_(),{activeChats:e,user:t}=en(),[i,o]=U.useState(""),[l,c]=U.useState(""),[h,p]=U.useState(!1),[y,E]=U.useState([]),T=e.find(R=>R.chatRoomId===n),S=Mn(),A=(t==null?void 0:t.purchasedEmojis)||[],[b,L]=U.useState("Laddar..."),[D,F]=U.useState(!0),[Q,G]=U.useState(!1),te=()=>{S("/messages")};U.useEffect(()=>{if(n){const R=mn(Rr,"chats",n),j=_P(R,N=>{if(N.exists()){const Ae=N.data();E((Ae==null?void 0:Ae.messages)||[]);const Ne=e.find(Pe=>Pe.chatRoomId===n);if(Ne){const Pe=Ne.userIds.find(se=>se!==(t==null?void 0:t.id))??"",De=Ne.userNames[Ne.userIds.indexOf(Pe)];L(De||"Oknd anvndare")}}F(!1)});return()=>j()}},[n,e,t]),U.useEffect(()=>{t||S("/")},[t,S]),U.useEffect(()=>{},[h]);const K=async()=>{if(l.trim()&&n&&(t!=null&&t.id)){const R={senderId:t.id,senderName:t.firstName??"Anvndare",message:l,timestamp:new Date().toISOString()};await Gv(n,R.senderId,R.senderName,R.message),c("")}},ie=async R=>{if(n&&(t!=null&&t.id)){const j={senderId:t.id,senderName:t.firstName||"Anvndare",message:R,timestamp:new Date().toISOString()};await Gv(n,j.senderId,j.senderName,j.message),c("")}},x=async R=>{var Ae;const j=((Ae=R.split("/").pop())==null?void 0:Ae.split("?")[0].replace(".png",""))||"",N=A.find(Ne=>Ne.emoji===j);if(N&&N.count>0){ie(`<img src="${R}" alt="emoji" class="sent-emoji"/>`);const Ne=A.map(Pe=>Pe.emoji===j?{...Pe,count:Math.max(Pe.count-1,0)}:Pe);en.setState(Pe=>Pe.user?{user:{...Pe.user,purchasedEmojis:Ne}}:(console.error("User saknas i state!"),Pe));try{const Pe=Ne.find(De=>De.emoji===j);t&&Pe?await k1(t.id,j,Pe.count):console.error("Anvndaren eller emojiItem saknas!")}catch(Pe){console.error("Fel vid uppdatering av emoji count i Firebase:",Pe)}}else o("Du har inga kvar av denna emoji.")};if(!t||!t.id)return v.jsx("p",{children:"Laddar..."});const C=R=>["nalle1","nalle2","bukett"].includes(R)?"small-emoji":"",P=()=>{G(!Q)};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"logo",className:"img"})}),v.jsx("div",{className:"buttondivforback",children:v.jsx("button",{className:"btnback",onClick:te,children:v.jsx("i",{className:"fas fa-arrow-left"})})}),v.jsxs("div",{className:"Rubriktext2-container",children:[v.jsx("h1",{className:"Rubriktext2",children:b}),v.jsx("p",{className:`status-inlog ${(k=T==null?void 0:T.status)!=null&&k.online?"online":"offline"}`})]}),v.jsx("div",{className:Q?"report-container open":"report-container",children:Q?v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"closebtn",onClick:P,children:""}),v.jsx(F1,{})]}):v.jsx("button",{className:"reportbtn",onClick:P,children:"Rapportera"})}),v.jsx("div",{className:"chat-container",children:v.jsx("div",{className:"chat-messages-container",children:y.length===0?v.jsx("p",{children:"Inga meddelanden n."}):y.map(R=>{var j;return v.jsxs("div",{className:`chat-message ${R.senderId===(t==null?void 0:t.id)?"sent":"received"}`,children:[v.jsx("p",{className:`status-inlog ${(j=T==null?void 0:T.status)!=null&&j.online?"online":"offline"}`}),v.jsxs("div",{className:"message-content",children:[v.jsx("p",{className:"sender",children:R.senderId===(t==null?void 0:t.id)?"Du":R.senderName}),v.jsx("p",{className:"message-text",dangerouslySetInnerHTML:{__html:R.message}})]})]},R.id)})})}),v.jsxs("div",{className:"chat-message-input-container",children:[v.jsx("textarea",{value:l,onChange:R=>c(R.target.value),placeholder:"Skriv ditt meddelande..."}),v.jsx("button",{className:"sendBtn",onClick:K,disabled:!l.trim(),children:"Skicka"})]}),v.jsxs("div",{className:"rowBtncontainer",children:[v.jsx("button",{onClick:()=>p(!h),className:"emoji-btn",children:"Emojis"}),v.jsx("p",{children:i}),h&&v.jsx("div",{className:"emoji-picker",children:v.jsxs("div",{className:"emoji-list",children:[v.jsx(L1,{chatRoomId:n,sendEmoji:ie}),Array.isArray(t.purchasedEmojis)&&t.purchasedEmojis.length>0?t.purchasedEmojis.map(R=>{let j;switch(R.emoji){case"nalle1":j=Fw;break;case"nalle2":j=Uw;break;case"bukett":j=Mw;break;case"heart":j=zw;break;default:j="";break}return v.jsxs("button",{onClick:()=>x(j),className:`emoji-item ${C(R.emoji)}`,children:[v.jsx("img",{src:j,alt:R.emoji,className:"emoji-img"}),v.jsx("span",{children:R.count})]},R.emoji)}):v.jsx("p",{children:"Du har inga kpta emojis."})]})})]})]})},U1="/assets/bild-Dfg8spSP.png",z1=()=>{const n=Mn(),e=()=>n("/Findpartner"),t=()=>n("/account");return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img"})}),v.jsxs("div",{className:"divForchoices",children:[v.jsx("button",{onClick:e,className:"accountBtn",children:"Hitta din partner"}),v.jsx("button",{onClick:t,className:"accountBtn",children:"Konto"})]}),v.jsx("div",{className:"frontpagetextDiv",children:v.jsx("h2",{className:"welcometexttopage",children:"Letar du efter krlek, vnskap eller en livspartner? Vr plattform gr det enkelt att hitta ngon som passar just dig. Med smart matchning, Brja din resa idag och hitta den du sker!"})}),v.jsx("div",{className:"logga2",children:v.jsx("img",{src:U1,alt:"bild",className:"img2"})})]})},B1=async()=>{try{const e=(await yP(iP(Rr,"users"))).docs.map(t=>({id:t.id,...t.data()}));en.getState().setUsers(e)}catch(n){console.error(n)}},$1="/assets/viplogga-qG93N218.png",H1="/assets/viplogga_-CHotvKMr.png",q1=()=>{var Fe,Ge,ct,Cn,xr,Fn;const[n,e]=U.useState([]),[t,i]=U.useState([]),[o,l]=U.useState(""),[c]=U.useState(""),[h,p]=U.useState(""),[y]=U.useState(!1),[E,T]=U.useState(18),[S,A]=U.useState(100),[b,L]=U.useState(0),[D]=U.useState([]),{user:F,likedUsers:Q,addLikedUser:G,deniedUsers:te,resetDenyUsers:K,addDenyUsers:ie}=en(),[x,C]=U.useState(""),P=(we,be)=>`${be}-${we}`,k=Jc(),R=we=>(we==null?void 0:we.vipStatus)||(we==null?void 0:we.vipPlusStatus)||!1;if(!F)return v.jsx("p",{children:"Du mste vara inloggad fr att ska efter partners"});const{gender:j,sexualOrientation:N,id:Ae}=F,Ne=(we,be,Ue)=>we.filter(st=>!be.some(Kt=>Kt.id===st.id)&&!Ue.some(Kt=>Kt.id===st.id));U.useEffect(()=>{(async()=>{await B1();const be=en.getState().users;if(be&&be.length>0){const Ue=Ne(be,Q,te);e(Ue)}else console.error("Ingen anvndardata tillgnglig!"),p("Kunde inte ladda anvndardata.")})()},[Q,te]);const Pe=we=>{if(!F)return 0;let be=0;const Ue=7;(F.interests||"")===(we.interests||"")&&be++,F.smokes===we.smokes&&be++,F.religion===we.religion&&be++,F.wantsChildren===we.wantsChildren&&be++,F.hasChildren===we.hasChildren&&be++,F.education===we.education&&be++,F.relationshipStatus===we.relationshipStatus&&be++;const st=be/Ue*100;return Math.round(st)},De=()=>{if(!n||n.length===0)return;const we=N,be=n.filter(Ue=>{if(Ue.id===Ae)return!1;const st=o?Ue.city===o:!0,Kt=c?Ue.religion===c:!0,Un=!D.some(oi=>oi.id===Ue.id);let Gt=!1;const tn=Ue.sexualOrientation,Nr=j,lr=Ue.gender;return we==="Hetero"?Nr==="Man"&&lr==="Kvinna"?tn==="Hetero"&&(Gt=!0):Nr==="Kvinna"&&lr==="Man"&&tn==="Hetero"&&(Gt=!0):we==="Bi"?tn==="Bi"&&(Gt=!0):we==="Homo"&&Nr===lr&&tn==="Homo"&&(Gt=!0),st&&Gt&&Kt&&Un});i(be),L(0)},se=we=>{T(parseInt(we.target.value,10))},ye=we=>{A(parseInt(we.target.value,10))},ae=we=>{const be=t.find(Ue=>Ue.id===we);be&&(G(be),C("Gillad anvndare tillagd i gilla p din kontosida"),setTimeout(()=>{C("")},2e3),i(Ue=>Ue.filter(st=>st.id!==be.id)),J())},z=async we=>{const be=t.find(Ue=>Ue.id===we);be&&(await ie(be),i(Ue=>Ue.filter(st=>st.id!==we)),J())},J=()=>{t.length>1?L(we=>(we+1)%t.length):L(0)},me=(we,be,Ue)=>{const st=new Date,Kt=new Date(we,be-1,Ue);let Un=st.getFullYear()-Kt.getFullYear();return(st.getMonth()<Kt.getMonth()||st.getMonth()===Kt.getMonth()&&st.getDate()<Kt.getDate())&&Un--,Un},de=t[b],[Re,Oe]=U.useState([]);U.useEffect(()=>{const we=JSON.parse(localStorage.getItem(P((F==null?void 0:F.id)??"temp-user-id","deniedUsers"))||"[]");Oe(we)},[F==null?void 0:F.id]);const $e=async()=>{if(!R(F))return;K(),i(Ue=>[...Re,...Ue]);const we=mn(k,"users",F.id),be=F.denylist?F.denylist.filter(Ue=>!Re.some(st=>st.id===Ue.id)):[];try{await Ji(we,{denylist:be}),Oe([])}catch(Ue){console.error("Fel vid uppdatering av denylist:",Ue)}};return v.jsxs("div",{className:"columndiv3",children:[v.jsx("h2",{children:"Hitta din partner"}),v.jsx("label",{htmlFor:"minAge",children:"lder mellan:"}),v.jsxs("div",{className:"age-filter-container",children:[v.jsx("input",{type:"number",id:"minAge",value:E,onChange:se,min:"0",max:"120"}),v.jsx("input",{type:"number",id:"maxAge",value:S,onChange:ye,min:"0",max:"120"})]}),v.jsxs("div",{className:"search-form",children:[v.jsx("label",{htmlFor:"city",children:"Stad:"}),v.jsx("input",{type:"text",id:"city",value:o,onChange:we=>l(we.target.value),placeholder:"Exempel: Stockholm",className:"input-field"}),v.jsx("button",{onClick:De,disabled:y,className:"search-button",children:y?"Laddar...":"Sk partner"}),R(F)&&v.jsx("button",{onClick:$e,className:"btn btn-primary",children:"terstll "})]}),t.length>0&&de?v.jsx("div",{className:"results-item",children:v.jsx("ul",{className:"results-list",children:v.jsxs("li",{className:"result-item",children:[v.jsxs("div",{className:"result-info",children:[v.jsx("h4",{children:de.vipPlusStatus?v.jsx("img",{src:H1,alt:"viploggaplus",className:"vip-logo"}):de.vipStatus?v.jsx("img",{src:$1,alt:"viplogga",className:"vip-logo"}):null}),v.jsx("div",{className:`status-inlogfind ${(Fe=de.status)!=null&&Fe.online?"online":"offline"}`}),v.jsxs("h4",{children:[de.firstName," ",v.jsxs("span",{className:"age",children:[v.jsx("p",{children:v.jsxs("strong",{children:["lder: ",(Ge=F==null?void 0:F.age)!=null&&Ge.year&&((ct=F==null?void 0:F.age)!=null&&ct.month)&&((Cn=F==null?void 0:F.age)!=null&&Cn.day)?me(Number(F.age.year),Number(F.age.month),Number(F.age.day)):"Ej angivet"]})})," "]})]}),v.jsxs("p",{children:[v.jsxs("strong",{children:["Matchar: ",Pe(de),"%"]})," "]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Kn:"})," ",de.gender]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Religion:"})," ",de.religion]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Lggning:"})," ",de.sexualOrientation]})]}),v.jsxs("div",{className:"life-statements",children:[v.jsxs("p",{children:["Jag skulle aldrig kunna leva utan ",de.lifeStatement1]}),v.jsxs("p",{children:["Jag blir mest inspirerad nr ",de.lifeStatement2]}),v.jsxs("p",{children:[" ",(xr=de==null?void 0:de.status)==null?void 0:xr.lastLogin]}),R(F)&&v.jsxs(v.Fragment,{children:[v.jsxs("p",{children:[v.jsx("strong",{children:"Intressen:"})," ",(Fn=de.interests)==null?void 0:Fn.join(", ")]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Har barn:"})," ",de.hasChildren?"Ja":"Nej"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Vill ha barn:"})," ",de.wantsChildren?"Ja":"Nej"]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Rker:"})," ",de.smokes]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Sker/relationsstatus: "})," ",de.relationshipStatus]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Utbildning:"})," ",de.education]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Favoritsng:"})," ",de.favoriteSong]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Favoritfilm:"})," ",de.favoriteMovie]})]}),v.jsxs("div",{className:"button-container",children:[v.jsx("button",{onClick:()=>z(de.id),className:"deny-button",children:""}),v.jsx("button",{onClick:()=>ae(de.id),className:"like-button",children:""})]}),v.jsx("div",{className:"life-statements",children:x&&v.jsx("p",{className:"like-message",children:x})})]})]},de.id)})}):v.jsx("p",{className:"no-results",children:"Inga matchande resultat"}),h&&v.jsx("p",{className:"error-message",children:h})]})},W1=()=>{const n=Mn(),e=()=>n("/homepage");return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"picture",className:"img"})}),v.jsx("button",{className:"btnback",onClick:e,children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsx("h2",{className:"confirmation-message"}),v.jsx(q1,{})]})},K1=()=>v.jsxs("div",{className:"chat-container",children:[v.jsx("h2",{children:" BAS "}),v.jsx("p",{children:"  Matcha med andra anvndare"}),v.jsx("p",{children:"  Skicka en frfrgan nr ni matchar"}),v.jsx("p",{children:"  terstlla nekade anvndare"}),v.jsx("p",{children:"  F begrnsad med information om anvndare"}),v.jsx("h2",{children:"VIP "}),v.jsx("p",{children:" VIP 30dagars giltighet "}),v.jsx("p",{children:" Det som ingr i BAS"}),v.jsx("p",{children:" Som VIP Medlem kan du terstlla dina nekade anvndare. "}),v.jsx("p",{children:" F all information om en anvndare vid skning."}),v.jsx("p",{children:" Fr ven 10 krediter till att kunna handla fr i shoppen "}),v.jsx("h2",{children:"VIP+ "}),v.jsx("p",{children:" VIP+  30dagars giltighet.  "}),v.jsx("p",{children:" Allt som ingr i VIP "}),v.jsx("p",{children:" exklusiv samling emojis. "}),v.jsx("p",{children:" Tillgng till ondlig premium emojis i chatt."})]}),G1=()=>{const n=Mn(),{user:e,setUser:t,updatePromoCodeStatus:i}=en(),[o,l]=U.useState(""),[c,h]=U.useState(""),[p,y]=U.useState(!1),[E,T]=U.useState((e==null?void 0:e.credits)||0);U.useEffect(()=>{e||n("/")},[e,n]);const S={VIP:80,VIPPlus:100};if(!e||!e.id)return v.jsx("p",{children:"Laddar..."});U.useEffect(()=>{e&&e.hasUsedPromoCode&&h("")},[e]);const A=async()=>{if(o==="Hannisen"){if(e.hasUsedPromoCode){h("Du har redan anvnt din gratis kod.");return}const K={...e,credits:E+1e3,hasUsedPromoCode:!0};console.log("Uppdaterad anvndare med ny rabattkod:",K);try{await Ya(K),localStorage.setItem("user",JSON.stringify(K)),t(K),i(!0),T(K.credits),h("")}catch(ie){h("Ngot gick fel vid uppdatering. Frsk igen senare."),console.error(ie)}}else h("Ogiltig kod. Frsk igen.")},b=()=>y(!p),L=async(te,K)=>{if(E<K){h("Du har inte tillrckligt med krediter!");return}const ie=E-K;T(ie);const x=Array.isArray(e==null?void 0:e.purchasedEmojis)?e.purchasedEmojis:[],P=x.find(R=>R.emoji===te)?x.map(R=>R.emoji===te?{...R,count:R.count+1}:R):[...x,{emoji:te,count:1}],k={...e,credits:ie,purchasedEmojis:P};try{await Ya(k),t(k)}catch(R){console.error(R)}},D=async te=>{const K=E+te,ie={...e,credits:K};await Ya(ie),T(K)},F=[{name:"nalle1",src:Fw,price:3},{name:"nalle2",src:Uw,price:3},{name:"bukett",src:Mw,price:3},{name:"heart",src:zw,price:2}],Q=te=>{const K=te.filter(x=>x.price===3),ie=te.filter(x=>x.price===2);return v.jsxs("div",{className:"emoji-group",children:[v.jsxs("div",{className:"emoji-price-group",children:[v.jsx("h2",{children:"Kostnad: 3 krediter"}),v.jsx("div",{className:"emoji-list",children:K.map(x=>{const P=(Array.isArray(e.purchasedEmojis)?e.purchasedEmojis:[]).find(R=>R.emoji===x.name),k=P?P.count:0;return v.jsxs("div",{className:"emoji-item",onClick:()=>L(x.name,x.price),children:[v.jsx("img",{src:x.src,alt:x.name,className:`emoji ${E<x.price?"disabled":""}`}),k>0&&v.jsx("p",{className:"emoji-count",children:v.jsxs("strong",{children:["  ",k]})})]},x.name)})})]}),v.jsxs("div",{className:"emoji-price-group",children:[v.jsx("h2",{children:"Kostnad: 2 krediter"}),v.jsx("div",{className:"emoji-list",children:ie.map(x=>{const P=(Array.isArray(e.purchasedEmojis)?e.purchasedEmojis:[]).find(R=>R.emoji===x.name),k=P?P.count:0;return v.jsxs("div",{className:"emoji-item",onClick:()=>L(x.name,x.price),children:[v.jsx("img",{src:x.src,alt:x.name,className:`emoji ${E<x.price?"disabled":""}`}),k>0&&v.jsx("p",{className:"emoji-count",children:v.jsxs("strong",{children:[" ",k]})})]},x.name)})})]})]})},G=async(te,K)=>{if(E<K){h("Du har inte tillrckligt med krediter!");return}try{let ie={...e,credits:E-K};T(ie.credits);const x=Date.now()+30*24*60*60*1e3;switch(te){case"VIP":ie={...ie,vipStatus:!0,vipExpiry:x};break;case"VIPPlus":ie={...ie,vipStatus:!0,vipPlusStatus:!0,vipPlusExpiry:x};break}await Ya(ie),localStorage.setItem("user",JSON.stringify(ie)),t(ie)}catch(ie){console.error(ie)}};return v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"logga",children:v.jsx("img",{src:Pr,alt:"logo",className:"img"})}),v.jsx("button",{onClick:()=>n("/account"),className:"btnback",children:v.jsx("i",{className:"fas fa-arrow-left"})}),v.jsxs("h1",{className:"Rubriktext",children:[v.jsx("span",{className:"firstPart",children:" SHOPPEN "})," "]}),v.jsxs("p",{className:"price-text",children:["Din kredit: ",E]}),v.jsxs("div",{className:"vip-status",children:[e.vipStatus!==void 0&&v.jsxs("p",{children:["VIP : ",e.vipStatus?"Aktiv":"Inaktiv"]}),e.vipPlusStatus!==void 0&&v.jsxs("p",{children:["VIP Plus: ",e.vipPlusStatus?"Aktiv":"Inaktiv"]})]}),v.jsxs("button",{className:"vipinfobtn",onClick:b,children:["VIP information",v.jsx("span",{className:`arrow ${p?"open":""}`,onClick:b,children:""})]}),p&&v.jsx(K1,{}),v.jsxs("div",{className:"buybtncontainer",children:[v.jsx("button",{onClick:()=>G("VIP",S.VIP),className:"shopBtn",children:"VIP (80 krediter)"}),v.jsx("button",{onClick:()=>G("VIPPlus",S.VIPPlus),className:"shopBtn",children:"VIP PLUS (100 krediter)"}),v.jsx("button",{onClick:()=>D(10),className:"shopBtn",children:"10 krediter, 22.90 kronor"})]}),v.jsxs("div",{className:"promo-code-section",children:[v.jsx("input",{type:"text",placeholder:"Ange din kod hr",value:o,onChange:te=>l(te.target.value)}),v.jsx("button",{className:"usecodeBtn",onClick:A,children:"Anvnd kod"}),c&&v.jsx("p",{children:c})]}),v.jsx("div",{className:"emoji-shop",children:v.jsx("div",{className:"emoji-shop-list",children:Q(F)})})]})},Q1=({children:n})=>en(t=>t.user)?n:v.jsx(BI,{to:"/",replace:!0});function J1(){return v.jsx(pS,{children:v.jsxs(HI,{children:[v.jsx(Vn,{path:"/",element:v.jsx(SS,{})})," ",v.jsx(Vn,{path:"/register",element:v.jsx(g1,{})})," ",v.jsx(Vn,{path:"/login",element:v.jsx(x1,{})})," ",v.jsx(Vn,{path:"/homepage",element:v.jsx(Q1,{children:v.jsx(z1,{})})}),"   ",v.jsx(Vn,{path:"/account",element:v.jsx(R1,{})})," ",v.jsx(Vn,{path:"/match",element:v.jsx(N1,{})}),"  ",v.jsx(Vn,{path:"/messages",element:v.jsx(O1,{})})," ",v.jsx(Vn,{path:"/chat",element:v.jsx(Qv,{})})," ",v.jsx(Vn,{path:"/Findpartner",element:v.jsx(W1,{})}),v.jsx(Vn,{path:"/chat/:chatRoomId",element:v.jsx(Qv,{})}),"  ",v.jsx(Vn,{path:"/shop",element:v.jsx(G1,{})})," "]})})}ZT.createRoot(document.getElementById("root")).render(v.jsx(U.StrictMode,{children:v.jsx(J1,{})}));
